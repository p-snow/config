<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Emacs Configuration (.emacs.d/)</title>
<meta name="generator" content="Org mode" />
<link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/css/readtheorg.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/src/lib/js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/js/readtheorg.js"></script>
</head>
<body>
<div id="content">
<h1 class="title">Emacs Configuration (.emacs.d/)</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgcb07568">general configuration&#xa0;&#xa0;&#xa0;<span class="tag"><span class="elfeed">elfeed</span>&#xa0;<span class="soft_update">soft_update</span>&#xa0;<span class="prime">prime</span></span></a>
<ul>
<li><a href="#org341aab2">early initialization</a>
<ul>
<li><a href="#org10af525">package.el</a></li>
<li><a href="#org62f9d7d">straight.el</a></li>
<li><a href="#org2cf0962">use-package</a></li>
<li><a href="#org3b8f370">load cl-lib</a></li>
<li><a href="#org3add3af">modus-themes</a></li>
</ul>
</li>
<li><a href="#orge3e8ea2">init file</a>
<ul>
<li><a href="#org97bfc16">global variable definitions</a></li>
<li><a href="#org931592d">loading lisp files</a></li>
</ul>
</li>
<li><a href="#orgf094354">basic config</a>
<ul>
<li><a href="#org72fd917">language</a></li>
<li><a href="#org0b01e2b">visual facets</a></li>
<li><a href="#orge261071">face</a></li>
<li><a href="#org7faa212">file handling</a></li>
<li><a href="#org6ed7fc3">modifier keys</a></li>
<li><a href="#org0fea308">mark/region</a></li>
<li><a href="#org4a83d24">window</a></li>
<li><a href="#org49384fb">mode line</a></li>
<li><a href="#org5ab9b87">minibuffer</a></li>
<li><a href="#orgdc912d9">displaying</a></li>
<li><a href="#org16ba95b">display buffer</a></li>
<li><a href="#org5f766d3">text handling</a></li>
<li><a href="#org25f4521">indent</a></li>
<li><a href="#orgda282d3">performance</a></li>
<li><a href="#orgfc3c674">customize buffer</a></li>
<li><a href="#org10bb8dc">killing&#xa0;&#xa0;&#xa0;<span class="tag"><span class="kill">kill</span></span></a></li>
<li><a href="#org823566c">mouse</a></li>
<li><a href="#org2fc87b0">email&#xa0;&#xa0;&#xa0;<span class="tag"><span class="crypt">crypt</span></span></a></li>
<li><a href="#org412328c">ddskk</a></li>
<li><a href="#org657fa14">fundamental key bindings</a></li>
</ul>
</li>
<li><a href="#orgcea2844">built-in features</a>
<ul>
<li><a href="#org58ff64c">Auto Revert</a></li>
<li><a href="#orgf49f527">Abbrev</a></li>
<li><a href="#org1f68c86">EasyPG (epg)</a></li>
<li><a href="#org68ea723">auth-source</a></li>
<li><a href="#org29723d0">whitespace</a></li>
<li><a href="#org3497416">hippie-exp</a></li>
<li><a href="#org62b010c">bookmark</a></li>
<li><a href="#org617eb6e">find-dired</a></li>
<li><a href="#org16092a7">hideshow</a></li>
<li><a href="#org61ff3c4">uniquify</a></li>
<li><a href="#org6004aaa">recentf</a></li>
<li><a href="#org10cb4c6">server</a></li>
<li><a href="#orga36c364">calc</a></li>
<li><a href="#orgf9b1b87">calendar</a></li>
<li><a href="#org5f01af6">proced</a></li>
<li><a href="#orgedbc537">vc (version control)&#xa0;&#xa0;&#xa0;<span class="tag"><span class="maintaining">maintaining</span></span></a></li>
<li><a href="#org0f23dce">re-builder</a></li>
<li><a href="#org66fc930">isearch</a></li>
<li><a href="#org6a94292">imenu&#xa0;&#xa0;&#xa0;<span class="tag"><span class="programs">programs</span></span></a></li>
<li><a href="#org6c39c57">flyspell&#xa0;&#xa0;&#xa0;<span class="tag"><span class="fixit">fixit</span></span></a></li>
<li><a href="#orgdffa154">help&#xa0;&#xa0;&#xa0;<span class="tag"><span class="help">help</span></span></a></li>
<li><a href="#org5971fc3">info&#xa0;&#xa0;&#xa0;<span class="tag"><span class="help">help</span></span></a></li>
<li><a href="#org0a0274e">tramp</a></li>
<li><a href="#org2093dca">view</a></li>
<li><a href="#org1046f64">woman&#xa0;&#xa0;&#xa0;<span class="tag"><span class="programs">programs</span></span></a></li>
<li><a href="#org19180aa">executable</a></li>
<li><a href="#org0fcbc9a">paren</a></li>
</ul>
</li>
<li><a href="#orgd84f9a8">EWW</a>
<ul>
<li><a href="#org0ba6920">extract<sub>headings</sub></a></li>
</ul>
</li>
<li><a href="#org81a0408">mu4e</a>
<ul>
<li><a href="#orgf7a4719">mu4e-alert</a></li>
<li><a href="#org96782b5">additional tweaks</a></li>
<li><a href="#org5ff3143">personal settings&#xa0;&#xa0;&#xa0;<span class="tag"><span class="crypt">crypt</span></span></a></li>
</ul>
</li>
<li><a href="#orgf72901d">elfeed</a>
<ul>
<li><a href="#org00e0168">elfeed-org</a></li>
<li><a href="#orge8f9ee7">personal tagging rules&#xa0;&#xa0;&#xa0;<span class="tag"><span class="crypt">crypt</span></span></a></li>
</ul>
</li>
<li><a href="#org662d260">Dired</a>
<ul>
<li><a href="#orga79f3bd">dired-rsync</a></li>
<li><a href="#org9f91434">dired-single</a></li>
<li><a href="#orgda1dbda">dired-hacks</a></li>
<li><a href="#org7f1cd52">dired-hide-dotfiles</a></li>
<li><a href="#org04ca79b">dired-du</a></li>
</ul>
</li>
<li><a href="#org116c107">Shells</a>
<ul>
<li><a href="#orgbc93d9e">shell</a></li>
<li><a href="#org240f38a">term</a></li>
<li><a href="#orgf56c34a">vterm</a></li>
<li><a href="#orge516f47">eshell</a></li>
</ul>
</li>
<li><a href="#orgdc23126">org mode</a>
<ul>
<li><a href="#orgbf79770">org</a></li>
<li><a href="#orgaf61452">org-agenda</a></li>
<li><a href="#org5e6b580">org-capture</a></li>
<li><a href="#org5d4595c">org-timer and org-clock</a></li>
<li><a href="#org77e37e8">org-refile</a></li>
<li><a href="#org84d3681">org-plot</a></li>
<li><a href="#org1c3dc30">org-id</a></li>
<li><a href="#org120afbf">org links (ol)</a></li>
<li><a href="#org19a7974">org-archive</a></li>
<li><a href="#org8f6b3ec">org-list</a></li>
<li><a href="#orgae5be5a">org-indent</a></li>
<li><a href="#org3ef4191">org-crypt</a></li>
<li><a href="#org19a4948">org-babel</a></li>
<li><a href="#org707a69c">org-src</a></li>
<li><a href="#orgfe2ef85">org-export</a></li>
<li><a href="#orgb953723">org-contrib</a></li>
<li><a href="#orga185122">org-reveal</a></li>
<li><a href="#orga3c0e27">org-ql</a></li>
<li><a href="#org35db0a5">org-ml</a></li>
<li><a href="#org615cf5d">org-roam</a></li>
<li><a href="#org45e48cc">org-drill</a></li>
<li><a href="#orgcb2c300">org-mime</a></li>
<li><a href="#org434339e">org-web-tools</a></li>
<li><a href="#org446208e">org-clock-convenience</a></li>
<li><a href="#orge579328">custom functions</a></li>
<li><a href="#orgf15f26f">key bindings</a></li>
</ul>
</li>
<li><a href="#org6c308d4">completion</a>
<ul>
<li><a href="#org7d1f076">vertico</a></li>
<li><a href="#org48da5f8">consult</a></li>
<li><a href="#org116b155">embark</a></li>
<li><a href="#org42e9303">marginalia</a></li>
<li><a href="#org45710b8">orderless</a></li>
</ul>
</li>
<li><a href="#org2a519ac">major modes for programming/editing&#xa0;&#xa0;&#xa0;<span class="tag"><span class="programs">programs</span></span></a>
<ul>
<li><a href="#org0b999e0">prog</a></li>
<li><a href="#org846928a">sh</a></li>
<li><a href="#org71cfbd8">emacs lisp</a></li>
<li><a href="#org339b83b">cc-mode</a></li>
<li><a href="#org3ccef1c">python-mode</a></li>
<li><a href="#orgb8f6257">ruby-mode</a></li>
<li><a href="#org696c76f">inf-ruby</a></li>
<li><a href="#org082d3cd">yaml-mode</a></li>
<li><a href="#orgb46791f">lua-mode</a></li>
<li><a href="#org9215b90">perl-mode</a></li>
<li><a href="#org5fe0a58">tex-mode</a></li>
<li><a href="#org1f31a66">web-mode</a></li>
<li><a href="#org952a598">css-mode</a></li>
<li><a href="#org5ed975a">js2-mode</a></li>
<li><a href="#org27836bf">text-mode</a></li>
<li><a href="#org6468ea4">nxml</a></li>
<li><a href="#org3b93f1a">sql-mode</a></li>
<li><a href="#org6d98d74">project</a></li>
<li><a href="#org5a015c8">grep</a></li>
<li><a href="#org4e5eab5">compile</a></li>
<li><a href="#orge525731">log-view</a></li>
<li><a href="#org83ab0d9">plantuml-mode</a></li>
<li><a href="#org76af69b">lilypond</a></li>
<li><a href="#org69c6f55">conf</a></li>
<li><a href="#orgbc1ddfc">generic-x</a></li>
<li><a href="#org0f830cf">fundamental mode</a></li>
</ul>
</li>
<li><a href="#org4f8e36c">other third-party packages</a>
<ul>
<li><a href="#org994c77d">Magit&#xa0;&#xa0;&#xa0;<span class="tag"><span class="maintaining">maintaining</span></span></a></li>
<li><a href="#org0766407">projectile&#xa0;&#xa0;&#xa0;<span class="tag"><span class="maintaining">maintaining</span>&#xa0;<span class="ARCHIVE">ARCHIVE</span>&#xa0;<span class="ignore">ignore</span></span></a></li>
<li><a href="#orgc9f3cd6">counsel-projectile&#xa0;&#xa0;&#xa0;<span class="tag"><span class="maintaining">maintaining</span>&#xa0;<span class="ARCHIVE">ARCHIVE</span>&#xa0;<span class="ignore">ignore</span></span></a></li>
<li><a href="#org32da8de">ag.el&#xa0;&#xa0;&#xa0;<span class="tag"><span class="programs">programs</span>&#xa0;<span class="ARCHIVE">ARCHIVE</span>&#xa0;<span class="ignore">ignore</span></span></a></li>
<li><a href="#orgc459e1d">ripgrep.el&#xa0;&#xa0;&#xa0;<span class="tag"><span class="programs">programs</span>&#xa0;<span class="ARCHIVE">ARCHIVE</span>&#xa0;<span class="ignore">ignore</span></span></a></li>
<li><a href="#orgf1a72c8">Emacs-wgrep</a></li>
<li><a href="#orgb3c43e9">dumb-jump&#xa0;&#xa0;&#xa0;<span class="tag"><span class="programs">programs</span></span></a></li>
<li><a href="#orgb09bd5a">visual-regexp.el</a></li>
<li><a href="#orgdd0f17d">avy</a></li>
<li><a href="#org88450c2">paredit</a></li>
<li><a href="#org3717ec5">lsp-mode</a></li>
<li><a href="#orgb2d49a3">company-mode</a></li>
<li><a href="#orgf36cfe2">flycheck</a></li>
<li><a href="#orgdf11b8a">twittering-mode</a></li>
<li><a href="#org5e7a337">comment-dwim-2&#xa0;&#xa0;&#xa0;<span class="tag"><span class="programs">programs</span></span></a></li>
<li><a href="#org22c290c">undo-tree</a></li>
<li><a href="#org4a5aaa0">quickrun&#xa0;&#xa0;&#xa0;<span class="tag"><span class="programs">programs</span></span></a></li>
<li><a href="#orgaf3bc8d">expand-region.el&#xa0;&#xa0;&#xa0;<span class="tag"><span class="mark">mark</span></span></a></li>
<li><a href="#org1e70d67">helpful&#xa0;&#xa0;&#xa0;<span class="tag"><span class="help">help</span></span></a></li>
<li><a href="#orgf0000d9">define-word</a></li>
<li><a href="#org71fae34">synosaurus</a></li>
<li><a href="#org380052c">exec-path-from-shell</a></li>
<li><a href="#org22964c0">migemo</a></li>
<li><a href="#orgba0e08e">japanese-holidays</a></li>
<li><a href="#org0d99201">hungry-delete</a></li>
<li><a href="#org4ca72a2">aggressive-indent-mode</a></li>
<li><a href="#orgc9ab3c7">adaptive-wrap</a></li>
<li><a href="#orge24a1cc">restart-emacs</a></li>
<li><a href="#orga461fed">pangu-spacing</a></li>
<li><a href="#org135dde8">emacs-which-key</a></li>
<li><a href="#orgb1c3c5e">hydra</a></li>
<li><a href="#orgcb870b7">pass</a></li>
<li><a href="#org6ae73d4">password-store</a></li>
<li><a href="#orge19477b">nov.el</a></li>
<li><a href="#orgdd3789a">yasnippet</a></li>
<li><a href="#org7226713">pdf-tools</a></li>
<li><a href="#org495f068">rainbow-mode</a></li>
<li><a href="#orgefc5eec">alert</a></li>
<li><a href="#orgaa9ccd6">ts.el</a></li>
<li><a href="#orgb0ee3cf">app-launcher</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org5ee43a8">further customization</a>
<ul>
<li><a href="#org41ede1b">handy functionalities</a>
<ul>
<li><a href="#orgd2f1892">power management</a></li>
<li><a href="#org33e55db">cursor movement</a></li>
<li><a href="#org5a24df7">lookup functions</a></li>
<li><a href="#org1d049d9">perspective control</a></li>
<li><a href="#orgfa76407">tldr</a></li>
<li><a href="#org524e3d5">sending email</a></li>
<li><a href="#org6458ff0">open url or something</a></li>
<li><a href="#orgaf5f381">media file handling</a></li>
<li><a href="#org47adfc7">using speech synthesis</a></li>
<li><a href="#org9b23c39">collective hydra definitions</a></li>
<li><a href="#org4f2f606">show the day in calendar</a></li>
<li><a href="#org21be1af">utilities</a></li>
</ul>
</li>
<li><a href="#org9b6fac2">original features</a>
<ul>
<li><a href="#orgddbb40c">org-english</a></li>
<li><a href="#org2f61d1d">org-password-store</a></li>
<li><a href="#orgb7afd60">org-archive</a></li>
<li><a href="#orgabe25d4">org-capture-derived</a></li>
<li><a href="#orgaf620b5">org-relate</a></li>
<li><a href="#org4135de5">clocktable-by-tag with org-clock</a></li>
<li><a href="#org7b5f666">narrow-dwim</a></li>
<li><a href="#orga277c4e">weather</a></li>
<li><a href="#orgc0db72f">view-file</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org25924d4">package management</a></li>
<li><a href="#org723eca1">emacs profile for guix</a></li>
</ul>
</div>
</div>

<div id="outline-container-orgcb07568" class="outline-2">
<h2 id="orgcb07568">general configuration&#xa0;&#xa0;&#xa0;<span class="tag"><span class="elfeed">elfeed</span>&#xa0;<span class="soft_update">soft_update</span>&#xa0;<span class="prime">prime</span></span></h2>
<div class="outline-text-2" id="text-orgcb07568">
</div>
<div id="outline-container-org341aab2" class="outline-3">
<h3 id="org341aab2">early initialization</h3>
<div class="outline-text-3" id="text-org341aab2">
<p>
These process must be evaluated beforehand.
</p>
</div>

<div id="outline-container-org10af525" class="outline-4">
<h4 id="org10af525">package.el</h4>
<div class="outline-text-4" id="text-org10af525">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">package</span>)
(<span style="font-weight: bold;">setq</span> package-archives
      '((<span style="font-style: italic;">"gnu"</span> . <span style="font-style: italic;">"http://elpa.gnu.org/packages/"</span>)
        (<span style="font-style: italic;">"melpa"</span> . <span style="font-style: italic;">"http://melpa.org/packages/"</span>)
        (<span style="font-style: italic;">"org"</span> . <span style="font-style: italic;">"http://orgmode.org/elpa/"</span>)))
(<span style="font-weight: bold;">setq</span> package-enable-at-startup nil)
(package-initialize t)

(<span style="font-weight: bold;">let</span> ((pkg-emacs-ver-dir
       (locate-user-emacs-file
        (concat <span style="font-style: italic;">"package/"</span> emacs-version))))
  (add-to-list 'load-path (<span style="font-weight: bold;">setq</span> package-user-dir (expand-file-name <span style="font-style: italic;">"elpa"</span> pkg-emacs-ver-dir)))
  (add-to-list 'load-path (expand-file-name <span style="font-style: italic;">"elisp"</span> pkg-emacs-ver-dir)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org62f9d7d" class="outline-4">
<h4 id="org62f9d7d"><a href="https://github.com/raxod502/straight.el/releases.atom">straight.el</a></h4>
<div class="outline-text-4" id="text-org62f9d7d">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> straight-recipes-gnu-elpa-use-mirror t)

(<span style="font-weight: bold;">let</span> ((bootstrap-file
       (expand-file-name <span style="font-style: italic;">"straight/repos/straight.el/bootstrap.el"</span> user-emacs-directory))
      (bootstrap-version 4))
  (<span style="font-weight: bold;">unless</span> (file-exists-p bootstrap-file)
    (<span style="font-weight: bold;">with-current-buffer</span>
        (url-retrieve-synchronously
         <span style="font-style: italic;">"https://raw.githubusercontent.com/raxod502/straight.el/develop/install.el"</span>
         'silent 'inhibit-cookies)
      (goto-char (point-max))
      (eval-print-last-sexp)))
  (load bootstrap-file nil 'nomessage))

(<span style="font-weight: bold;">with-eval-after-load</span> 'hydra
  (defhydra hydra-straight (global-map <span style="font-style: italic;">"C-x -"</span>
                                       <span style="font-weight: bold;">:color</span> blue)
    <span style="font-style: italic;">"Straight"</span>
    (<span style="font-style: italic;">"c"</span> straight-check-package)
    (<span style="font-style: italic;">"C"</span> straight-check-all)
    (<span style="font-style: italic;">"r"</span> straight-rebuild-package)
    (<span style="font-style: italic;">"R"</span> straight-rebuild-all)
    (<span style="font-style: italic;">"f"</span> straight-fetch-package)
    (<span style="font-style: italic;">"F"</span> straight-fetch-all)
    (<span style="font-style: italic;">"p"</span> straight-pull-package-and-deps)
    (<span style="font-style: italic;">"P"</span> straight-pull-all)
    (<span style="font-style: italic;">"m"</span> straight-merge-package)
    (<span style="font-style: italic;">"M"</span> straight-merge-all)
    (<span style="font-style: italic;">"n"</span> straight-normalize-package)
    (<span style="font-style: italic;">"N"</span> straight-normalize-all)
    (<span style="font-style: italic;">"u"</span> straight-push-package)
    (<span style="font-style: italic;">"U"</span> straight-push-all)
    (<span style="font-style: italic;">"v"</span> straight-freeze-versions)
    (<span style="font-style: italic;">"V"</span> straight-thaw-versions)
    (<span style="font-style: italic;">"w"</span> straight-watcher-start)
    (<span style="font-style: italic;">"W"</span> straight-watcher-quit)
    (<span style="font-style: italic;">"g"</span> straight-get-recipe)
    (<span style="font-style: italic;">"e"</span> straight-prune-build)
    (<span style="font-style: italic;">"q"</span> nil)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org2cf0962" class="outline-4">
<h4 id="org2cf0962"><a href="https://github.com/jwiegley/use-package/releases.atom">use-package</a></h4>
<div class="outline-text-4" id="text-org2cf0962">
<p>
<a href="https://jwiegley.github.io/use-package/">Official manual</a> is handy especially when you look up <a href="https://jwiegley.github.io/use-package/keywords/">Keywords</a>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">install use-package via straight.el</span>
(straight-use-package 'use-package)

(use-package use-package
  <span style="font-weight: bold;">:custom</span>
  (use-package-ensure-function 'straight-use-package-ensure-function))

(use-package use-package-ensure-system-package <span style="font-weight: bold;">:straight</span> t)
</pre>
</div>

<p>
use-package depends on following packages internally
</p>
</div>

<ul class="org-ul">
<li><a id="orga0cf7a1"></a><a href="https://github.com/myrjola/diminish.el/releases.atom">diminish.el</a><br />
<div class="outline-text-5" id="text-orga0cf7a1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package diminish <span style="font-weight: bold;">:straight</span> t)
</pre>
</div>
</div>
</li>

<li><a id="orga390683"></a><a href="https://github.com/emacs-straight/delight/releases.atom">delight</a><br />
<div class="outline-text-5" id="text-orga390683">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package delight <span style="font-weight: bold;">:straight</span> t)
</pre>
</div>
</div>
</li>
</ul>
</div>

<div id="outline-container-org3b8f370" class="outline-4">
<h4 id="org3b8f370">load cl-lib</h4>
<div class="outline-text-4" id="text-org3b8f370">
<p>
Use 'cl-lib' rather than 'cl' package since it is <a href="https://www.gnu.org/savannah-checkouts/gnu/emacs/news/NEWS.27.1">officially deprecated</a>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">cl-lib</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-org3add3af" class="outline-4">
<h4 id="org3add3af"><a href="https://github.com/protesilaos/modus-themes/releases.atom">modus-themes</a></h4>
<div class="outline-text-4" id="text-org3add3af">
<p>
I love modus-theme which <a href="https://protesilaos.com/codelog/2019-08-07-emacs-modus-themes/">conforms to WCAG AAA</a>
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package modus-themes
  <span style="font-weight: bold;">:straight</span> (modus-themes
             <span style="font-weight: bold;">:host</span> github
             <span style="font-weight: bold;">:repo</span> <span style="font-style: italic;">"protesilaos/modus-themes"</span>
             <span style="font-weight: bold;">:branch</span> <span style="font-style: italic;">"main"</span>)
  <span style="font-weight: bold;">:init</span>
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Add all your customizations prior to loading the themes</span>
  (<span style="font-weight: bold;">setq</span> modus-themes-slanted-constructs t
        modus-themes-bold-constructs nil
        modus-themes-region 'no-extend)
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Load the theme files before enabling a theme</span>
  (modus-themes-load-themes)
  <span style="font-weight: bold;">:config</span>
  (modus-themes-load-vivendi))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orge3e8ea2" class="outline-3">
<h3 id="orge3e8ea2">init file</h3>
<div class="outline-text-3" id="text-orge3e8ea2">
</div>

<div id="outline-container-org97bfc16" class="outline-4">
<h4 id="org97bfc16">global variable definitions</h4>
<div class="outline-text-4" id="text-org97bfc16">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setf</span> user-emacs-directory (file-name-as-directory <span style="font-style: italic;">"~/var/lib/emacs"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-org931592d" class="outline-4">
<h4 id="org931592d">loading lisp files</h4>
<div class="outline-text-4" id="text-org931592d">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">dolist</span> (file (directory-files <span style="font-style: italic;">"~/.emacs.d/lisp"</span> t <span style="font-style: italic;">"</span><span style="font-weight: bold; font-style: italic;">\</span><span style="font-style: italic;">.el$"</span>))
  (funcall #'load-file file))
(<span style="font-weight: bold;">dolist</span> (file (directory-files <span style="font-style: italic;">"~/.emacs.d/site-lisp"</span> t <span style="font-style: italic;">"</span><span style="font-weight: bold; font-style: italic;">\</span><span style="font-style: italic;">.el$"</span>))
  (funcall #'load-file file))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgf094354" class="outline-3">
<h3 id="orgf094354">basic config</h3>
<div class="outline-text-3" id="text-orgf094354">
</div>

<div id="outline-container-org72fd917" class="outline-4">
<h4 id="org72fd917">language</h4>
<div class="outline-text-4" id="text-org72fd917">
<p>
<a href="https://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Language-Environments">emacs#Language Environments</a>
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">language and locale</span>
(set-language-environment <span style="font-style: italic;">"Japanese"</span>)
(<span style="font-weight: bold;">setq</span> system-time-locale <span style="font-style: italic;">"C"</span>)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">coding system</span>
(set-default-coding-systems 'utf-8-unix)
(prefer-coding-system 'utf-8-unix)
(set-selection-coding-system 'utf-8-unix)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">prefer-coding-system take effect equally to follows</span>
(set-buffer-file-coding-system 'utf-8-unix)
(set-file-name-coding-system 'utf-8-unix)
(set-terminal-coding-system 'utf-8-unix)
(set-keyboard-coding-system 'utf-8-unix)
(<span style="font-weight: bold;">setq</span> locale-coding-system 'utf-8-unix)
</pre>
</div>
</div>
</div>
<div id="outline-container-org0b01e2b" class="outline-4">
<h4 id="org0b01e2b">visual facets</h4>
<div class="outline-text-4" id="text-org0b01e2b">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">do not use basic GUI facets</span>
(tool-bar-mode -1)
(menu-bar-mode -1)
(scroll-bar-mode -1)
(tooltip-mode -1)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">fringe is preferably as thin as possible</span>
(set-fringe-mode 10)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">do not use visual bell</span>
(<span style="font-weight: bold;">setf</span> visible-bell nil)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">conceal distractions at startup</span>
(<span style="font-weight: bold;">setf</span> initial-scratch-message <span style="font-style: italic;">""</span>)
(<span style="font-weight: bold;">setf</span> inhibit-startup-screen t)
</pre>
</div>
</div>
</div>
<div id="outline-container-orge261071" class="outline-4">
<h4 id="orge261071">face</h4>
<div class="outline-text-4" id="text-orge261071">
<p>
CAUTION: There are some face definitions which use an extra large font since I am <a href="https://en.wikipedia.org/wiki/Visual_impairment">visually impaired</a>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">my-default-pixel-width</span> 2560 <span style="font-style: italic;">"Default display width in pixel."</span>)
(<span style="font-weight: bold;">defmacro</span> <span style="font-weight: bold;">my-adjust-font-size</span> (original)
  <span style="font-style: italic;">"Adjust original font size to fit in display."</span>
  `(truncate (* ,original (/ (float (x-display-pixel-width))
                             ,my-default-pixel-width))))


(create-fontset-from-ascii-font <span style="font-style: italic;">"TakaoGothic"</span> nil <span style="font-style: italic;">"default"</span>)
(create-fontset-from-ascii-font <span style="font-style: italic;">"TakaoExGothic"</span> nil <span style="font-style: italic;">"variable"</span>)
(create-fontset-from-ascii-font <span style="font-style: italic;">"TakaoPMincho"</span> nil <span style="font-style: italic;">"mincho"</span>)
(create-fontset-from-ascii-font <span style="font-style: italic;">"TakaoMincho"</span> nil <span style="font-style: italic;">"fmincho"</span>)
(create-fontset-from-ascii-font <span style="font-style: italic;">"Gen Shin Gothic Monospace Light"</span> nil <span style="font-style: italic;">"dense"</span>)

(set-face-attribute 'default
                    nil
                    <span style="font-weight: bold;">:font</span> <span style="font-style: italic;">"fontset-default"</span>
                    <span style="font-weight: bold;">:height</span> (my-adjust-font-size 660))
(set-face-attribute 'fixed-pitch
                    nil
                    <span style="font-weight: bold;">:font</span> <span style="font-style: italic;">"fontset-default"</span>)
(set-face-attribute 'variable-pitch
                    nil
                    <span style="font-weight: bold;">:font</span> <span style="font-style: italic;">"fontset-variable"</span>)
(set-face-attribute 'bold
                    nil
                    <span style="font-weight: bold;">:weight</span> 'bold)
(set-face-attribute 'mode-line
                    nil
                    <span style="font-weight: bold;">:font</span> <span style="font-style: italic;">"fontset-fmincho"</span>
                    <span style="font-weight: bold;">:height</span> (my-adjust-font-size 660))

(use-package face-remap
  <span style="font-weight: bold;">:diminish</span> buffer-face-mode
  <span style="font-weight: bold;">:config</span>
  (buffer-face-mode 1))

(use-package face
  <span style="font-weight: bold;">:no-require</span> t
  <span style="font-weight: bold;">:init</span>
  (<span style="font-weight: bold;">defface</span> <span style="font-weight: bold; font-style: italic;">my/large-gothic-face</span> `((t . (<span style="font-weight: bold;">:font</span> <span style="font-style: italic;">"fontset-default"</span>
                                              <span style="font-weight: bold;">:height</span> ,(my-adjust-font-size 900))))
    <span style="font-style: italic;">"A face with large font."</span>)
  (<span style="font-weight: bold;">defface</span> <span style="font-weight: bold; font-style: italic;">my/medium-large-gothic-face</span> `((t . (<span style="font-weight: bold;">:font</span> <span style="font-style: italic;">"fontset-default"</span>
                                                     <span style="font-weight: bold;">:height</span> ,(my-adjust-font-size 835))))
    <span style="font-style: italic;">"A face with medium-large font."</span>)
  (<span style="font-weight: bold;">defface</span> <span style="font-weight: bold; font-style: italic;">my/medium-gothic-face</span> `((t . (<span style="font-weight: bold;">:font</span> <span style="font-style: italic;">"fontset-default"</span>
                                               <span style="font-weight: bold;">:height</span> ,(my-adjust-font-size 655))))
    <span style="font-style: italic;">"A face with medium font."</span>)
  (<span style="font-weight: bold;">defface</span> <span style="font-weight: bold; font-style: italic;">my/small-gothic-face</span> `((t . (<span style="font-weight: bold;">:font</span> <span style="font-style: italic;">"fontset-default"</span>
                                              <span style="font-weight: bold;">:height</span> ,(my-adjust-font-size 570))))
    <span style="font-style: italic;">"A face with small font."</span>)
  (<span style="font-weight: bold;">defface</span> <span style="font-weight: bold; font-style: italic;">my/tiny-gothic-face</span> `((t . (<span style="font-weight: bold;">:font</span> <span style="font-style: italic;">"fontset-default"</span>
                                             <span style="font-weight: bold;">:height</span> ,(my-adjust-font-size 400))))
    <span style="font-style: italic;">"A face with tiny font."</span>)
  (<span style="font-weight: bold;">defface</span> <span style="font-weight: bold; font-style: italic;">my/large-mincho-face</span> `((t . (<span style="font-weight: bold;">:font</span> <span style="font-style: italic;">"fontset-mincho"</span>
                                              <span style="font-weight: bold;">:height</span> ,(my-adjust-font-size 840))))
    <span style="font-style: italic;">"A face with large mincho font."</span>)
  (<span style="font-weight: bold;">defface</span> <span style="font-weight: bold; font-style: italic;">my/medium-mincho-face</span> `((t . (<span style="font-weight: bold;">:font</span> <span style="font-style: italic;">"fontset-fmincho"</span>
                                               <span style="font-weight: bold;">:height</span> ,(my-adjust-font-size 780))))
    <span style="font-style: italic;">"A face with medium mincho font."</span>)
  <span style="font-weight: bold;">:hook</span>
  ((eww-mode twittering-mode nov-mode) . (<span style="font-weight: bold;">lambda</span> () (buffer-face-set 'my/large-gothic-face)))
  ((Info-mode help-mode helpful-mode woman-mode) . (<span style="font-weight: bold;">lambda</span> () (buffer-face-set 'my/medium-large-gothic-face)))
  ((org-mode text-mode dired-mode mu4e-headers-mode mu4e-compose-mode) . (<span style="font-weight: bold;">lambda</span> () (buffer-face-set 'my/medium-gothic-face)))
  ((prog-mode shell-mode term-mode vterm-mode eshell-mode) . (<span style="font-weight: bold;">lambda</span> () (buffer-face-set 'my/small-gothic-face)))
  (calendar-mode . (<span style="font-weight: bold;">lambda</span> () (buffer-face-set 'my/tiny-gothic-face)))
  ((mu4e-view-mode elfeed-show-mode) . (<span style="font-weight: bold;">lambda</span> () (buffer-face-set 'my/large-mincho-face)))
  (elfeed-search-update . (<span style="font-weight: bold;">lambda</span> () (buffer-face-set 'my/medium-mincho-face))))
</pre>
</div>
</div>
</div>

<div id="outline-container-org7faa212" class="outline-4">
<h4 id="org7faa212">file handling</h4>
<div class="outline-text-4" id="text-org7faa212">
<p>
File-related tweaks including <a href="https://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Customize-Save">Customizing Saving of Files</a>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package files
  <span style="font-weight: bold;">:custom</span>
  (mode-require-final-newline 'visit-save)
  (make-backup-files nil)
  (delete-auto-save-files t)
  (enable-remote-dir-locals t)
  <span style="font-weight: bold;">:config</span>
  (<span style="font-weight: bold;">setq</span> delete-by-moving-to-trash t))

(use-package saveplace
  <span style="font-weight: bold;">:custom</span>
  (save-place-version-control t)
  <span style="font-weight: bold;">:config</span>
  (save-place-mode 1))

(auto-compression-mode 1)

(<span style="font-weight: bold;">setq</span> auto-save-interval 4)
(<span style="font-weight: bold;">setq</span> auto-save-timeout 1)
(<span style="font-weight: bold;">setq</span> auto-save-default t)
(<span style="font-weight: bold;">setq</span> auto-save-list-file-prefix
      (concat user-emacs-directory <span style="font-style: italic;">"auto-save-list/.saves-"</span>))
</pre>
</div>
</div>
</div>
<div id="outline-container-org6ed7fc3" class="outline-4">
<h4 id="org6ed7fc3">modifier keys</h4>
<div class="outline-text-4" id="text-org6ed7fc3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">cond</span>
 ((string= window-system <span style="font-style: italic;">"x"</span>)
  (<span style="font-weight: bold;">setf</span> x-alt-keysym  'alt
        x-meta-keysym 'meta))
 ((string= window-system <span style="font-style: italic;">"ns"</span>)
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">IME inline patch</span>
  (<span style="font-weight: bold;">setf</span> mac-use-input-method-on-system nil)
  (<span style="font-weight: bold;">setf</span> mac-control-modifier       'control
        mac-command-modifier       'meta
        mac-option-modifier        'super
        mac-right-option-modifier  'alt
        mac-right-control-modifier 'super
        mac-function-modifier      'hyper)))
</pre>
</div>
</div>
</div>
<div id="outline-container-org0fea308" class="outline-4">
<h4 id="org0fea308">mark/region</h4>
<div class="outline-text-4" id="text-org0fea308">
<p>
Variables need to be carefully tweaked with <a href="https://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Mark">manual</a>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(setq set-mark-command-repeat-pop t)</span>
(<span style="font-weight: bold;">setf</span> mark-ring-max 32)
(<span style="font-weight: bold;">setf</span> highlight-nonselected-windows t)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">text in region will be deleted</span>
(delete-selection-mode t)
</pre>
</div>
</div>
</div>

<div id="outline-container-org4a83d24" class="outline-4">
<h4 id="org4a83d24">window</h4>
<div class="outline-text-4" id="text-org4a83d24">
<p>
Triple Escape (M-ESC ESC) has got to reset window layout by tweaking buffer-quit-function.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(winner-mode)
(global-set-key (kbd <span style="font-style: italic;">"C-z"</span>) 'winner-undo)
(global-set-key (kbd <span style="font-style: italic;">"C-M-z"</span>) 'winner-redo)

(<span style="font-weight: bold;">setq</span> buffer-quit-function 'winner-undo)

(global-set-key (kbd <span style="font-style: italic;">"M-o"</span>) 'other-window)

(windmove-default-keybindings)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">You can now switch windows with your shift key by pressing S-&lt;left&gt;, S-&lt;right&gt;, S-&lt;up&gt;, S-&lt;down&gt;.</span>
(windmove-default-keybindings)
</pre>
</div>
</div>
</div>

<div id="outline-container-org49384fb" class="outline-4">
<h4 id="org49384fb">mode line</h4>
<div class="outline-text-4" id="text-org49384fb">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Don't show line and column number in the mode line</span>
(line-number-mode -1)
(column-number-mode -1)

(use-package time
  <span style="font-weight: bold;">:custom</span>
  (display-time-24hr-format t)
  (display-time-mail-string <span style="font-style: italic;">""</span>)
  (display-time-default-load-average nil)
  <span style="font-weight: bold;">:config</span>
  (display-time-mode t))

(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">my/mode-line-buffer-name-length</span> 15
  <span style="font-style: italic;">"Fixed length for displaying buffer name in mode line."</span>)

(<span style="font-weight: bold;">setq-default</span> mode-line-format
              '(<span style="font-style: italic;">"%e"</span>
                mode-line-front-space
                mode-line-mule-info
                (<span style="font-weight: bold;">:eval</span>
                 (<span style="font-weight: bold;">let</span> ((mode-line-buffer-name
                        (replace-regexp-in-string <span style="font-style: italic;">" %</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">(</span><span style="font-style: italic;">[[:ascii:]]</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">)</span><span style="font-style: italic;">"</span> <span style="font-style: italic;">" %%\\1"</span>
                                                  (truncate-string-to-width
                                                   (buffer-name) my/mode-line-buffer-name-length nil ? t))))
                   (<span style="font-weight: bold;">cond</span>
                    (buffer-read-only
                     (propertize mode-line-buffer-name 'face 'underline))
                    ((buffer-modified-p)
                     (propertize mode-line-buffer-name 'face 'warning))
                    (mode-line-buffer-name))))
                (<span style="font-weight: bold;">:eval</span>
                 (<span style="font-weight: bold;">let</span> ((str (<span style="font-weight: bold;">if</span> line-number-mode
                                <span style="font-style: italic;">"^%l-%p"</span> <span style="font-style: italic;">""</span>)))
                   (<span style="font-weight: bold;">if</span> column-number-mode
                       (concat str <span style="font-style: italic;">"_%c"</span>) str)))
                global-mode-string))
</pre>
</div>
</div>
</div>

<div id="outline-container-org5ab9b87" class="outline-4">
<h4 id="org5ab9b87">minibuffer</h4>
<div class="outline-text-4" id="text-org5ab9b87">
<p>
<a href="savehist-mode">savehist-mode</a> saves minibuffer history and additionals.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(savehist-mode)

(<span style="font-weight: bold;">setf</span> history-length 1500)
(<span style="font-weight: bold;">setf</span> history-delete-duplicates t)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">allow y/n answer for an either-or selection</span>
(fset 'yes-or-no-p 'y-or-n-p)

(add-hook 'minibuffer-setup-hook 'my/minibuffer-setup-function)

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/minibuffer-setup-function</span> ()
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">disable input method in mini buffer</span>
  (<span style="font-weight: bold;">when</span> current-input-method
    (deactivate-input-method))
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">decrease font size to 90% in minibuffer</span>
  (<span style="font-weight: bold;">setq-local</span> face-remapping-alist '((default <span style="font-weight: bold;">:height</span> 0.9))))

(<span style="font-weight: bold;">setf</span> enable-recursive-minibuffers t)
(minibuffer-depth-indicate-mode 1)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">search files in case insensitive way</span>
(<span style="font-weight: bold;">setf</span> read-file-name-completion-ignore-case t)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgdc912d9" class="outline-4">
<h4 id="orgdc912d9">displaying</h4>
<div class="outline-text-4" id="text-orgdc912d9">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setf</span> scroll-step 1)

(<span style="font-weight: bold;">setf</span> text-scale-mode-step 1.0625)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">let the cursor blinking</span>
(<span style="font-weight: bold;">setf</span> blink-cursor-blinks 15)
(<span style="font-weight: bold;">setf</span> blink-cursor-delay 0.7)
(<span style="font-weight: bold;">setf</span> blink-cursor-interval 0.35)
(blink-cursor-mode 1)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">use emacs in full screen mode</span>
(<span style="font-weight: bold;">when</span> (member (window-system) '(x ns w32))
  (set-frame-parameter nil 'fullscreen 'fullboth))

(<span style="font-weight: bold;">setq-default</span> truncate-lines t)

(use-package visual-line
  <span style="font-weight: bold;">:no-require</span> t
  <span style="font-weight: bold;">:after</span> adaptive-wrap
  <span style="font-weight: bold;">:hook</span>
  ((feed-show-mode eww-after-render help-mode helpful-mode Info-mode woman-mode mu4e-view-mode nov-mode twittering-mode)
   . visual-line-mode)
  ((feed-show-mode eww-after-render help-mode helpful-mode Info-mode woman-mode mu4e-view-mode nov-mode twittering-mode)
   . adaptive-wrap-prefix-mode)
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">major modes inherited from text-mode, like org-mode, is not desired to enable visual-line-mode</span>
  (text-mode . (<span style="font-weight: bold;">lambda</span> ()
                 (<span style="font-weight: bold;">when</span> (eq major-mode 'text-mode)
                   (visual-line-mode))))
  <span style="font-weight: bold;">:config</span>
  (global-visual-line-mode 0))
</pre>
</div>
</div>
</div>

<div id="outline-container-org16ba95b" class="outline-4">
<h4 id="org16ba95b"><a id="ID-a504f06e-02d3-4dcd-b80b-566a55cca2c7"></a>display buffer</h4>
<div class="outline-text-4" id="text-org16ba95b">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> display-buffer-base-action
      '((display-buffer-same-window
         display-buffer-reuse-window
         display-buffer-reuse-mode-window
         display-buffer-in-previous-window)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org5f766d3" class="outline-4">
<h4 id="org5f766d3">text handling</h4>
<div class="outline-text-4" id="text-org5f766d3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq-default</span> fill-column 80)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">suppress curved quotes in docstring (for emacs25)</span>
(<span style="font-weight: bold;">setf</span> text-quoting-style 'straight)
</pre>
</div>
</div>
</div>

<div id="outline-container-org25f4521" class="outline-4">
<h4 id="org25f4521">indent</h4>
<div class="outline-text-4" id="text-org25f4521">
<p>
customization for <a href="https://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Indentation">indentation</a>
See also <a href="#org4ca72a2">aggressive-indent-mode</a>
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">use spaces instead of a horizontal tab</span>
(<span style="font-weight: bold;">setq-default</span> indent-tabs-mode nil)

(custom-set-variables '(tab-always-indent 'complete))
(electric-indent-mode 1)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgda282d3" class="outline-4">
<h4 id="orgda282d3">performance</h4>
<div class="outline-text-4" id="text-orgda282d3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> gc-cons-threshold (* 10 gc-cons-threshold))
(<span style="font-weight: bold;">setq</span> message-log-max 10000)
(<span style="font-weight: bold;">setq</span> shell-command-switch <span style="font-style: italic;">"-c"</span>)
(<span style="font-weight: bold;">setq</span> undo-outer-limit 64000000)

(<span style="font-weight: bold;">setq-default</span> bidi-display-reordering nil)

(<span style="font-weight: bold;">setq</span> next-screen-context-lines 2)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfc3c674" class="outline-4">
<h4 id="orgfc3c674">customize buffer</h4>
<div class="outline-text-4" id="text-orgfc3c674">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(custom-set-variables
 '(custom-file (expand-file-name <span style="font-style: italic;">"custom.el"</span> user-emacs-directory)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org10bb8dc" class="outline-4">
<h4 id="org10bb8dc">killing&#xa0;&#xa0;&#xa0;<span class="tag"><span class="kill">kill</span></span></h4>
<div class="outline-text-4" id="text-org10bb8dc">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(custom-set-variables '(yank-pop-change-selection t))

(use-package whole-line-or-region
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:config</span>
  (whole-line-or-region-global-mode 1))
</pre>
</div>
</div>
</div>

<div id="outline-container-org823566c" class="outline-4">
<h4 id="org823566c">mouse</h4>
<div class="outline-text-4" id="text-org823566c">
<p>
I prefer to rid my emacs experience of mouse as least as possible.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package mouse
  <span style="font-weight: bold;">:custom</span>
  (mouse-1-click-follows-link nil)
  (mouse-highlight nil)
  <span style="font-weight: bold;">:config</span>
  (mouse-wheel-mode 0))
</pre>
</div>
</div>
</div>

<div id="outline-container-org2fc87b0" class="outline-4">
<h4 id="org2fc87b0">email&#xa0;&#xa0;&#xa0;<span class="tag"><span class="crypt">crypt</span></span></h4>
<div class="outline-text-4" id="text-org2fc87b0">
<p>
&#x2013;&#x2014;BEGIN PGP MESSAGE&#x2013;&#x2014;
</p>

<p>
hQEMA9uWvE5LJ2ejAQgAr5AMxzAs2N2TZ/ULgiWI9OS1PQ3cR5OjlXy6statO/xh
G8x8yvioZV4aJORGOc9u9tkzO4gizLmHbX7BrwXExaICNoVgf6sw1xu9pvWAo4m7
J6cfKoBEuN0qYJ8K+/7H/JgvucZlYKLMxncoo5jDABbEjieXQBRQWar7xm9unHGs
r+b6tAD6LDdHFRwNTBorduF0nkP56on+zISt8BD+pXMyts3iYEUnyzGaGPxc17WL
msjgOcP1on34ymsCukOy0qDT2yI7+TF366aWuV+ppYBTgBFIwZ7xixm+AVYJLkIE
HPxzNDzb8OjVxt67qkrLzf4bxYubBfoAYeVak2t2p9LASQEuZeGIWVPxozDXtQbz
/mkstGWFiSdY20jSIC+aXe2CpekSyR0KQdB/r27wigMTx5IpSF9fKI6D63F0aIgW
w4cXPowPej2QbHxtWrj//Vn41VZgyk57626wtZbNnJ91OQe7h5IzLaYDVSFO9E4d
HeiXj/4G7POAoatTBd7DUWjSvsELqCrQvNHoSAorWuthwJ3Pz4UQrkGlvM1ljKiX
X6ZcttmYDN6lOUgHrrwW7nUBxm7qXRocRr9SVWz2+Qsg5/Hu18/gJ73J5xW4/Q9Y
/ZbVvSxVgtjLIgHXYiM2WnHDn35RlDfXB2RPDL7G7LUaYi1sX4KqwkdA6PWuUcdy
fDDHS5Vq5UvYutk=
=3/h5
&#x2013;&#x2014;END PGP MESSAGE&#x2013;&#x2014;
</p>
</div>
</div>

<div id="outline-container-org412328c" class="outline-4">
<h4 id="org412328c"><a href="https://github.com/skk-dev/ddskk/releases.atom">ddskk</a></h4>
<div class="outline-text-4" id="text-org412328c">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">skk-data-dir</span> (expand-file-name <span style="font-style: italic;">"~/var/lib/skk"</span>))

(use-package ddskk
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:defer</span> t
  <span style="font-weight: bold;">:bind</span> ((<span style="font-style: italic;">"C-x C-j"</span> . skk-mode)
         (<span style="font-style: italic;">"C-x j"</span> . skk-mode)
         (<span style="font-style: italic;">"C-c j"</span> . skk-mode))
  <span style="font-weight: bold;">:init</span>
  (<span style="font-weight: bold;">defface</span> <span style="font-weight: bold; font-style: italic;">skk-candidate</span> `((t . (<span style="font-weight: bold;">:font</span> <span style="font-style: italic;">"fontset-default"</span>
                                       <span style="font-weight: bold;">:height</span> ,(my-adjust-font-size 860))))
    <span style="font-style: italic;">"Default face for ddskk candidates."</span>
    <span style="font-weight: bold;">:group</span> 'skk-dcomp)
  <span style="font-weight: bold;">:custom</span>
  (default-input-method <span style="font-style: italic;">"japanese-skk"</span>)
  (skk-kakutei-key (kbd <span style="font-style: italic;">"C-m"</span>))
  (skk-user-directory (expand-file-name <span style="font-style: italic;">"ddskk"</span> user-emacs-directory))
  (skk-init-file <span style="font-style: italic;">"~/.emacs.d/lisp/ddskk/init.el"</span>)
  (skk-byte-compile-init-file t)
  (skk-tut-file
   (expand-file-name <span style="font-style: italic;">"etc/SKK.tut"</span> (straight--repos-dir <span style="font-style: italic;">"ddskk"</span>)))
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">cursor color</span>
  (skk-use-color-cursor t)
  (skk-cursor-hiragana-color <span style="font-style: italic;">"orange"</span>)
  (skk-cursor-katakana-color <span style="font-style: italic;">"SpringGreen3"</span>)
  (skk-cursor-latin-color <span style="font-style: italic;">"DodgerBlue3"</span>)
  (skk-cursor-jisx0201-color <span style="font-style: italic;">"purple3"</span>)
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">mode line string</span>
  (skk-latin-mode-string <span style="font-style: italic;">"A"</span>)
  (skk-hiragana-mode-string <span style="font-style: italic;">"&#12354;"</span>)
  (skk-katakana-mode-string <span style="font-style: italic;">"&#12450;"</span>)
  (skk-jisx0201-mode-string <span style="font-style: italic;">"&#65393;"</span>)
  (skk-jisx0208-latin-mode-string <span style="font-style: italic;">"&#65313;"</span>)
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">AZIK</span>
  (skk-use-azik t)
  (skk-azik-keyboard-type 'us101)
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">conversion</span>
  (skk-egg-like-newline t)
  (skk-henkan-strict-okuri-precedence t)
  (skk-check-okurigana-on-touroku t)
  (skk-show-annotation nil)
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">how candidates behave</span>
  (skk-show-candidates-always-pop-to-buffer t)
  (skk-henkan-number-to-display-candidates 10)
  (skk-show-candidates-nth-henkan-char 3)
  (skk-henkan-show-candidates-keys
   '(?1 ?2 ?3 ?4 ?5 ?6 ?7 ?8 ?9 ?0))
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">set face for candidates list</span>
  (skk-treat-candidate-appearance-function
   (<span style="font-weight: bold;">lambda</span> (candidate listing-p)
     (<span style="font-weight: bold;">cond</span>
      ((string-match <span style="font-style: italic;">";"</span> candidate)
       (put-text-property 0 (match-beginning 0)
                          'face 'skk-candidate
                          candidate)
       (put-text-property (match-beginning 0)
                          (length candidate) 'face 'shadow candidate))
      (t
       (put-text-property 0 (length candidate)
                          'face 'skk-candidate
                          candidate)))
     candidate))
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">bind C-q for hankaku-kana input mode</span>
  (skk-use-jisx0201-input-method t)
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">dynamic conversion</span>
  (skk-dcomp-activate nil)
  (skk-dcomp-multiple-activate nil)
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">config file</span>
  (skk-record-file (expand-file-name <span style="font-style: italic;">"record"</span> skk-data-dir))
  (skk-emacs-id-file (expand-file-name <span style="font-style: italic;">"emacs-id"</span> skk-data-dir))
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">jisyo</span>
  (skk-share-private-jisyo t)
  (skk-compare-jisyo-size-when-saving nil)
  (skk-save-jisyo-instantly t)
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">jisyo file/directory</span>
  (skk-jisyo (expand-file-name <span style="font-style: italic;">"jisyo"</span> skk-data-dir))
  (skk-backup-jisyo (expand-file-name <span style="font-style: italic;">"jisyo.bak"</span> skk-data-dir))
  (skk-large-jisyo (expand-file-name <span style="font-style: italic;">"large-jisyo"</span> skk-data-dir))
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">jisyo server</span>
  (skk-server-host <span style="font-style: italic;">"localhost"</span>)
  (skk-server-portnum 1178)
  (skk-server-inhibit-startup-server t)
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">study</span>
  (skk-study-file (expand-file-name <span style="font-style: italic;">"study"</span> skk-data-dir))
  (skk-study-backup-file (expand-file-name <span style="font-style: italic;">"study.bak"</span> skk-data-dir)))
</pre>
</div>
</div>

<ul class="org-ul">
<li><a id="org5d243a4"></a>skk-init-file<br />
<div class="outline-text-5" id="text-org5d243a4">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">-*- mode:emacs-lisp; -*-</span>
(<span style="font-weight: bold;">setq</span> skk-rom-kana-rule-list
      (append skk-rom-kana-rule-list
              '((<span style="font-style: italic;">"!"</span> nil skk-purge-from-jisyo)
                (<span style="font-style: italic;">"xka"</span> nil (<span style="font-style: italic;">"&#12533;"</span> . <span style="font-style: italic;">"&#12533;"</span>))
                (<span style="font-style: italic;">"xke"</span> nil (<span style="font-style: italic;">"&#12534;"</span> . <span style="font-style: italic;">"&#12534;"</span>))
                (<span style="font-style: italic;">"n"</span> nil nil)
                (<span style="font-style: italic;">"nn"</span> nil (<span style="font-style: italic;">"&#12490;&#12494;"</span> . <span style="font-style: italic;">"&#12394;&#12398;"</span>))
                (<span style="font-style: italic;">"nm"</span> nil (<span style="font-style: italic;">"&#12494;&#12511;"</span> . <span style="font-style: italic;">"&#12398;&#12415;"</span>))
                (<span style="font-style: italic;">"ks"</span> nil (<span style="font-style: italic;">"&#12467;&#12477;"</span> . <span style="font-style: italic;">"&#12371;&#12381;"</span>))
                (<span style="font-style: italic;">"kz"</span> nil (<span style="font-style: italic;">"&#12467;&#12494;"</span> . <span style="font-style: italic;">"&#12371;&#12398;"</span>))
                (<span style="font-style: italic;">"ym"</span> nil (<span style="font-style: italic;">"&#12516;&#12510;"</span> . <span style="font-style: italic;">"&#12420;&#12414;"</span>))
                (<span style="font-style: italic;">"yk"</span> nil (<span style="font-style: italic;">"&#12518;&#12461;"</span> . <span style="font-style: italic;">"&#12422;&#12365;"</span>))
                (<span style="font-style: italic;">"tga"</span> nil (<span style="font-style: italic;">"&#12479;&#12460;"</span> . <span style="font-style: italic;">"&#12383;&#12364;"</span>))
                (<span style="font-style: italic;">"vj"</span> nil (<span style="font-style: italic;">"&#12532;&#12531;"</span> . <span style="font-style: italic;">"&#12406;&#12435;"</span>))
                <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">followings are for preventing from changing to zenkaku eisu mode by pressing 'L'</span>
                (<span style="font-style: italic;">"bL"</span> nil (<span style="font-style: italic;">"&#12508;&#12531;"</span> . <span style="font-style: italic;">"&#12412;&#12435;"</span>))
                (<span style="font-style: italic;">"byL"</span> nil (<span style="font-style: italic;">"&#12499;&#12519;&#12531;"</span> . <span style="font-style: italic;">"&#12403;&#12423;&#12435;"</span>))
                (<span style="font-style: italic;">"cL"</span> nil (<span style="font-style: italic;">"&#12481;&#12519;&#12531;"</span> . <span style="font-style: italic;">"&#12385;&#12423;&#12435;"</span>))
                (<span style="font-style: italic;">"dL"</span> nil (<span style="font-style: italic;">"&#12489;&#12531;"</span> . <span style="font-style: italic;">"&#12393;&#12435;"</span>))
                (<span style="font-style: italic;">"fL"</span> nil (<span style="font-style: italic;">"&#12501;&#12457;&#12531;"</span> . <span style="font-style: italic;">"&#12405;&#12361;&#12435;"</span>))
                (<span style="font-style: italic;">"gL"</span> nil (<span style="font-style: italic;">"&#12468;&#12531;"</span> . <span style="font-style: italic;">"&#12372;&#12435;"</span>))
                (<span style="font-style: italic;">"gyL"</span> nil (<span style="font-style: italic;">"&#12462;&#12519;&#12531;"</span> . <span style="font-style: italic;">"&#12366;&#12423;&#12435;"</span>))
                (<span style="font-style: italic;">"hL"</span> nil (<span style="font-style: italic;">"&#12507;&#12531;"</span> . <span style="font-style: italic;">"&#12411;&#12435;"</span>))
                (<span style="font-style: italic;">"hgL"</span> nil (<span style="font-style: italic;">"&#12498;&#12519;&#12531;"</span> . <span style="font-style: italic;">"&#12402;&#12423;&#12435;"</span>))
                (<span style="font-style: italic;">"hyL"</span> nil (<span style="font-style: italic;">"&#12498;&#12519;&#12531;"</span> . <span style="font-style: italic;">"&#12402;&#12423;&#12435;"</span>))
                (<span style="font-style: italic;">"jL"</span> nil (<span style="font-style: italic;">"&#12472;&#12519;&#12531;"</span> . <span style="font-style: italic;">"&#12376;&#12423;&#12435;"</span>))
                (<span style="font-style: italic;">"kL"</span> nil (<span style="font-style: italic;">"&#12467;&#12531;"</span> . <span style="font-style: italic;">"&#12371;&#12435;"</span>))
                (<span style="font-style: italic;">"kgL"</span> nil (<span style="font-style: italic;">"&#12461;&#12519;&#12531;"</span> . <span style="font-style: italic;">"&#12365;&#12423;&#12435;"</span>))
                (<span style="font-style: italic;">"kyL"</span> nil (<span style="font-style: italic;">"&#12461;&#12519;&#12531;"</span> . <span style="font-style: italic;">"&#12365;&#12423;&#12435;"</span>))
                (<span style="font-style: italic;">"mL"</span> nil (<span style="font-style: italic;">"&#12514;&#12531;"</span> . <span style="font-style: italic;">"&#12418;&#12435;"</span>))
                (<span style="font-style: italic;">"mgL"</span> nil (<span style="font-style: italic;">"&#12511;&#12519;&#12531;"</span> . <span style="font-style: italic;">"&#12415;&#12423;&#12435;"</span>))
                (<span style="font-style: italic;">"myL"</span> nil (<span style="font-style: italic;">"&#12511;&#12519;&#12531;"</span> . <span style="font-style: italic;">"&#12415;&#12423;&#12435;"</span>))
                (<span style="font-style: italic;">"nL"</span> nil (<span style="font-style: italic;">"&#12494;&#12531;"</span> . <span style="font-style: italic;">"&#12398;&#12435;"</span>))
                (<span style="font-style: italic;">"ngL"</span> nil (<span style="font-style: italic;">"&#12491;&#12519;&#12531;"</span> . <span style="font-style: italic;">"&#12395;&#12423;&#12435;"</span>))
                (<span style="font-style: italic;">"nyL"</span> nil (<span style="font-style: italic;">"&#12491;&#12519;&#12531;"</span> . <span style="font-style: italic;">"&#12395;&#12423;&#12435;"</span>))
                (<span style="font-style: italic;">"pL"</span> nil (<span style="font-style: italic;">"&#12509;&#12531;"</span> . <span style="font-style: italic;">"&#12413;&#12435;"</span>))
                (<span style="font-style: italic;">"pgL"</span> nil (<span style="font-style: italic;">"&#12500;&#12519;&#12531;"</span> . <span style="font-style: italic;">"&#12404;&#12423;&#12435;"</span>))
                (<span style="font-style: italic;">"pyL"</span> nil (<span style="font-style: italic;">"&#12500;&#12519;&#12531;"</span> . <span style="font-style: italic;">"&#12404;&#12423;&#12435;"</span>))
                (<span style="font-style: italic;">"rL"</span> nil (<span style="font-style: italic;">"&#12525;&#12531;"</span> . <span style="font-style: italic;">"&#12429;&#12435;"</span>))
                (<span style="font-style: italic;">"ryL"</span> nil (<span style="font-style: italic;">"&#12522;&#12519;&#12531;"</span> . <span style="font-style: italic;">"&#12426;&#12423;&#12435;"</span>))
                (<span style="font-style: italic;">"sL"</span> nil (<span style="font-style: italic;">"&#12477;&#12531;"</span> . <span style="font-style: italic;">"&#12381;&#12435;"</span>))
                (<span style="font-style: italic;">"syL"</span> nil (<span style="font-style: italic;">"&#12471;&#12519;&#12531;"</span> . <span style="font-style: italic;">"&#12375;&#12423;&#12435;"</span>))
                (<span style="font-style: italic;">"tL"</span> nil (<span style="font-style: italic;">"&#12488;&#12531;"</span> . <span style="font-style: italic;">"&#12392;&#12435;"</span>))
                (<span style="font-style: italic;">"tyL"</span> nil (<span style="font-style: italic;">"&#12481;&#12519;&#12531;"</span> . <span style="font-style: italic;">"&#12385;&#12423;&#12435;"</span>))
                (<span style="font-style: italic;">"vL"</span> nil (<span style="font-style: italic;">"&#12532;&#12457;&#12531;"</span> . <span style="font-style: italic;">"&#12358;&#12443;&#12361;&#12435;"</span>))
                (<span style="font-style: italic;">"wL"</span> nil (<span style="font-style: italic;">"&#12454;&#12457;&#12531;"</span> . <span style="font-style: italic;">"&#12358;&#12361;&#12435;"</span>))
                (<span style="font-style: italic;">"xL"</span> nil (<span style="font-style: italic;">"&#12471;&#12519;&#12531;"</span> . <span style="font-style: italic;">"&#12375;&#12423;&#12435;"</span>))
                (<span style="font-style: italic;">"xxL"</span> nil (<span style="font-style: italic;">"&#8594;"</span> . <span style="font-style: italic;">"&#8594;"</span>))
                (<span style="font-style: italic;">"yL"</span> nil (<span style="font-style: italic;">"&#12520;&#12531;"</span> . <span style="font-style: italic;">"&#12424;&#12435;"</span>))
                (<span style="font-style: italic;">"zL"</span> nil (<span style="font-style: italic;">"&#12478;&#12531;"</span> . <span style="font-style: italic;">"&#12382;&#12435;"</span>))
                (<span style="font-style: italic;">"zyL"</span> nil (<span style="font-style: italic;">"&#12472;&#12519;&#12531;"</span> . <span style="font-style: italic;">"&#12376;&#12423;&#12435;"</span>)))))

(add-hook 'skk-azik-load-hook
          (<span style="font-weight: bold;">lambda</span> ()
            (<span style="font-weight: bold;">dolist</span> (key '(<span style="font-style: italic;">"kA"</span> <span style="font-style: italic;">"kE"</span> <span style="font-style: italic;">"tU"</span> <span style="font-style: italic;">"wA"</span>))
              (<span style="font-weight: bold;">setq</span> skk-rom-kana-rule-list
                    (skk-del-alist key skk-rom-kana-rule-list)))))
</pre>
</div>
</div>
</li>
</ul>
</div>

<div id="outline-container-org657fa14" class="outline-4">
<h4 id="org657fa14">fundamental key bindings</h4>
<div class="outline-text-4" id="text-org657fa14">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">to be capable of distinguishing TAB and C-i</span>
(<span style="font-weight: bold;">setq</span> local-function-key-map (delq '(kp-tab . [9]) local-function-key-map))

(substitute-key-definition 'upcase-region
                           'upcase-dwim
                           global-map)
(substitute-key-definition 'downcase-region
                           'downcase-dwim
                           global-map)
(global-set-key (kbd <span style="font-style: italic;">"C-x C-c"</span>) #'capitalize-dwim)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">suppress prompting in (up/down)case-region</span>
(put 'upcase-region 'disabled nil)
(put 'downcase-region 'disabled nil)

(global-set-key (kbd <span style="font-style: italic;">"C-j"</span>) 'newline)
(global-set-key (kbd <span style="font-style: italic;">"C-M-o"</span>) 'open-line)
(global-set-key (kbd <span style="font-style: italic;">"C-h"</span>) 'backward-delete-char-untabify)
(global-set-key (kbd <span style="font-style: italic;">"M-h"</span>) 'backward-kill-word)
(global-set-key (kbd <span style="font-style: italic;">"M-SPC"</span>) 'cycle-spacing)
(global-set-key (kbd <span style="font-style: italic;">"C-c k"</span>) 'kill-this-buffer)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgcea2844" class="outline-3">
<h3 id="orgcea2844">built-in features</h3>
<div class="outline-text-3" id="text-orgcea2844">
</div>
<div id="outline-container-org58ff64c" class="outline-4">
<h4 id="org58ff64c">Auto Revert</h4>
<div class="outline-text-4" id="text-org58ff64c">
<p>
<a href="https://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Auto-Revert">Auto Revert</a>: Keeping buffers automatically up-to-date.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package autorevert
  <span style="font-weight: bold;">:diminish</span> (global-auto-revert-mode auto-revert-mode)
  <span style="font-weight: bold;">:custom</span>
  (auto-revert-verbose nil)
  (global-auto-revert-non-file-buffers t)
  <span style="font-weight: bold;">:config</span>
  (global-auto-revert-mode 1))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf49f527" class="outline-4">
<h4 id="orgf49f527">Abbrev</h4>
<div class="outline-text-4" id="text-orgf49f527">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package abbrev
  <span style="font-weight: bold;">:diminish</span> abbrev-mode
  <span style="font-weight: bold;">:custom</span>
  (save-abbrevs t)
  <span style="font-weight: bold;">:config</span>
  (<span style="font-weight: bold;">setf</span> abbrev-file-name (expand-file-name <span style="font-style: italic;">"abbrev_defs"</span> user-emacs-directory))
  (quietly-read-abbrev-file))
</pre>
</div>
</div>
</div>

<div id="outline-container-org1f68c86" class="outline-4">
<h4 id="org1f68c86">EasyPG (epg)</h4>
<div class="outline-text-4" id="text-org1f68c86">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package epg
  <span style="font-weight: bold;">:custom</span>
  (epg-pinentry-mode 'loopback))
</pre>
</div>
</div>
</div>

<div id="outline-container-org68ea723" class="outline-4">
<h4 id="org68ea723">auth-source</h4>
<div class="outline-text-4" id="text-org68ea723">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package auth-source
  <span style="font-weight: bold;">:custom</span>
  (auth-source-gpg-encrypt-to `(,user-mail-address))
  <span style="font-weight: bold;">:config</span>
  (add-to-list 'auth-sources <span style="font-style: italic;">"~/.netrc.gpg"</span>))

(use-package auth-source-pass
  <span style="font-weight: bold;">:config</span>
  (auth-source-pass-enable))
</pre>
</div>
</div>
</div>

<div id="outline-container-org29723d0" class="outline-4">
<h4 id="org29723d0">whitespace</h4>
<div class="outline-text-4" id="text-org29723d0">
<p>
<a href="https://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Useless-Whitespace">emacs#Useless Whitespace</a>
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package whitespace
  <span style="font-weight: bold;">:diminish</span> ((global-whitespace-mode . <span style="font-style: italic;">"Ws"</span>)
             (whitespace-mode . <span style="font-style: italic;">"ws"</span>))
  <span style="font-weight: bold;">:hook</span>
  ((org-mode prog-mode dired-mode) . whitespace-mode)
  (eww-mode . whitespace-turn-off)
  (before-save . delete-trailing-whitespace)
  <span style="font-weight: bold;">:custom</span>
  (whitespace-style
   '(face trailing tabs tab-mark spaces space-mark empty))
  (whitespace-space-regexp <span style="font-style: italic;">"</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">(</span><span style="font-style: italic;">\x3000+</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">)</span><span style="font-style: italic;">"</span>)
  (whitespace-trailing-regexp <span style="font-style: italic;">"</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">(</span><span style="font-style: italic;">[ \t\u00A0]+</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">)</span><span style="font-style: italic;">$"</span>)
  (whitespace-display-mappings
   '((space-mark ?\x3000 [?\u2423])
     (tab-mark   ?\t   [?\u00BB ?\t])))
  <span style="font-weight: bold;">:config</span>
  (global-whitespace-mode -1))
</pre>
</div>
</div>
</div>

<div id="outline-container-org3497416" class="outline-4">
<h4 id="org3497416">hippie-exp</h4>
<div class="outline-text-4" id="text-org3497416">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package hippie-exp
  <span style="font-weight: bold;">:bind</span> (<span style="font-style: italic;">"M-/"</span> . hippie-expand)
  <span style="font-weight: bold;">:custom</span>
  (hippie-expand-try-functions-list
   '(try-complete-file-name-partially
     try-complete-file-name
     try-expand-dabbrev
     try-expand-dabbrev-all-buffers
     try-expand-dabbrev-from-kill
     try-complete-lisp-symbol-partially
     try-complete-lisp-symbol)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org62b010c" class="outline-4">
<h4 id="org62b010c">bookmark</h4>
<div class="outline-text-4" id="text-org62b010c">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package bookmark
  <span style="font-weight: bold;">:bind</span> (<span style="font-style: italic;">"C-c b"</span> . bookmark-jump)
  <span style="font-weight: bold;">:custom</span>
  (bookmark-watch-bookmark-file 'silent)
  <span style="font-weight: bold;">:config</span>
  (delight 'bookmark-bmenu-mode <span style="font-style: italic;">" BB"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-org617eb6e" class="outline-4">
<h4 id="org617eb6e">find-dired</h4>
<div class="outline-text-4" id="text-org617eb6e">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package find-dired
  <span style="font-weight: bold;">:custom</span>
  (find-grep-options <span style="font-style: italic;">"-n -H --no-heading -q"</span>)
  (find-ls-option '(<span style="font-style: italic;">"-print0 | xargs -0 ls -ldN"</span> . <span style="font-style: italic;">"-ldN"</span>)))

(<span style="font-weight: bold;">with-eval-after-load</span> 'hydra
  (defhydra hydra-find-dired (global-map <span style="font-style: italic;">"M-s d"</span>
                                         <span style="font-weight: bold;">:color</span> teal)
    <span style="font-style: italic;">"find dired"</span>
    (<span style="font-style: italic;">"f"</span> find-dired)
    (<span style="font-style: italic;">"F"</span> find-lisp-find-dired)
    (<span style="font-style: italic;">"g"</span> find-grep-dired)
    (<span style="font-style: italic;">"n"</span> find-name-dired)
    (<span style="font-style: italic;">"d"</span> find-lisp-find-dired-subdirectories)
    (<span style="font-style: italic;">"q"</span> nil <span style="font-style: italic;">"quit"</span>)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org16092a7" class="outline-4">
<h4 id="org16092a7">hideshow</h4>
<div class="outline-text-4" id="text-org16092a7">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package hideshow
  <span style="font-weight: bold;">:diminish</span> <span style="font-style: italic;">"hs"</span>
  <span style="font-weight: bold;">:bind</span> ((<span style="font-style: italic;">"C-c TAB"</span> . hs-toggle-hiding)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org61ff3c4" class="outline-4">
<h4 id="org61ff3c4">uniquify</h4>
<div class="outline-text-4" id="text-org61ff3c4">
<p>
<a href="https://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Uniquify">Uniquify</a> makes buffer names unique.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package uniquify
  <span style="font-weight: bold;">:custom</span>
  (uniquify-buffer-name-style 'forward)
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(uniquify-ignore-buffers-re "*[</span><span style="font-weight: bold; font-style: italic;">^</span><span style="font-weight: bold; font-style: italic;">*]+*")</span>
  )
</pre>
</div>
</div>
</div>
<div id="outline-container-org6004aaa" class="outline-4">
<h4 id="org6004aaa">recentf</h4>
<div class="outline-text-4" id="text-org6004aaa">
<p>
<a href="https://www.gnu.org/software/emacs/manual/html_mono/emacs.html#File-Conveniences">emacs#File Conveniences</a>
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package recentf
  <span style="font-weight: bold;">:custom</span>
  (recentf-exclude '(<span style="font-style: italic;">".gz"</span> <span style="font-style: italic;">".xz"</span> <span style="font-style: italic;">".zip"</span>))
  (recentf-max-saved-items 200)
  (recentf-max-menu-items 15)
  (recentf-auto-cleanup <span style="font-style: italic;">"1:23am"</span>)
  <span style="font-weight: bold;">:config</span>
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(recentf-load-list)</span>
  (recentf-mode 1))
</pre>
</div>
</div>
</div>
<div id="outline-container-org10cb4c6" class="outline-4">
<h4 id="org10cb4c6">server</h4>
<div class="outline-text-4" id="text-org10cb4c6">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package server
  <span style="font-weight: bold;">:config</span>
  (<span style="font-weight: bold;">unless</span> (server-running-p)
    (server-start)))
</pre>
</div>
</div>
</div>
<div id="outline-container-orga36c364" class="outline-4">
<h4 id="orga36c364">calc</h4>
<div class="outline-text-4" id="text-orga36c364">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package calc
  <span style="font-weight: bold;">:bind</span> ((<span style="font-style: italic;">"&lt;f5&gt;"</span> . calc))
  <span style="font-weight: bold;">:config</span>
  (<span style="font-weight: bold;">setf</span> calc-display-trail nil))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgf9b1b87" class="outline-4">
<h4 id="orgf9b1b87">calendar</h4>
<div class="outline-text-4" id="text-orgf9b1b87">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package calendar
  <span style="font-weight: bold;">:commands</span> calendar
  <span style="font-weight: bold;">:config</span>
  (bind-keys <span style="font-weight: bold;">:map</span> calendar-mode-map
             (<span style="font-style: italic;">"v"</span> . my/calendar-show-items)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org5f01af6" class="outline-4">
<h4 id="org5f01af6">proced</h4>
<div class="outline-text-4" id="text-org5f01af6">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package proced
  <span style="font-weight: bold;">:no-require</span> t
  <span style="font-weight: bold;">:custom</span>
  (proced-auto-update-flag t)
  (proced-auto-update-interval 3))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgedbc537" class="outline-4">
<h4 id="orgedbc537">vc (version control)&#xa0;&#xa0;&#xa0;<span class="tag"><span class="maintaining">maintaining</span></span></h4>
<div class="outline-text-4" id="text-orgedbc537">
</div>
<ul class="org-ul">
<li><a id="orgf03a741"></a>ediff<br />
<div class="outline-text-5" id="text-orgf03a741">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package ediff
  <span style="font-weight: bold;">:commands</span> ediff-files
  <span style="font-weight: bold;">:custom</span>
  (ediff-window-setup-function 'ediff-setup-windows-default)
  (ediff-split-window-function 'split-window-horizontally))
</pre>
</div>
</div>
</li>
<li><a id="org490d089"></a>vc-hooks<br />
<div class="outline-text-5" id="text-org490d089">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package vc-hooks
  <span style="font-weight: bold;">:custom</span>
  (vc-follow-symlinks t))
</pre>
</div>
</div>
</li>
</ul>
</div>
<div id="outline-container-org0f23dce" class="outline-4">
<h4 id="org0f23dce">re-builder</h4>
<div class="outline-text-4" id="text-org0f23dce">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package re-builder
  <span style="font-weight: bold;">:custom</span>
  (reb-re-syntax 'string))
</pre>
</div>
</div>
</div>
<div id="outline-container-org66fc930" class="outline-4">
<h4 id="org66fc930">isearch</h4>
<div class="outline-text-4" id="text-org66fc930">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package isearch
  <span style="font-weight: bold;">:diminish</span> <span style="font-style: italic;">"is"</span>
  <span style="font-weight: bold;">:config</span>
  (bind-keys <span style="font-weight: bold;">:map</span> isearch-mode-map
             (<span style="font-style: italic;">"C-j"</span> . isearch-exit)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org6a94292" class="outline-4">
<h4 id="org6a94292">imenu&#xa0;&#xa0;&#xa0;<span class="tag"><span class="programs">programs</span></span></h4>
<div class="outline-text-4" id="text-org6a94292">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package imenu
  <span style="font-weight: bold;">:custom</span>
  (imenu-auto-rescan t))
</pre>
</div>
</div>
</div>
<div id="outline-container-org6c39c57" class="outline-4">
<h4 id="org6c39c57">flyspell&#xa0;&#xa0;&#xa0;<span class="tag"><span class="fixit">fixit</span></span></h4>
<div class="outline-text-4" id="text-org6c39c57">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package flyspell
  <span style="font-weight: bold;">:diminish</span> <span style="font-style: italic;">"fs"</span>
  <span style="font-weight: bold;">:if</span> (executable-find <span style="font-style: italic;">"aspell"</span>)
  <span style="font-weight: bold;">:after</span> (hydra)
  <span style="font-weight: bold;">:custom</span>
  (ispell-program-name <span style="font-style: italic;">"aspell"</span>)
  (flyspell-issue-message-flag nil)
  <span style="font-weight: bold;">:config</span>
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">avoid checking for Japanese characters</span>
  (add-to-list 'ispell-skip-region-alist '(<span style="font-style: italic;">"[</span><span style="font-style: italic;">^</span><span style="font-style: italic;">\000-\377]+"</span>))
  (<span style="font-weight: bold;">setq-default</span> ispell-extra-args '(<span style="font-style: italic;">"--sug-mode=ultra"</span>
                                    <span style="font-style: italic;">"--lang=en_US"</span>))
  (<span style="font-weight: bold;">when</span> (string-match-p <span style="font-style: italic;">"--camel-case"</span>
                        (shell-command-to-string (concat ispell-program-name <span style="font-style: italic;">" --help"</span>)))
    (<span style="font-weight: bold;">push</span> <span style="font-style: italic;">"--camel-case"</span> ispell-extra-args))
  (bind-keys <span style="font-weight: bold;">:map</span> flyspell-mode-map
             (<span style="font-style: italic;">"C-,"</span>   . nil)
             (<span style="font-style: italic;">"C-."</span>   . nil)
             (<span style="font-style: italic;">"C-;"</span>   . nil)
             (<span style="font-style: italic;">"C-c $"</span> . nil)
             (<span style="font-style: italic;">"C-M-i"</span> . nil))
  (defhydra hydra-flyspell (flyspell-mode-map <span style="font-style: italic;">"C-c $"</span>
                                              <span style="font-weight: bold;">:color</span> red)
    <span style="font-style: italic;">"Flyspell"</span>
    (<span style="font-style: italic;">"c"</span> flyspell-buffer)
    (<span style="font-style: italic;">"n"</span> flyspell-goto-next-error)
    (<span style="font-style: italic;">"."</span> flyspell-auto-correct-word)
    (<span style="font-style: italic;">"q"</span> nil <span style="font-style: italic;">"quit"</span>)))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgdffa154" class="outline-4">
<h4 id="orgdffa154"><a id="ID-a55da7a2-6525-4788-ba56-085eb61928d4"></a>help&#xa0;&#xa0;&#xa0;<span class="tag"><span class="help">help</span></span></h4>
<div class="outline-text-4" id="text-orgdffa154">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package help-mode
  <span style="font-weight: bold;">:delight</span> <span style="font-style: italic;">" HE"</span>
  <span style="font-weight: bold;">:config</span>
  (bind-key <span style="font-style: italic;">"C-M-h"</span> help-map)
  (bind-keys <span style="font-weight: bold;">:map</span> help-map
             (<span style="font-style: italic;">"C-h"</span> . nil) <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">for which-key</span>
             (<span style="font-style: italic;">"c"</span> . describe-face)
             (<span style="font-style: italic;">"C-l"</span> . find-library)
             <span style="font-weight: bold;">:map</span> help-mode-map
             (<span style="font-style: italic;">"f"</span> . scroll-up-line)
             (<span style="font-style: italic;">"e"</span> . scroll-down-line)
             (<span style="font-style: italic;">"SPC"</span> . my/forward-paragraph)
             (<span style="font-style: italic;">"E"</span> . my/backward-paragraph)
             (<span style="font-style: italic;">"2"</span> . backward-button)
             (<span style="font-style: italic;">"3"</span> . forward-button)
             (<span style="font-style: italic;">"4"</span> . push-button)))
</pre>
</div>
</div>
</div>
<div id="outline-container-org5971fc3" class="outline-4">
<h4 id="org5971fc3">info&#xa0;&#xa0;&#xa0;<span class="tag"><span class="help">help</span></span></h4>
<div class="outline-text-4" id="text-org5971fc3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package Info
  <span style="font-weight: bold;">:defer</span> t
  <span style="font-weight: bold;">:bind</span> (<span style="font-weight: bold;">:map</span> Info-mode-map
              (<span style="font-style: italic;">"C-j"</span> . Info-follow-nearest-node)
              (<span style="font-style: italic;">"C-c C-o"</span> . Info-follow-nearest-node)
              (<span style="font-style: italic;">"a"</span>   . info-apropos)
              <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">lazy control</span>
              (<span style="font-style: italic;">"f"</span> . scroll-up-line)
              (<span style="font-style: italic;">"e"</span> . scroll-down-line)
              (<span style="font-style: italic;">"SPC"</span> . my/forward-paragraph)
              (<span style="font-style: italic;">"E"</span> . my/backward-paragraph)
              (<span style="font-style: italic;">"1"</span> . Info-history-back)
              (<span style="font-style: italic;">"2"</span> . Info-prev-reference)
              (<span style="font-style: italic;">"3"</span> . Info-next-reference)
              (<span style="font-style: italic;">"4"</span> . Info-follow-nearest-node)
              (<span style="font-style: italic;">"5"</span> . Info-history-forward))
  <span style="font-weight: bold;">:custom</span>
  (Info-use-header-line nil)
  <span style="font-weight: bold;">:config</span>
  (<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">info-look</span>)
  (autoload 'info-lookup-add-help <span style="font-style: italic;">"info-look"</span>))
</pre>
</div>
</div>
</div>
<div id="outline-container-org0a0274e" class="outline-4">
<h4 id="org0a0274e">tramp</h4>
<div class="outline-text-4" id="text-org0a0274e">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package tramp
  <span style="font-weight: bold;">:defer</span> t
  <span style="font-weight: bold;">:custom</span>
  (tramp-default-method <span style="font-style: italic;">"ssh"</span>)
  <span style="font-weight: bold;">:config</span>
  (add-to-list 'tramp-remote-path 'tramp-own-remote-path)
  (add-to-list 'tramp-remote-path <span style="font-style: italic;">"~/bin"</span>))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">sudo</span> ()
  <span style="font-style: italic;">"Use TRAMP to `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">sudo</span><span style="font-style: italic;">' the current buffer"</span>
  (<span style="font-weight: bold;">interactive</span>)
  (<span style="font-weight: bold;">when</span> buffer-file-name
    (find-alternate-file
     (concat <span style="font-style: italic;">"/sudo:root@localhost:"</span>
             buffer-file-name))))
</pre>
</div>
</div>
</div>

<div id="outline-container-org2093dca" class="outline-4">
<h4 id="org2093dca">view</h4>
<div class="outline-text-4" id="text-org2093dca">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package view
  <span style="font-weight: bold;">:diminish</span> view-mode <span style="font-style: italic;">"vw"</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-org1046f64" class="outline-4">
<h4 id="org1046f64">woman&#xa0;&#xa0;&#xa0;<span class="tag"><span class="programs">programs</span></span></h4>
<div class="outline-text-4" id="text-org1046f64">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package woman
  <span style="font-weight: bold;">:defer</span> t
  <span style="font-weight: bold;">:delight</span> <span style="font-style: italic;">" WM"</span>
  <span style="font-weight: bold;">:config</span>
  (bind-keys <span style="font-weight: bold;">:map</span> woman-mode-map
             (<span style="font-style: italic;">"f"</span> . scroll-up-line)
             (<span style="font-style: italic;">"e"</span> . scroll-down-line)
             (<span style="font-style: italic;">"SPC"</span> . my/forward-paragraph)
             (<span style="font-style: italic;">"E"</span> . my/backward-paragraph)
             (<span style="font-style: italic;">"2"</span> . backward-button)
             (<span style="font-style: italic;">"3"</span> . forward-button)
             (<span style="font-style: italic;">"4"</span> . push-button)))
</pre>
</div>
</div>
</div>
<div id="outline-container-org19180aa" class="outline-4">
<h4 id="org19180aa">executable</h4>
<div class="outline-text-4" id="text-org19180aa">
<p>
This customization is based on <a href="https://emacsredux.com/blog/2021/09/29/make-script-files-executable-automatically/">this advice</a>
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package executable
  <span style="font-weight: bold;">:hook</span> (after-save
         . executable-make-buffer-file-executable-if-script-p))
</pre>
</div>
</div>
</div>
<div id="outline-container-org0fcbc9a" class="outline-4">
<h4 id="org0fcbc9a">paren</h4>
<div class="outline-text-4" id="text-org0fcbc9a">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package paren
  <span style="font-weight: bold;">:custom</span>
  (show-paren-style 'parenthesis)
  (show-paren-delay 0.25)
  <span style="font-weight: bold;">:config</span>
  (show-paren-mode -1))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgd84f9a8" class="outline-3">
<h3 id="orgd84f9a8">EWW</h3>
<div class="outline-text-3" id="text-orgd84f9a8">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package eww
  <span style="font-weight: bold;">:delight</span> <span style="font-style: italic;">" EW"</span>
  <span style="font-weight: bold;">:hook</span>
  (eww-after-render . my/eww-rename-buffer)
  <span style="font-weight: bold;">:custom</span>
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">set enough large column number to prevent from inserting line break</span>
  (shr-width 10000)
  (shr-use-fonts nil)
  (shr-image-animate t)
  (eww-header-line-format nil)
  (shr-max-image-proportion 0.4)
  <span style="font-weight: bold;">:config</span>
  (bind-keys <span style="font-weight: bold;">:map</span> eww-mode-map
             (<span style="font-style: italic;">"f"</span> . scroll-up-line)
             (<span style="font-style: italic;">"e"</span> . scroll-down-line)
             (<span style="font-style: italic;">"SPC"</span> . my/forward-paragraph)
             (<span style="font-style: italic;">"E"</span> . my/backward-paragraph)
             (<span style="font-style: italic;">"C"</span> . eww-set-character-encoding)
             (<span style="font-style: italic;">"1"</span> . eww-back-url)
             (<span style="font-style: italic;">"2"</span> . shr-next-link)
             (<span style="font-style: italic;">"4"</span> . eww-follow-link)
             (<span style="font-style: italic;">"C-j"</span> . eww-follow-link)
             (<span style="font-style: italic;">"T"</span> . eww-goto-title-heading)
             (<span style="font-style: italic;">"L"</span> . my/eww-goto-heading)
             (<span style="font-style: italic;">"O"</span> . my/eww-convert-to-org)
             <span style="font-weight: bold;">:map</span> eww-bookmark-mode-map
             (<span style="font-style: italic;">"C-j"</span> . eww-bookmark-browse)))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/eww-rename-buffer</span> ()
  <span style="font-style: italic;">"Rename the name of current EWW buffer.</span>

<span style="font-style: italic;">If associated HTML file have a title tag, use title as a buffer name.</span>
<span style="font-style: italic;">Otherwise, use a current URL."</span>
  (<span style="font-weight: bold;">let</span> ((title (plist-get eww-data <span style="font-weight: bold;">:title</span>))
        (url (file-name-base (eww-current-url))))
    (rename-buffer (format <span style="font-style: italic;">"eww: %s"</span> (<span style="font-weight: bold;">or</span> (<span style="font-weight: bold;">if</span> (<span style="font-weight: bold;">and</span> title (&gt; (length title) 0))
                                             title nil)
                                         url <span style="font-style: italic;">""</span>)) <span style="font-weight: bold;">t)))</span>

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/eww-convert-to-org</span> ()
  <span style="font-style: italic;">"Convert current html page into one org file and show it.</span>

<span style="font-style: italic;">This is handy if you would like to check a page index comfortably."</span>
  (<span style="font-weight: bold;">interactive</span>)
  (<span style="font-weight: bold;">let</span> ((source (plist-get eww-data <span style="font-weight: bold;">:source</span>))
        (src-html (make-temp-file <span style="font-style: italic;">"source-"</span>))
        (dst-org (expand-file-name (format <span style="font-style: italic;">"%s.org"</span> (org-id-uuid)) <span style="font-style: italic;">"~/var/tmp/eww"</span>))
        (coding-system-for-write 'utf-8-unix)
        (org-startup-folded t))
    (<span style="font-weight: bold;">with-temp-buffer</span>
      (insert source)
      (write-region (point-min) (point-max) src-html nil)
      (call-process-shell-command (format <span style="font-style: italic;">"pandoc %s -f html -t org -o %s"</span>
                                          (shell-quote-argument src-html)
                                          (shell-quote-argument dst-org)))
      (delete-file src-html))
    (find-file dst-org t)
    (goto-char (point-min))
    (org-ctrl-c-tab)))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">eww-headings-dom</span> ()
  <span style="font-style: italic;">"Return heading list as a dom from xml."</span>
  (<span style="font-weight: bold;">let</span> ((source (plist-get eww-data <span style="font-weight: bold;">:source</span>))
        (dom nil))
    (<span style="font-weight: bold;">with-temp-buffer</span>
      (<span style="font-weight: bold;">let</span> ((source-file (make-temp-file <span style="font-style: italic;">"source-"</span>))
            (coding-system-for-write 'utf-8-unix))
        (insert source)
        (write-region (point-min) (point-max) source-file nil)
        (erase-buffer)
        (call-process <span style="font-style: italic;">"extract_headings"</span> source-file t)
        (delete-file source-file)
        (libxml-parse-xml-region (point-min) (point-max))))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">eww-goto-title-heading</span> ()
  <span style="font-style: italic;">"Set point to a line which contaings the possible heading."</span>
  (<span style="font-weight: bold;">interactive</span>)
  (when-let* ((headings-dom (eww-headings-dom))
              (possible-heading (cl-reduce (<span style="font-weight: bold;">lambda</span> (node-a node-b)
                                             (<span style="font-weight: bold;">if</span> (not (<span style="font-weight: bold;">bound-and-true-p</span> node-a))
                                                 (<span style="font-weight: bold;">if</span> (not (<span style="font-weight: bold;">bound-and-true-p</span> node-b))
                                                     nil
                                                   node-b)
                                               (<span style="font-weight: bold;">if</span> (&gt;= (string-to-number (<span style="font-weight: bold;">dom-attr</span> node-a 'proximity))
                                                       (string-to-number (<span style="font-weight: bold;">dom-attr</span> node-b 'proximity)))
                                                   node-a node-b)))
                                           (dom-children headings-dom)
                                           <span style="font-weight: bold;">:initial-value</span> nil))
              (possible-text (dom-text possible-heading))
              (match-pos (<span style="font-weight: bold;">or</span> (re-search-forward (format <span style="font-style: italic;">"^*?[[:blank:]]*%s[[:blank:]]*$"</span> (regexp-quote possible-text)) nil t 1)
                             (re-search-backward (format <span style="font-style: italic;">"^*?[[:blank:]]*%s[[:blank:]]*$"</span> (regexp-quote possible-text)) nil t 1))))
    (beginning-of-line)
    (recenter-top-bottom 0)))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/eww-goto-heading</span> ()
  <span style="font-style: italic;">"Go to selected heading line."</span>
  (<span style="font-weight: bold;">interactive</span>)
  (<span style="font-weight: bold;">setq</span> lexical-binding t)
  (when-let* ((headings-root (eww-headings-dom))
              (cur-buf (current-buffer))
              (heading (completing-read
                        <span style="font-style: italic;">"Heading : "</span>
                        (mapcar (<span style="font-weight: bold;">lambda</span> (heading-node)
                                  (when-let* ((heading (dom-text heading-node))
                                              (tag (symbol-name (dom-tag heading-node)))
                                              (match-pos (string-match <span style="font-style: italic;">"h</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">(</span><span style="font-style: italic;">[1-6]\\{1\\}</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">)</span><span style="font-style: italic;">"</span> tag))
                                              (indent (- (string-to-number (match-string 1 tag)) 1)))
                                    (format <span style="font-style: italic;">"%s%s"</span>
                                            (apply 'concat (make-list indent <span style="font-style: italic;">"  "</span>))
                                            heading)))
                                (dom-children headings-root))))
              (match (string-match <span style="font-style: italic;">"</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">(?:</span><span style="font-style: italic;">  </span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">)</span><span style="font-style: italic;">*</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">(</span><span style="font-style: italic;">.*</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">)</span><span style="font-style: italic;">"</span> heading))
              (heading (match-string 1 heading))
              (match-pos (<span style="font-weight: bold;">or</span> (re-search-forward (build-regex heading) nil t 1)
                             (re-search-backward (build-regex heading) nil t 1))))
    (<span style="font-weight: bold;">with-current-buffer</span> cur-buf
      (switch-to-buffer cur-buf)
      (beginning-of-line)
      (recenter-top-bottom 0))))

(<span style="font-weight: bold;">defmacro</span> <span style="font-weight: bold;">build-regex</span> (str)
  <span style="font-style: italic;">"Return a regexp representation for `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">STR</span><span style="font-style: italic;">'."</span>
  `(format <span style="font-style: italic;">"^[[:blank:]SVG Image]*%s[[:blank:]]*$"</span>
           ,str))
</pre>
</div>
</div>

<div id="outline-container-org0ba6920" class="outline-4">
<h4 id="org0ba6920">extract<sub>headings</sub></h4>
<div class="outline-text-4" id="text-org0ba6920">
<div class="org-src-container">
<pre class="src src-python"><span style="font-weight: bold; font-style: italic;">#</span><span style="font-weight: bold; font-style: italic;">!/usr/bin/env python3</span>

<span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">This script extract most probable page heading.</span>

<span style="font-weight: bold;">import</span> sys
<span style="font-weight: bold;">import</span> lxml.html <span style="font-weight: bold;">as</span> html
<span style="font-weight: bold;">from</span> lxml <span style="font-weight: bold;">import</span> etree
<span style="font-weight: bold;">import</span> difflib

<span style="font-weight: bold;">if</span> <span style="font-weight: bold;">len</span>(sys.argv) == 1:
    <span style="font-weight: bold; font-style: italic;">INPUT_STR</span> = sys.stdin.read()
    <span style="font-weight: bold; font-style: italic;">ROOT</span> = html.fromstring(INPUT_STR).getroottree()
<span style="font-weight: bold;">else</span>:
    sys.<span style="font-weight: bold; text-decoration: underline;">exit</span>(1)

<span style="font-weight: bold; font-style: italic;">OUT_ROOT</span> = etree.Element(<span style="font-style: italic;">"headings"</span>)

<span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">extract title text</span>
<span style="font-weight: bold; font-style: italic;">title</span> = <span style="font-style: italic;">''</span>
<span style="font-weight: bold; font-style: italic;">title_text_arr</span> = ROOT.xpath(<span style="font-style: italic;">'//title[1]//text()'</span>)
<span style="font-weight: bold;">if</span> <span style="font-weight: bold;">len</span>(title_text_arr):
    <span style="font-weight: bold; font-style: italic;">title</span> = title_text_arr[0]
    OUT_ROOT.<span style="font-weight: bold;">set</span>(<span style="font-style: italic;">"title"</span>, title.strip())

<span style="font-weight: bold; font-style: italic;">htag_text_arr</span> = ROOT.xpath(<span style="font-style: italic;">'//*[self::h1 or self::h2 or self::h3 or self::h4 or self::h5 or self::h6]'</span>)
<span style="font-weight: bold;">for</span> i <span style="font-weight: bold;">in</span> <span style="font-weight: bold;">range</span>(<span style="font-weight: bold;">len</span>(htag_text_arr)):
    <span style="font-weight: bold; font-style: italic;">text</span> = <span style="font-style: italic;">''</span>
    <span style="font-weight: bold; font-style: italic;">texts</span> = htag_text_arr[i].xpath(<span style="font-style: italic;">'.//text()'</span>)
    <span style="font-weight: bold;">if</span> <span style="font-weight: bold;">len</span>(texts) == 1:
        <span style="font-weight: bold; font-style: italic;">text</span> = texts[0].strip()
    <span style="font-weight: bold;">elif</span> <span style="font-weight: bold;">len</span>(texts) &gt; 1:
        <span style="font-weight: bold; font-style: italic;">text</span> = <span style="font-style: italic;">''</span>.join(<span style="font-weight: bold;">map</span>(<span style="font-weight: bold;">str</span>.strip, texts))
    <span style="font-weight: bold;">else</span>:
        <span style="font-weight: bold;">continue</span>
    <span style="font-weight: bold; font-style: italic;">proximity</span> = difflib.SequenceMatcher(<span style="font-weight: bold; text-decoration: underline;">None</span>, title, text).ratio()
    <span style="font-weight: bold; font-style: italic;">heading</span> = etree.Element(htag_text_arr[i].tag)
    <span style="font-weight: bold; font-style: italic;">heading.text</span> = text
    heading.<span style="font-weight: bold;">set</span>(<span style="font-style: italic;">'proximity'</span>, <span style="font-weight: bold;">str</span>(proximity))
    OUT_ROOT.append(heading)

<span style="font-weight: bold; font-style: italic;">out_root_str</span> = etree.tostring(OUT_ROOT, encoding=<span style="font-style: italic;">'utf-8'</span>, method=<span style="font-style: italic;">'xml'</span>, pretty_print=<span style="font-weight: bold; text-decoration: underline;">True</span>)
<span style="font-weight: bold;">if</span> <span style="font-weight: bold;">type</span>(out_root_str) <span style="font-weight: bold;">is</span> <span style="font-weight: bold;">bytes</span>:
    <span style="font-weight: bold; font-style: italic;">out_root_str</span> = out_root_str.decode()
    <span style="font-weight: bold;">print</span>(out_root_str)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org81a0408" class="outline-3">
<h3 id="org81a0408"><a href="https://github.com/djcb/mu/releases.atom">mu4e</a></h3>
<div class="outline-text-3" id="text-org81a0408">
<p>
You need to <a href="https://www.djcbsoftware.nl/code/mu/mu4e/Initializing-the-message-store.html">issue 'mu init' command</a> before using mu4e.
Command in practice presumably looks like:
</p>
<pre class="example">
mu init --maildir=~/var/mail --muhome ~/var/lib/mu --my-address=jim@example.com

</pre>

<div class="org-src-container">
<pre class="src src-scheme"><span style="font-style: italic;">"mu"</span>
<span style="font-style: italic;">"nkf"</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package mu4e-utils
  <span style="font-weight: bold;">:after</span> org-contacts
  <span style="font-weight: bold;">:delight</span>
  (mu4e-main-mode    <span style="font-style: italic;">" MU"</span>)
  (mu4e-headers-mode <span style="font-style: italic;">" MU"</span>)
  (mu4e-view-mode    <span style="font-style: italic;">" MU"</span>)
  (mu4e-compose-mode <span style="font-style: italic;">" MU"</span>)
  <span style="font-weight: bold;">:hook</span> (after-init . mu4e~start)
  <span style="font-weight: bold;">:custom</span>
  (mail-user-agent 'mu4e-user-agent)
  (mu4e-hide-index-messages t)
  (mu4e-context-policy 'pick-first)
  (mu4e-compose-context-policy 'ask)
  (mu4e-update-interval 300)
  (mu4e-split-view t)
  (mu4e-headers-date-format <span style="font-style: italic;">"%y%m%d"</span>)
  (mu4e-headers-time-format <span style="font-style: italic;">" %R"</span>)
  (mu4e-headers-fields
   '((<span style="font-weight: bold;">:human-date</span> . 6)
     (<span style="font-weight: bold;">:flags</span>      . 3)
     (<span style="font-weight: bold;">:from</span>       . 16)
     (<span style="font-weight: bold;">:subject</span>)))
  (mu4e-headers-results-limit 1000)
  (mu4e-headers-advance-after-mark t)
  (mu4e-change-filenames-when-moving t)
  (mu4e-view-show-images t)
  (mu4e-html2text-command (<span style="font-weight: bold;">lambda</span> (msg)
                            (plist-put msg <span style="font-weight: bold;">:body-html</span>
                                       (<span style="font-weight: bold;">with-temp-buffer</span>
                                         (insert (<span style="font-weight: bold;">or</span> (mu4e-message-field msg <span style="font-weight: bold;">:body-html</span>) <span style="font-style: italic;">""</span>))
                                         (shell-command-on-region (point-min) (point-max) <span style="font-style: italic;">"nkf -w -Lu"</span> (current-buffer) t)
                                         (<span style="font-weight: bold;">or</span> (buffer-string) <span style="font-style: italic;">""</span>)))
                            (mu4e-shr2text msg)))
  (message-send-mail-function 'smtpmail-send-it)
  (mm-sign-option nil)
  (mml-secure-openpgp-sign-with-sender t)
  (mml-default-sign-method 'pgpmime)
  <span style="font-weight: bold;">:config</span>
  (<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">mu4e</span>)
  (bind-keys <span style="font-weight: bold;">:map</span> mu4e-headers-mode-map
             (<span style="font-style: italic;">"f"</span> . scroll-up-line)
             (<span style="font-style: italic;">"e"</span> . scroll-down-line)
             (<span style="font-style: italic;">"4"</span> . mu4e-headers-view-message)
             (<span style="font-style: italic;">"C-j"</span> . mu4e-headers-view-message)
             <span style="font-weight: bold;">:map</span> mu4e-view-mode-map
             (<span style="font-style: italic;">"f"</span> . scroll-up-line)
             (<span style="font-style: italic;">"e"</span> . scroll-down-line)
             (<span style="font-style: italic;">"SPC"</span> . my/forward-paragraph)
             (<span style="font-style: italic;">"E"</span> . my/backward-paragraph)
             (<span style="font-style: italic;">"TAB"</span> . shr-next-link)
             (<span style="font-style: italic;">"&lt;backtab&gt;"</span> . shr-previous-link)
             (<span style="font-style: italic;">"3"</span> . shr-next-link)
             (<span style="font-style: italic;">"4"</span> . my/enter-thing-at-point)
             (<span style="font-style: italic;">"C-c C-a"</span> . mu4e-view-attachment-action)
             <span style="font-weight: bold;">:map</span> mu4e-compose-mode-map
             (<span style="font-style: italic;">"C-x C-o"</span> . org-mu4e-compose-org-mode))
  (add-to-list 'mu4e-view-actions
               '(<span style="font-style: italic;">"external browser"</span> . mu4e-action-view-in-browser) t)
  (add-to-list 'mu4e-view-actions
               '(<span style="font-style: italic;">"XWidget View"</span> . mu4e-action-view-with-xwidget) t)
  (<span style="font-weight: bold;">when</span> (fboundp 'imagemagick-register-types)
    (imagemagick-register-types)))
</pre>
</div>
</div>

<div id="outline-container-orgf7a4719" class="outline-4">
<h4 id="orgf7a4719"><a href="https://github.com/iqbalansari/mu4e-alert/releases.atom">mu4e-alert</a></h4>
<div class="outline-text-4" id="text-orgf7a4719">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package mu4e-alert
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:hook</span> (after-init . (<span style="font-weight: bold;">lambda</span> ()
                        (mu4e-alert-enable-notifications)
                        (mu4e-alert-enable-mode-line-display)))
  <span style="font-weight: bold;">:after</span> mu4e
  <span style="font-weight: bold;">:custom</span>
  (mu4e-alert-modeline-formatter
   (<span style="font-weight: bold;">lambda</span> (count)
     (<span style="font-weight: bold;">if</span> (&gt; count 0)
         (format <span style="font-style: italic;">" M:%d"</span> count)
       <span style="font-style: italic;">""</span>)))
  <span style="font-weight: bold;">:config</span>
  (mu4e-alert-set-default-style 'fringe))
</pre>
</div>
</div>
</div>

<div id="outline-container-org96782b5" class="outline-4">
<h4 id="org96782b5">additional tweaks</h4>
<div class="outline-text-4" id="text-org96782b5">
<ul class="org-ul">
<li><p>
file attachment in dired (<a href="https://www.djcbsoftware.nl/code/mu/mu4e/Dired.html">source</a>)
</p>
<pre class="example">
gnus-dired-attach (C-c RET C-a)

</pre>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package gnus-dired
  <span style="font-weight: bold;">:after</span> mu4e-compose
  <span style="font-weight: bold;">:hook</span>
  (dired-mode . turn-on-gnus-dired-mode)
  <span style="font-weight: bold;">:custom</span>
  (gnus-dired-mail-mode 'mu4e-user-agent))
</pre>
</div></li>

<li><p>
use contact info from org-contacts
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package mu4e-actions
  <span style="font-weight: bold;">:after</span> org-contacts
  <span style="font-weight: bold;">:config</span>
  (<span style="font-weight: bold;">setq</span> mu4e-org-contacts-file (car org-contacts-files))
  (add-to-list 'mu4e-headers-actions
               '(<span style="font-style: italic;">"Contact to add"</span> . mu4e-action-add-org-contact) t)
  (add-to-list 'mu4e-view-actions
               '(<span style="font-style: italic;">"Contact to add"</span> . mu4e-action-add-org-contact) t))
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-org5ff3143" class="outline-4">
<h4 id="org5ff3143">personal settings&#xa0;&#xa0;&#xa0;<span class="tag"><span class="crypt">crypt</span></span></h4>
<div class="outline-text-4" id="text-org5ff3143">
<p>
&#x2013;&#x2014;BEGIN PGP MESSAGE&#x2013;&#x2014;
</p>

<p>
hQEMA9uWvE5LJ2ejAQf/SAyyJGi3rfr2CpSC9cqiUy4CszLD4lNAuYDKZ0Zcsu1a
K7EEA/zfEgd8AZIvCLJoE5TU7HFtAWtuVJRxYUFhGX5uttQE7ukrmIZsKh1gHrqD
9hlY070RAQ8D/L4rbROJVsoYhg+E9owco6kX9MppTTJlu146UmvV09lrIp33bJFG
UaUKiNVItSX8pzuBKyHolLqTEP11cR8wzBIYjyO7DvMvj6Lgk1vQph1X9Lfqk35e
bI1Unf1H/t2Z6WuDOvfpbVh5x8n9oIXl0lLjDkuiyNET3xIdAgbgJGlixLcKwqBX
8BycC4r7FV2fpqRkcNvWCWOjt2Do/a/caSLBZjeSu9LqAbEuo9wiCAqLBuW3V0tH
/9lI7P8t6dUYI8K4VWU/u3egfLe5fbbM68VDT+ZEYMyunF4clw/LROx3SYHqh3Ye
aFTl5g0V5bhG6XOPNfD8WSIlx0FVxvBKHTuq9dms1rTBf+hO48zvl2hlkyeXTkC0
PL6JeDjiWOaUGwKFfFBG/em/mayuUrdltrFgTi7wdZ01Ydv0RfDKdPRe3GiX2XMY
e+qVnCNDQ6GGMrc5dnqA+qQC5rSyxP81Jb6rCDl4Py5/TCzRdrVmqRL9Rmqxynf8
badHyHyOcd0kXaphqxR4t2l1Ppbp5maaxjOxcBXcsrc4dVla97gpC1AkHns0GMEL
ZXjAUGJjdQJ9xbnMSCC9r871576WbZybkldXzr9YMUAUc04z98mxes678ooV0qbk
u+SJOv6uBH2OoLbuD8PMs7FAhvl/c0qcuLfAMaqoKH4xgjzEqiurZ5wtnqgisKEr
1jc1mM6J3R003fEDyi4RMza/be4anYIz5hH5uz6CWqSVp5EA36stQdENmkmzM31I
JzCLZcI1XlbRoVRDspyq48CArHEMqxDUn9wil5tgLGRq15gANcu+7MSeQ2gcOTG+
mP5EQmpnDOLCKepwltIm8WQtkIT7RDLJE260DkwXWuAlW/CtQO5TGgaTqRVv1A/3
5OgTGDhXSWSejyA2XuSbiJtyjW+8HSrDv0CZSzo8N0m5WBbM6xqoQAfAZ2m6T0X6
lyilVyRmOj72oy0tIApX0+vt+QvrTvD9iPt8LOnNR2YyEPei4GipOVx9yeBrLSQk
RlMGC+rFLgbkwaEBDx4vZS29bsl3o8MucdwcnK7ow4fXd2jAqndT8NRLK9QIhXwg
pPMU2xsxcgZCXkhAc66sWOP/vLoL3Cn74OXVACb8nT8fC4mWyefLguSnmsiX3vyI
OX4Qtz2KxxygRDa13bNdg/zk/k6KkHKAy6lCKiPfr+AWRnQKbXVtRRdPVd6yADuq
bW2BUZEpehu3Gw9pZ9UxdKNqCT5coHLlND32Su+1VyTuZrTOIfTxS39GOV93uSzY
pS8N2sKgC9UJ0bCaaJ1JaWaFcNb7rygSjYSrMZ+BSnX1K9RTl/ENrovVxP73/+v1
tAkBojuhvhYIyNYXUCGc9NU2pQxbOeIjhqaNOzmyRzpwuYEmFWUS/Y/Eyqt5XzSD
U/kx+2Wzd97YgjGpMwJmWdk2bBNSIQ5gCeU2QGeLNnMbr4mLP0frfHWkuo61iN2W
EcpcEillBEzi38UWA14cj5ASCkSQpn2WZUcozCv2cbSYT4n/sy55wl6t0YDJVWTZ
fbaJxAK0C8ziZYenirZvaroVRDXyvj1kkICkJGcnLidp0W2Y6G3OUmnOtk60bLF/
YjnaKMBLOLN1k5wMmUcWCPQzX8FCskFJoaiGzDbXeyZ/UnDqJpKSGxMG9yLZzyid
lDAmxVslTY94qV4=
=1X9o
&#x2013;&#x2014;END PGP MESSAGE&#x2013;&#x2014;
</p>
</div>
</div>
</div>

<div id="outline-container-orgf72901d" class="outline-3">
<h3 id="orgf72901d"><a href="https://github.com/skeeto/elfeed/releases.atom">elfeed</a></h3>
<div class="outline-text-3" id="text-orgf72901d">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package elfeed
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:delight</span>
  (elfeed-show-mode   <span style="font-style: italic;">" EF"</span>)
  (elfeed-search-mode <span style="font-style: italic;">" EF"</span>)
  <span style="font-weight: bold;">:commands</span> (elfeed)
  <span style="font-weight: bold;">:init</span>
  (<span style="font-weight: bold;">defface</span> <span style="font-weight: bold; font-style: italic;">elfeed-search-unchecked-title-face</span>
    nil
    <span style="font-style: italic;">"Face used in search mode for unchecked entry titles."</span>
    <span style="font-weight: bold;">:group</span> 'elfeed)
  (<span style="font-weight: bold;">defface</span> <span style="font-weight: bold; font-style: italic;">elfeed-search-checked-title-face</span>
    nil
    <span style="font-style: italic;">"Face used in search mode for checked entry titles."</span>
    <span style="font-weight: bold;">:group</span> 'elfeed)
  <span style="font-weight: bold;">:custom-face</span>
  (elfeed-search-title-face ((t (<span style="font-weight: bold;">:foreground</span> <span style="font-style: italic;">"#4D4D4D"</span>))))
  (elfeed-search-unchecked-title-face ((t (<span style="font-weight: bold;">:foreground</span> <span style="font-style: italic;">"cornflowerblue"</span>))))
  (elfeed-search-checked-title-face ((t (<span style="font-weight: bold;">:foreground</span> <span style="font-style: italic;">"darkblue"</span>))))
  <span style="font-weight: bold;">:custom</span>
  (elfeed-use-curl t)
  (elfeed-db-directory (expand-file-name <span style="font-style: italic;">"~/var/lib/elfeed"</span>))
  (elfeed-search-date-format '(<span style="font-style: italic;">"%Y%m%d"</span> 8 <span style="font-weight: bold;">:left</span>))
  (elfeed-search-title-min-width 100)
  (elfeed-search-title-max-width 120)
  (elfeed-search-trailing-width 160)
  (elfeed-sort-order 'ascending)
  (elfeed-enclosure-default-dir <span style="font-style: italic;">"~/Downloads/"</span>)
  (elfeed-save-multiple-enclosures-without-asking t)
  <span style="font-weight: bold;">:config</span>
  (<span style="font-weight: bold;">setf</span> elfeed-search-print-entry-function
        'my/elfeed-search-print-entry)
  (<span style="font-weight: bold;">defalias</span> '<span style="font-weight: bold;">elfeed-search-tag-all-unchecked</span>
    (elfeed-expose #'elfeed-search-tag-all 'unchecked)
    <span style="font-style: italic;">"Add the `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">unchecked</span><span style="font-style: italic;">' tag to all selected entries."</span>)
  (<span style="font-weight: bold;">defalias</span> '<span style="font-weight: bold;">elfeed-search-untag-all-unchecked</span>
    (elfeed-expose #'elfeed-search-untag-all 'unchecked)
    <span style="font-style: italic;">"Remove the `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">unchecked</span><span style="font-style: italic;">' tag from all selected entries."</span>)
  (<span style="font-weight: bold;">defalias</span> '<span style="font-weight: bold;">elfeed-search-tag-all-checked</span>
    (elfeed-expose #'elfeed-search-tag-all 'checked)
    <span style="font-style: italic;">"Add the `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">checked</span><span style="font-style: italic;">' tag to all selected entries."</span>)
  (<span style="font-weight: bold;">defalias</span> '<span style="font-weight: bold;">elfeed-search-untag-all-checked</span>
    (elfeed-expose #'elfeed-search-untag-all 'checked)
    <span style="font-style: italic;">"Remove the `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">checked</span><span style="font-style: italic;">' tag from all selected entries."</span>)
  (bind-keys <span style="font-weight: bold;">:map</span> elfeed-search-mode-map
             (<span style="font-style: italic;">"C-j"</span> . elfeed-search-show-entry)
             (<span style="font-style: italic;">"o"</span> . elfeed-search-open-url)
             (<span style="font-style: italic;">"C-c C-o"</span> . elfeed-search-open-url)
             (<span style="font-style: italic;">"f"</span> . scroll-up-line)
             (<span style="font-style: italic;">"e"</span> . scroll-down-line)
             (<span style="font-style: italic;">"q"</span> . elfeed-kill-buffer)
             (<span style="font-style: italic;">"Q"</span> . quit-window)
             (<span style="font-style: italic;">"x"</span> . elfeed-search-update--force)
             (<span style="font-style: italic;">"c"</span> . (<span style="font-weight: bold;">lambda</span> () (<span style="font-weight: bold;">interactive</span>)
                      (elfeed-search-untag-all-unread)
                      (<span style="font-weight: bold;">unless</span> (use-region-p) (forward-line -1))
                      (elfeed-search-tag-all-unchecked)))
             (<span style="font-style: italic;">"C"</span> . elfeed-search-untag-all-unchecked)
             (<span style="font-style: italic;">"r"</span> . (<span style="font-weight: bold;">lambda</span> () (<span style="font-weight: bold;">interactive</span>)
                      (elfeed-search-untag-all-unread)
                      (<span style="font-weight: bold;">unless</span> (use-region-p) (forward-line -1))
                      (elfeed-search-untag-all-unchecked)
                      (<span style="font-weight: bold;">unless</span> (use-region-p) (forward-line -1))
                      (elfeed-search-tag-all-checked)
                      (<span style="font-weight: bold;">unless</span> (use-region-p) (forward-line -1))
                      (elfeed-search-tag-all (intern (format-time-string <span style="font-style: italic;">"%Y%m%d"</span>)))))
             (<span style="font-style: italic;">"R"</span> . elfeed-search-untag-all-checked)
             (<span style="font-style: italic;">"d"</span> . elfeed-search-untag-all-unread)
             (<span style="font-style: italic;">"Dv"</span> . elfeed-search-download-video)
             (<span style="font-style: italic;">"Da"</span> . elfeed-search-download-audio)
             (<span style="font-style: italic;">"D="</span> . elfeed-search-show-media-duration)
             (<span style="font-style: italic;">"X"</span> . elfeed-search-org-capture-derived)
             <span style="font-weight: bold;">:map</span> elfeed-show-mode-map
             (<span style="font-style: italic;">"f"</span> . scroll-up-line)
             (<span style="font-style: italic;">"e"</span> . scroll-down-line)
             (<span style="font-style: italic;">"SPC"</span> . my/forward-paragraph)
             (<span style="font-style: italic;">"E"</span> . my/backward-paragraph)
             (<span style="font-style: italic;">"4"</span> . my/enter-thing-at-point)
             (<span style="font-style: italic;">"TAB"</span> . shr-next-link))
  (add-to-list 'elfeed-search-face-alist '(unchecked elfeed-search-unchecked-title-face))
  (add-to-list 'elfeed-search-face-alist '(checked elfeed-search-checked-title-face)))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/elfeed-search-print-entry</span> (entry)
  <span style="font-style: italic;">"Print ENTRY to the buffer with my style."</span>
  (<span style="font-weight: bold;">let*</span> ((date (elfeed-search-format-date (elfeed-entry-date entry)))
         (title (<span style="font-weight: bold;">or</span> (elfeed-meta entry <span style="font-weight: bold;">:title</span>) (elfeed-entry-title entry) <span style="font-style: italic;">""</span>))
         (title-faces (elfeed-search--faces (elfeed-entry-tags entry)))
         (feed (elfeed-entry-feed entry))
         (feed-title
          (<span style="font-weight: bold;">when</span> feed
            (<span style="font-weight: bold;">or</span> (elfeed-meta feed <span style="font-weight: bold;">:title</span>) (elfeed-feed-title feed))))
         (tags (mapcar #'symbol-name (elfeed-entry-tags entry)))
         (tags-str (mapconcat
                    (<span style="font-weight: bold;">lambda</span> (s) (propertize s 'face 'elfeed-search-tag-face))
                    tags <span style="font-style: italic;">","</span>))
         (title-width (- (window-width) 10 elfeed-search-trailing-width))
         (title-column (elfeed-format-column
                        title (elfeed-clamp
                               elfeed-search-title-min-width
                               title-width
                               elfeed-search-title-max-width)
                        <span style="font-weight: bold;">:left</span>)))
    (<span style="font-weight: bold;">when</span> feed-title
      (insert (propertize (elfeed-format-column feed-title 6 <span style="font-weight: bold;">:left</span>)
                          'face 'elfeed-search-feed-face) <span style="font-style: italic;">" "</span>))
    (insert (propertize title-column 'face title-faces 'kbd-help title) <span style="font-style: italic;">" "</span>)
    (insert (propertize date 'face 'elfeed-search-date-face) <span style="font-style: italic;">" "</span>)
    (<span style="font-weight: bold;">when</span> tags
      (insert <span style="font-style: italic;">"("</span> tags-str <span style="font-style: italic;">")"</span>))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">elfeed-search-open-url</span> ()
  <span style="font-style: italic;">"Visit the current entry in your browser using 'eww-browse-url'."</span>
  (<span style="font-weight: bold;">interactive</span>)
  (<span style="font-weight: bold;">let</span> ((browse-url-browser-function 'open-url))
    (elfeed-search-untag-all-unchecked)
    (<span style="font-weight: bold;">unless</span> (use-region-p) (forward-line -1))
    (elfeed-search-tag-all-checked)
    (<span style="font-weight: bold;">unless</span> (use-region-p) (forward-line -1))
    (elfeed-search-tag-all (intern (format-time-string <span style="font-style: italic;">"%Y%m%d"</span>)))
    (<span style="font-weight: bold;">unless</span> (use-region-p) (forward-line -1))
    (elfeed-search-browse-url)))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">elfeed-search-download-video</span> ()
  <span style="font-style: italic;">"Downlaod video file."</span>
  (<span style="font-weight: bold;">interactive</span>)
  (<span style="font-weight: bold;">let</span> ((entries (elfeed-search-selected)))
    (<span style="font-weight: bold;">cl-loop</span> for entry in entries
             when (<span style="font-weight: bold;">or</span> (caar (elfeed-entry-enclosures entry))
                      (elfeed-entry-link entry))
             do (<span style="font-weight: bold;">let</span> ((title (elfeed-entry-title entry)))
                  (my/download-video it title)))
    (mapc #'elfeed-search-update-entry entries)
    (<span style="font-weight: bold;">unless</span> (<span style="font-weight: bold;">or</span> elfeed-search-remain-on-entry (use-region-p))
      (forward-line))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">elfeed-search-download-audio</span> ()
  <span style="font-style: italic;">"Download audio file."</span>
  (<span style="font-weight: bold;">interactive</span>)
  (<span style="font-weight: bold;">let</span> ((entries (elfeed-search-selected)))
    (<span style="font-weight: bold;">cl-loop</span> for entry in entries
             when (<span style="font-weight: bold;">or</span> (caar (elfeed-entry-enclosures entry))
                      (elfeed-entry-link entry))
             do (<span style="font-weight: bold;">let</span> ((title (elfeed-entry-title entry)))
                  (my/download-audio it title)))
    (mapc #'elfeed-search-update-entry entries)
    (<span style="font-weight: bold;">unless</span> (<span style="font-weight: bold;">or</span> elfeed-search-remain-on-entry (use-region-p))
      (forward-line))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">elfeed-search-show-media-duration</span> ()
  <span style="font-style: italic;">"Show duration of media attached to current entry."</span>
  (<span style="font-weight: bold;">interactive</span>)
  (<span style="font-weight: bold;">let*</span> ((entry (elfeed-search-selected <span style="font-weight: bold;">:single</span>))
         (url (<span style="font-weight: bold;">or</span> (caar (elfeed-entry-enclosures entry))
                  (elfeed-entry-link entry))))
    (show-media-duration url)))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">elfeed-search-org-capture-derived</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> arg)
  <span style="font-style: italic;">"Create actionable org task derived from current elfeed entry.</span>

<span style="font-style: italic;">If called with C-u prefix, ask user to specify tags and target."</span>
  (<span style="font-weight: bold;">interactive</span> <span style="font-style: italic;">"P"</span>)
  (<span style="font-weight: bold;">let</span> ((entries (elfeed-search-selected)))
    (<span style="font-weight: bold;">save-window-excursion</span>
      (<span style="font-weight: bold;">cl-loop</span> for entry in entries
               do (<span style="font-weight: bold;">progn</span>
                    (elfeed-show-entry entry)
                    (<span style="font-weight: bold;">let</span> ((org-capture-derived-todo org-todo-keyword-3)
                          (org-capture-derived-tags (format <span style="font-style: italic;">":web:%s"</span>
                                                            (<span style="font-weight: bold;">cond</span>
                                                             ((<span style="font-weight: bold;">or</span> (member 'video (elfeed-entry-tags entry))
                                                                  (member 'audio (elfeed-entry-tags entry)))
                                                              <span style="font-style: italic;">"ac_watch:"</span>)
                                                             (t <span style="font-style: italic;">"ac_read:"</span>))))
                          (org-capture-derived-target <span style="font-style: italic;">"68d74115-1f70-448d-a76e-738e32b272d8"</span>)
                          (org-capture-derived-deadline-in-day 7))
                      (call-interactively #'org-capture-derived))
                    (elfeed-kill-buffer))))
    (elfeed-search-untag-all-unchecked)
    (<span style="font-weight: bold;">unless</span> (use-region-p) (forward-line -1))
    (elfeed-search-tag-all-checked)
    (mapc #'elfeed-search-update-entry entries)))
</pre>
</div>
</div>

<div id="outline-container-org00e0168" class="outline-4">
<h4 id="org00e0168"><a href="https://github.com/remyhonig/elfeed-org/releases.atom">elfeed-org</a></h4>
<div class="outline-text-4" id="text-org00e0168">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package elfeed-org
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:after</span> (elfeed org)
  <span style="font-weight: bold;">:custom</span>
  (rmh-elfeed-org-files '(<span style="font-style: italic;">"~/org/index/feed.org"</span> <span style="font-style: italic;">"~/git/new_dotfiles/dotemacs.org"</span>))
  (rmh-elfeed-org-ignore-tag <span style="font-style: italic;">"ignore"</span>)
  (rmh-elfeed-org-auto-ignore-invalid-feeds t)
  <span style="font-weight: bold;">:config</span>
  (elfeed-org))
</pre>
</div>
</div>
</div>

<div id="outline-container-orge8f9ee7" class="outline-4">
<h4 id="orge8f9ee7">personal tagging rules&#xa0;&#xa0;&#xa0;<span class="tag"><span class="crypt">crypt</span></span></h4>
<div class="outline-text-4" id="text-orge8f9ee7">
<p>
&#x2013;&#x2014;BEGIN PGP MESSAGE&#x2013;&#x2014;
</p>

<p>
hQEMA9uWvE5LJ2ejAQf8Ds9NGaRr8jpKfqEreKEOiV+fJp02H+w92XTv6yFu5jYY
8/cvKEYSsRYlzeLhZ65iDxBxqEnYlmv1FK2MzQbi8/enDAqo5z/A0gFan+oLWyP2
vXfO246vk+HnbxciuO1QZDIDMHdABFs9isQ0+/TSZ1irUDQbolepVuJs8RTqpvJ4
ogrkt+KSkWEuA+05yRcFAAPst0lMFvC2wNDN7uzW/NX1PDryzYJT2C3Hre50bXeN
4FqiWbLzcYP33iPlRZ5mc7e7AcUnl+TD/f/e6rZv53beAme2SXrOAeDmKnK5c+oU
QVBAYqAt6Yet/lZTELCJo2FiCmCDPZyjNAd9T0igZtLpAb4vhh3g5G8sdT5TtjL0
sBhQ+YhqcUlB7cda65b6UwQdFAB8QzJwC1ixHCobPDoEq1Q68dpWoh4Qm5buhCDm
3Zurn4oB1SqSYrs7d75DlD3zWzLgejJGc3aFVuKRl+ix+Kafmlx7Tdhxim2KJWDp
ahMFF4WWrC1gD3oIaz/ypFwXy02DoEBhf1+QW3EyFFIGvGk/7j8s30mN/U1Yv6Fv
J/l9hDR+AHVf7VG5b/kprNHcb2GQFdGr3ZTMFn+fK4rGAuYdKyNYzubOntmli06G
Zk5erOOfQM6JXFCZy8OxgcApW6LMbHMjWfRWou6s90NAKGH4rISd6nXDSFZlpubS
i95Qi0cJqixqmROI45rxpXLW5BS4TuwUviF7PuE+i3ZFvVRopTSFfAgCBcOOhB4U
0MNTuItdt3xVSbJTnIgirriAquXhoOAaYXicacgAcD0af2Pu5bQdJuHttn/JvVWU
WpGboJGLpo3rmXHcaWLrNvCO6o3MUdhn/KxEZDYtnMHK3lU/GImgp2CZmmtnRR0l
3Dpjj2t45xphH9L6L/cbJOjVf0LXz3HPC2cGhhKjIuTQ4OBmWy1bcQgM/aKyps3E
AztE/GYZ55S7f7NWPwVHrvHhqYL8oECXqVZXArrfR9ce+V9ONJfCpPY9YaBOfQU3
9Kr7XqGSNeQeZJn2wyAUUlXAtKmCxm2DqGBB0gmtmdM9mHGttPYqKXrEXyyd7Ncq
tdIjc58mGXwilPD6GGO32CNvJx8HPlAdEACReNIkIeuGbNBOhpcnQ9a7tb1feToo
rj9LnUzqDTBf2OcgnaQQKnNi5Sh96e8UqfyX+QtQ5SeBmSS621SGelQL3FIhePos
xxX4PiDuzOLUxaK9nxmO5QNXxx1bcxgRznBzJTF7h5Ttn3rMTY0zV7h8748K/phi
MQzj2qLFN3NkFRnUUE720PRvU8gadNcRwXmthuIcA/2P/65/nnhZw69RvsA2+Y6d
uxpGBDs9/n/vrN622GDWQdXrGToBGL9WA1Os9KtO/q9NBYIbj5ohUvPwNisEcyrJ
10LOq2e13nk5yGEtjznq4O96o7Bgj4PfnnqSXZ1D2zDVgt/xVuz1FX9tnOsp6De6
pj33Rl7Q056/4kDd+noyNSNmT5noMs0btG1iqO+6SCkOsPEtHsDJIacDinFbEShu
dMv+byk5Rw==
=bWDq
&#x2013;&#x2014;END PGP MESSAGE&#x2013;&#x2014;
</p>
</div>
</div>
</div>

<div id="outline-container-org662d260" class="outline-3">
<h3 id="org662d260">Dired</h3>
<div class="outline-text-3" id="text-org662d260">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package dired
  <span style="font-weight: bold;">:bind</span> (<span style="font-weight: bold;">:map</span> dired-mode-map
              (<span style="font-style: italic;">"("</span> . dired-hide-details-mode)
              (<span style="font-style: italic;">")"</span> . dired-hide-details-mode)
              (<span style="font-style: italic;">"E"</span> . dired-create-empty-file)
              (<span style="font-style: italic;">"Y"</span> . dired-do-relsymlink)
              (<span style="font-style: italic;">"r"</span> . wdired-change-to-wdired-mode)
              (<span style="font-style: italic;">"C-o"</span> . nil)
              (<span style="font-style: italic;">"o"</span> . my/dired-open)
              (<span style="font-style: italic;">"C-c C-o"</span> . my/dired-open)
              (<span style="font-style: italic;">"C-c C-s"</span> . my/dired-share))
  <span style="font-weight: bold;">:hook</span> (dired-mode . dired-hide-details-mode)
  <span style="font-weight: bold;">:custom</span>
  (dired-recursive-copies 'always)
  (dired-recursive-deletes 'top)
  (dired-listing-switches <span style="font-style: italic;">"-ahgG --time-style=iso --group-directories-first"</span>)
  (dired-dwim-target 'dired-dwim-target-recent)
  (dired-hide-details-hide-information-lines nil)
  <span style="font-weight: bold;">:config</span>
  (put 'dired-find-alternate-file 'disabled nil)
  (<span style="font-weight: bold;">setq</span> dired-isearch-filenames t)
  (advice-add #'dired-do-delete <span style="font-weight: bold;">:around</span> #'my/advice-dired-control-deletion)
  (advice-add #'dired-do-flagged-delete <span style="font-weight: bold;">:around</span> #'my/advice-dired-control-deletion))

(use-package dired-x
  <span style="font-weight: bold;">:after</span> dired)

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/advice-dired-control-deletion</span> (oldfun <span style="font-weight: bold; text-decoration: underline;">&amp;rest</span> r)
  <span style="font-style: italic;">"Enable file deleting functions to control deleting procedure</span>
<span style="font-style: italic;">whether files are going to be in trash box."</span>
  (<span style="font-weight: bold;">let</span> ((delete-by-moving-to-trash
         (<span style="font-weight: bold;">if</span> (equal current-prefix-arg '(4))
             nil t)))
    (apply oldfun (cdr r))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/dired-open</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> arg)
  <span style="font-style: italic;">"Open file in Dired.</span>

<span style="font-style: italic;">File is either on current line or marked targets.</span>
<span style="font-style: italic;">Optional argument `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">ARG</span><span style="font-style: italic;">' is passed to `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">my/view-file</span><span style="font-style: italic;">'."</span>
  (<span style="font-weight: bold;">interactive</span> <span style="font-style: italic;">"P"</span>)
  (<span style="font-weight: bold;">let</span> ((files (dired-get-marked-files nil nil)))
    (mapc (<span style="font-weight: bold;">lambda</span> (file)
            (<span style="font-weight: bold;">if</span> (equal arg '(4))
                (find-file file)
              (my/view-file file arg)))
          files)))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/dired-share</span> ()
  <span style="font-style: italic;">"Share file with remote device via KDE Connect."</span>
  (<span style="font-weight: bold;">interactive</span>)
  (<span style="font-weight: bold;">let</span> ((files (dired-get-marked-files nil nil)))
    (mapc (<span style="font-weight: bold;">lambda</span> (file)
            (shell-command
             (mapconcat 'identity
                        (list <span style="font-style: italic;">"kdeconnect-cli"</span> <span style="font-style: italic;">"-d"</span> <span style="font-style: italic;">"a30587ededf4c2d2"</span>
                              <span style="font-style: italic;">"--share"</span> (shell-quote-argument
                                         file)) <span style="font-style: italic;">" "</span>)))
          files)))
</pre>
</div>
</div>

<div id="outline-container-orga79f3bd" class="outline-4">
<h4 id="orga79f3bd"><a href="https://github.com/stsquad/dired-rsync/releases.atom">dired-rsync</a></h4>
<div class="outline-text-4" id="text-orga79f3bd">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package dired-rsync
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:after</span> dired
  <span style="font-weight: bold;">:bind</span> (<span style="font-weight: bold;">:map</span> dired-mode-map
              (<span style="font-style: italic;">"C-c C-r"</span> . dired-rsync))
  <span style="font-weight: bold;">:custom</span>
  (dired-rsync-options <span style="font-style: italic;">"-auz --info=progress2"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-org9f91434" class="outline-4">
<h4 id="org9f91434"><a href="https://github.com/crocket/dired-single/releases.atom">dired-single</a></h4>
<div class="outline-text-4" id="text-org9f91434">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package dired-single
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:after</span> dired
  <span style="font-weight: bold;">:bind</span> (<span style="font-weight: bold;">:map</span> dired-mode-map
              (<span style="font-style: italic;">"C-j"</span> . dired-single-buffer)
              (<span style="font-style: italic;">"^"</span> . dired-single-up-directory)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgda1dbda" class="outline-4">
<h4 id="orgda1dbda"><a href="https://github.com/Fuco1/dired-hacks/releases.atom">dired-hacks</a></h4>
<div class="outline-text-4" id="text-orgda1dbda">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package dired-subtree
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:after</span> dired
  <span style="font-weight: bold;">:bind</span> (<span style="font-weight: bold;">:map</span> dired-mode-map
              (<span style="font-style: italic;">"TAB"</span> . dired-subtree-cycle)))

(use-package dired-narrow
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:after</span> dired
  <span style="font-weight: bold;">:bind</span>
  (<span style="font-weight: bold;">:map</span> dired-mode-map
        (<span style="font-style: italic;">"z"</span> . dired-narrow))
  (<span style="font-weight: bold;">:map</span> dired-narrow-map
        (<span style="font-style: italic;">"C-j"</span> . exit-minibuffer)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org7f1cd52" class="outline-4">
<h4 id="org7f1cd52"><a href="https://github.com/mattiasb/dired-hide-dotfiles/releases.atom">dired-hide-dotfiles</a></h4>
<div class="outline-text-4" id="text-org7f1cd52">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package dired-hide-dotfiles
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:after</span> dired
  <span style="font-weight: bold;">:bind</span> (<span style="font-weight: bold;">:map</span> dired-mode-map
              (<span style="font-style: italic;">","</span> . dired-clean-directory)
              (<span style="font-style: italic;">"."</span> . dired-hide-dotfiles-mode))
  <span style="font-weight: bold;">:config</span>
  (dired-hide-dotfiles-mode -1))
</pre>
</div>
</div>
</div>

<div id="outline-container-org04ca79b" class="outline-4">
<h4 id="org04ca79b"><a href="https://github.com/emacs-straight/dired-du/releases.atom">dired-du</a></h4>
<div class="outline-text-4" id="text-org04ca79b">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package dired-du
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:after</span> dired
  <span style="font-weight: bold;">:diminish</span> ((dired-du-mode . <span style="font-style: italic;">"du"</span>))
  <span style="font-weight: bold;">:bind</span> (<span style="font-weight: bold;">:map</span> dired-mode-map
              (<span style="font-style: italic;">"C-M-S-u"</span> . dired-du-mode))
  <span style="font-weight: bold;">:custom</span>
  (dired-du-size-format t))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org116c107" class="outline-3">
<h3 id="org116c107">Shells</h3>
<div class="outline-text-3" id="text-org116c107">
</div>

<div id="outline-container-orgbc93d9e" class="outline-4">
<h4 id="orgbc93d9e">shell</h4>
<div class="outline-text-4" id="text-orgbc93d9e">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package shell
  <span style="font-weight: bold;">:delight</span> <span style="font-style: italic;">" SM"</span>
  <span style="font-weight: bold;">:commands</span> (shell)
  <span style="font-weight: bold;">:config</span>
  (bind-keys <span style="font-weight: bold;">:map</span> shell-mode-map
             (<span style="font-style: italic;">"C-j"</span> . comint-send-input)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org240f38a" class="outline-4">
<h4 id="org240f38a">term</h4>
<div class="outline-text-4" id="text-org240f38a">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package term
  <span style="font-weight: bold;">:delight</span>
  (term-mode <span style="font-style: italic;">" TR"</span>)
  <span style="font-weight: bold;">:config</span>
  (bind-keys <span style="font-weight: bold;">:map</span> term-mode-map
             (<span style="font-style: italic;">"C-j"</span> . term-send-input)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf56c34a" class="outline-4">
<h4 id="orgf56c34a">vterm</h4>
<div class="outline-text-4" id="text-orgf56c34a">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package vterm
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:commands</span> (vterm)
  <span style="font-weight: bold;">:delight</span> <span style="font-style: italic;">" VT"</span>
  <span style="font-weight: bold;">:diminish</span> ((vterm-copy-mode . <span style="font-style: italic;">"vc"</span>))
  <span style="font-weight: bold;">:bind</span>
  <span style="font-weight: bold;">:custom</span>
  (vterm-min-window-width 55)
  (vterm-buffer-name-string <span style="font-style: italic;">"vterm %s"</span>)
  <span style="font-weight: bold;">:config</span>
  (bind-keys <span style="font-weight: bold;">:map</span> vterm-mode-map
             (<span style="font-style: italic;">"C-h"</span> . vterm-send-backspace)
             (<span style="font-style: italic;">"M-h"</span> . vterm-send-meta-backspace)
             (<span style="font-style: italic;">"C-y"</span> . vterm-yank)
             (<span style="font-style: italic;">"M-y"</span> . vterm-yank-pop)
             (<span style="font-style: italic;">"C-o"</span> . nil)
             (<span style="font-style: italic;">"M-l"</span> . nil)
             <span style="font-weight: bold;">:map</span> vterm-copy-mode-map
             (<span style="font-style: italic;">"C-j"</span> . vterm-copy-mode-done))
  (advice-add 'consult-yank-from-kill-ring <span style="font-weight: bold;">:around</span> #'advice/vterm-yank-pop))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">advice/vterm-yank-pop</span> (orig-fun <span style="font-weight: bold; text-decoration: underline;">&amp;rest</span> args)
  (<span style="font-weight: bold;">if</span> (equal major-mode 'vterm-mode)
      (<span style="font-weight: bold;">let</span> ((inhibit-read-only t)
            (yank-undo-function (<span style="font-weight: bold;">lambda</span> (_start _end) (vterm-undo))))
        (<span style="font-weight: bold;">cl-letf</span> (((symbol-function 'insert-for-yank)
                   (<span style="font-weight: bold;">lambda</span> (str) (vterm-send-string str t))))
          (apply orig-fun args)))
    (apply orig-fun args)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orge516f47" class="outline-4">
<h4 id="orge516f47">eshell</h4>
<div class="outline-text-4" id="text-orge516f47">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package eshell
  <span style="font-weight: bold;">:delight</span> <span style="font-style: italic;">" ES"</span>
  <span style="font-weight: bold;">:hook</span>
  (eshell-kill . eshell-command-alert)
  <span style="font-weight: bold;">:custom</span>
  (eshell-prompt-function
   #'(lambda ()
       (format <span style="font-style: italic;">"[%s]\n%s"</span>
               (eshell/basename (eshell/pwd))
               (<span style="font-weight: bold;">if</span> (= (user-uid) 0) <span style="font-style: italic;">"# "</span> <span style="font-style: italic;">"$ "</span>))))
  (eshell-prompt-regexp <span style="font-style: italic;">"[#$] "</span>)
  (eshell-visual-subcommands '((<span style="font-style: italic;">"git"</span> <span style="font-style: italic;">"log"</span> <span style="font-style: italic;">"diff"</span> <span style="font-style: italic;">"show"</span>)))
  <span style="font-weight: bold;">:config</span>
  (<span style="font-weight: bold;">setq</span> eshell-path-env (getenv <span style="font-style: italic;">"PATH"</span>)))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">eshell-command-alert</span> (process status)
  <span style="font-style: italic;">"Send `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">alert</span><span style="font-style: italic;">' with severity based on STATUS when PROCESS finished."</span>
  (<span style="font-weight: bold;">let*</span> ((cmd (process-command process))
         (buffer (process-buffer process))
         (msg (format <span style="font-style: italic;">"%s: %s"</span> (mapconcat 'identity cmd <span style="font-style: italic;">" "</span>)  status)))
    (<span style="font-weight: bold;">if</span> (string-prefix-p <span style="font-style: italic;">"finished"</span> status)
        (alert msg <span style="font-weight: bold;">:buffer</span> buffer <span style="font-weight: bold;">:severity</span>  'normal)
      (alert msg <span style="font-weight: bold;">:buffer</span> buffer <span style="font-weight: bold;">:severity</span> 'urgent))))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgdc23126" class="outline-3">
<h3 id="orgdc23126">org mode</h3>
<div class="outline-text-3" id="text-orgdc23126">
</div>

<div id="outline-container-orgbf79770" class="outline-4">
<h4 id="orgbf79770">org</h4>
<div class="outline-text-4" id="text-orgbf79770">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package org
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:defer</span> t
  <span style="font-weight: bold;">:mode</span> ((<span style="font-style: italic;">"\\.org$"</span> . org-mode))
  <span style="font-weight: bold;">:interpreter</span> ((<span style="font-style: italic;">"org"</span> . org-mode))
  <span style="font-weight: bold;">:init</span>
  (<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">org-warning-keyword-0</span> <span style="font-style: italic;">"UG"</span> <span style="font-style: italic;">"TODO keyword acronym standing for 'UrGent'"</span>)
  (<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">org-todo-keyword-0</span> <span style="font-style: italic;">"TD"</span> <span style="font-style: italic;">"TODO keyword acronym standing for 'To Do'"</span>)
  (<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">org-todo-keyword-1</span> <span style="font-style: italic;">"GO"</span> <span style="font-style: italic;">"TODO keyword acronym standing for 'Get On'"</span>)
  (<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">org-todo-keyword-2</span> <span style="font-style: italic;">"IP"</span> <span style="font-style: italic;">"TODO keyword acronym standing for 'In Progressn'"</span>)
  (<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">org-todo-keyword-3</span> <span style="font-style: italic;">"AC"</span> <span style="font-style: italic;">"TODO keyword acronym standing for 'doABle'"</span>)
  (<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">org-todo-keyword-4</span> <span style="font-style: italic;">"SD"</span> <span style="font-style: italic;">"TODO keyword acronym standing for 'SomeDay'"</span>)
  (<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">org-done-keyword-0</span> <span style="font-style: italic;">"DN"</span> <span style="font-style: italic;">"TODO keyword acronym standing for 'DoNe'"</span>)
  (<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">org-done-keyword-1</span> <span style="font-style: italic;">"CX"</span> <span style="font-style: italic;">"TODO keyword acronym standing for 'Cancel'"</span>)
  (<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">org-done-keyword-2</span> <span style="font-style: italic;">"PD"</span> <span style="font-style: italic;">"TODO keyword acronym standing for 'PenDing'"</span>)
  <span style="font-weight: bold;">:hook</span> (org-after-todo-state-change . save-buffer)
  <span style="font-weight: bold;">:custom</span>
  (org-directory (expand-file-name <span style="font-style: italic;">"~/org"</span>))
  (org-special-ctrl-a/e t)
  (org-adapt-indentation nil)
  (org-hide-emphasis-markers t)
  (org-bookmark-names-plist nil)
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">inline image</span>
  (org-startup-with-inline-images t)
  (org-display-remote-inline-images 'cache)
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">do not split line at point</span>
  (org-M-RET-may-split-line '((default . nil)))
  <span style="font-weight: bold;">:config</span>
  (<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">org-habit</span>)
  (<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">org-mu4e</span>)

  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">local key bindings</span>
  (bind-keys <span style="font-weight: bold;">:map</span> org-mode-map
             (<span style="font-style: italic;">"C-j"</span>     . org-return)
             (<span style="font-style: italic;">"C-m"</span>     . org-return-indent)
             (<span style="font-style: italic;">"M-j"</span>     . org-meta-return)
             (<span style="font-style: italic;">"C-S-p"</span>   . org-previous-item)
             (<span style="font-style: italic;">"C-S-n"</span>   . org-next-item)
             (<span style="font-style: italic;">"C-S-u"</span>   . org-up-element)
             (<span style="font-style: italic;">"C-$"</span>     . org-down-element)
             (<span style="font-style: italic;">"C-&lt;"</span>     . org-previous-link)
             (<span style="font-style: italic;">"C-&gt;"</span>     . org-next-link)
             (<span style="font-style: italic;">"C-c @"</span>   . org-mark-element)
             (<span style="font-style: italic;">"C-c C-SPC"</span> . org-mark-subtree)
             (<span style="font-style: italic;">"C-c D v"</span> . org-download-video-link-at-point)
             (<span style="font-style: italic;">"C-c D a"</span> . org-download-audio-link-at-point)
             (<span style="font-style: italic;">"C-c D ="</span> . org-show-media-duration-at-point)
             (<span style="font-style: italic;">"C-c !"</span>   . org-readable)
             (<span style="font-style: italic;">"C-c C-a"</span> . nil)
             (<span style="font-style: italic;">"C-,"</span>     . nil)
             (<span style="font-style: italic;">"M-h"</span>     . nil))

  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">attach</span>
  (<span style="font-weight: bold;">setq</span> org-attach-preferred-new-method nil)

  (<span style="font-weight: bold;">setq</span> org-file-apps
        '((t . (<span style="font-weight: bold;">lambda</span> (file-path link-string)
                 (my/view-file file-path)))))

  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">basic</span>
  (<span style="font-weight: bold;">setq</span> org-hide-leading-stars t)
  (<span style="font-weight: bold;">setq</span> org-comment-string <span style="font-style: italic;">"####"</span>)
  (<span style="font-weight: bold;">setq</span> org-pretty-entities t)
  (<span style="font-weight: bold;">setq</span> org-use-sub-superscripts '{}) <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">use _{}/^{} for sub/super script</span>

  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">tag/property</span>
  (<span style="font-weight: bold;">setq</span> org-use-tag-inheritance <span style="font-style: italic;">"ARCHIVE"</span>)
  (<span style="font-weight: bold;">setq</span> org-tags-column -57)
  (<span style="font-weight: bold;">setq</span> org-global-properties
        '((<span style="font-style: italic;">"Effort_ALL"</span>. <span style="font-style: italic;">"0 0:10 0:20 0:30 1:00 1:30 2:00 3:00 4:00 6:00 8:00"</span>)))
  (<span style="font-weight: bold;">setq</span> org-use-property-inheritance <span style="font-style: italic;">"TIMELIMIT.*"</span>)
  (<span style="font-weight: bold;">setq</span> org-highest-priority ?A)
  (<span style="font-weight: bold;">setq</span> org-lowest-priority ?Z)
  (<span style="font-weight: bold;">setq</span> org-default-priority ?E)

  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">todo</span>
  (<span style="font-weight: bold;">setq</span> org-enforce-todo-dependencies t)
  (<span style="font-weight: bold;">setq</span> org-todo-keywords
        `((sequence ,(format <span style="font-style: italic;">"%s(t/!)"</span> org-todo-keyword-0)
                    ,(format <span style="font-style: italic;">"%s(u/!)"</span> org-warning-keyword-0)
                    ,(format <span style="font-style: italic;">"%s(g/!)"</span> org-todo-keyword-1)
                    ,(format <span style="font-style: italic;">"%s(i/!)"</span> org-todo-keyword-2)
                    <span style="font-style: italic;">"|"</span>
                    ,(format <span style="font-style: italic;">"%s(d/@)"</span> org-done-keyword-0)
                    ,(format <span style="font-style: italic;">"%s(x/@)"</span> org-done-keyword-1)
                    ,(format <span style="font-style: italic;">"%s(p/@)"</span> org-done-keyword-2))
          (sequence ,(format <span style="font-style: italic;">"%s(a/!)"</span> org-todo-keyword-3)
                    <span style="font-style: italic;">"|"</span>
                    ,(format <span style="font-style: italic;">"%s(d/@)"</span> org-done-keyword-0)
                    ,(format <span style="font-style: italic;">"%s(x/@)"</span> org-done-keyword-1)
                    ,(format <span style="font-style: italic;">"%s(p/@)"</span> org-done-keyword-2))
          (sequence ,(format <span style="font-style: italic;">"%s(t/!)"</span> org-todo-keyword-0)
                    ,(format <span style="font-style: italic;">"%s(s/!)"</span> org-todo-keyword-4)
                    <span style="font-style: italic;">"|"</span>
                    ,(format <span style="font-style: italic;">"%s(x/@)"</span> org-done-keyword-1)
                    ,(format <span style="font-style: italic;">"%s(p/@)"</span> org-done-keyword-2))))
  (<span style="font-weight: bold;">setq</span> org-todo-keyword-faces
        `((,org-warning-keyword-0 . <span style="font-style: italic;">"red1"</span>)
          (,org-todo-keyword-0    . <span style="font-style: italic;">"green1"</span>)
          (,org-todo-keyword-1    . <span style="font-style: italic;">"DeepPink1"</span>)
          (,org-todo-keyword-2    . <span style="font-style: italic;">"DodgerBlue1"</span>)
          (,org-todo-keyword-3    . <span style="font-style: italic;">"chocolate"</span>)
          (,org-todo-keyword-4    . <span style="font-style: italic;">"SpringGreen"</span>)
          (,org-done-keyword-0    . <span style="font-style: italic;">"gray30"</span>)
          (,org-done-keyword-1    . <span style="font-style: italic;">"dark gray"</span>)
          (,org-done-keyword-2    . <span style="font-style: italic;">"sea green"</span>)))
  (add-hook  'org-after-todo-state-change-hook
             (<span style="font-weight: bold;">lambda</span> ()
               (<span style="font-weight: bold;">save-excursion</span>
                 (<span style="font-weight: bold;">let*</span> ((element (org-element-at-point))
                        (todo-state (org-get-todo-state))
                        (tags (org-get-tags))
                        (priority (org-element-property <span style="font-weight: bold;">:priority</span> element))
                        (category (org-entry-get (point) <span style="font-style: italic;">"CATEGORY"</span>))
                        (style (org-entry-get (point) <span style="font-style: italic;">"STYLE"</span>)))
                   <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">remove priority level when the to-do state is changed to DN|CX|PD</span>
                   (<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">and</span>
                          (s-matches? (format <span style="font-style: italic;">"%1$s</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">|</span><span style="font-style: italic;">%2$s</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">|</span><span style="font-style: italic;">%3$s"</span>
                                              org-done-keyword-0
                                              org-done-keyword-1
                                              org-done-keyword-2)
                                      todo-state)
                          (<span style="font-weight: bold;">bound-and-true-p</span> priority))
                     (org-priority ? ))
                   <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">remove DN state if CATEGORY of the entry is "Cyclic"</span>
                   (<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">and</span> (string= category <span style="font-style: italic;">"Cyclic"</span>)
                              (string= todo-state org-done-keyword-0)
                              (not (member <span style="font-style: italic;">"web"</span> tags))
                              (not (string= style <span style="font-style: italic;">"habit"</span>)))
                     (org-todo <span style="font-style: italic;">""</span>))))))
  (add-hook 'org-after-todo-statistics-hook
            (<span style="font-weight: bold;">lambda</span> (n-done n-not-done)
              <span style="font-style: italic;">"Switch project entry to DONE when all subentries are done, to empty otherwise."</span>
              (<span style="font-weight: bold;">when</span> (member <span style="font-style: italic;">"project"</span> (org-get-tags))
                (org-todo (<span style="font-weight: bold;">if</span> (= n-not-done 0)
                              (<span style="font-weight: bold;">prog1</span> org-done-keyword-0
                                (org-add-planning-info 'closed <span style="font-style: italic;">"now"</span>))
                            <span style="font-style: italic;">""</span>)))))

  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">time</span>
  (<span style="font-weight: bold;">setq</span> org-duration-format
        '((<span style="font-style: italic;">"d"</span> . nil)
          (special . h:mm)))

  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">time-stamp</span>
  (<span style="font-weight: bold;">setq</span> org-time-stamp-custom-formats
        '(<span style="font-style: italic;">"&lt;%m-%d %a&gt;"</span> . <span style="font-style: italic;">"&lt;%H:%M&gt;"</span>))
  (<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">org-display-iso-week-at-point</span> ()
    <span style="font-style: italic;">"Display ISO 8601 week number correspoinds to time stamp at point."</span>
    (<span style="font-weight: bold;">interactive</span>)
    (<span style="font-weight: bold;">let</span> ((ts (org-timestamp-at-point)))
      (<span style="font-weight: bold;">when</span> ts
        (message <span style="font-style: italic;">"W%s"</span> (format-time-string <span style="font-style: italic;">"%V"</span> (org-read-date nil t ts nil))))))
  (<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">org-timestamp-at-point</span> ()
    <span style="font-style: italic;">"Return time stamp string at point."</span>
    (<span style="font-weight: bold;">let</span> ((ts-bound (org-in-regexp (org-re-timestamp 'all))))
      (<span style="font-weight: bold;">when</span> ts-bound
        (buffer-substring (car ts-bound) (cdr ts-bound)))))

  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">logging</span>
  (<span style="font-weight: bold;">setq</span> org-log-done 'time)
  (<span style="font-weight: bold;">setq</span> org-log-into-drawer t)
  (<span style="font-weight: bold;">setq</span> org-log-states-order-reversed t)
  (<span style="font-weight: bold;">setq</span> org-reverse-note-order nil)
  (add-hook 'org-log-buffer-setup-hook
            (<span style="font-weight: bold;">lambda</span> ()
              (<span style="font-weight: bold;">setq</span> skk-dcomp-activate 'eolp)
              (<span style="font-weight: bold;">setq</span> skk-dcomp-multiple-activate nil)))

  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">clock table</span>
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">work around for the bug in emacs 25</span>
  (<span style="font-weight: bold;">defalias</span> '<span style="font-weight: bold;">calendar-absolute-from-iso</span> 'calendar-iso-to-absolute)

  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">image</span>
  (<span style="font-weight: bold;">setq</span> org-image-actual-width 100)

  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">structure templates</span>
  (add-to-list 'org-structure-template-alist (cons <span style="font-style: italic;">"sh"</span> <span style="font-style: italic;">"src shell"</span>))
  (add-to-list 'org-structure-template-alist (cons <span style="font-style: italic;">"tx"</span> <span style="font-style: italic;">"src text"</span>))
  (add-to-list 'org-structure-template-alist (cons <span style="font-style: italic;">"el"</span> <span style="font-style: italic;">"src emacs-lisp"</span>))
  (add-to-list 'org-structure-template-alist (cons <span style="font-style: italic;">"py"</span> <span style="font-style: italic;">"src python"</span>)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgaf61452" class="outline-4">
<h4 id="orgaf61452">org-agenda</h4>
<div class="outline-text-4" id="text-orgaf61452">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package org-agenda
  <span style="font-weight: bold;">:after</span> (org org-ql my/org-archive)
  <span style="font-weight: bold;">:bind</span> (<span style="font-weight: bold;">:map</span> org-agenda-mode-map
              (<span style="font-style: italic;">"C-j"</span> . org-agenda-switch-to)
              (<span style="font-style: italic;">"M"</span> . org-agenda-month-view))
  <span style="font-weight: bold;">:hook</span>
  (org-agenda-mode . (<span style="font-weight: bold;">lambda</span> ()
                       (delete-other-windows)
                       (org-agenda-to-appt t '((category <span style="font-style: italic;">"appt"</span>)))))
  <span style="font-weight: bold;">:custom</span>
  (org-agenda-start-on-weekday 1)
  (org-agenda-skip-deadline-if-done t)
  (org-agenda-include-diary t)
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">following three are for fast agenda view building</span>
  (org-agenda-inhibit-startup t)
  (org-agenda-dim-blocked-tasks nil)
  (org-agenda-use-tag-inheritance nil)
  (org-agenda-files (directory-files (expand-file-name <span style="font-style: italic;">"agenda"</span> org-directory) t <span style="font-style: italic;">"</span><span style="font-weight: bold; font-style: italic;">\</span><span style="font-style: italic;">.org$"</span>))
  (org-agenda-prefix-format '((agenda   . <span style="font-style: italic;">"%?-12t% s"</span>)
                              (timeline . <span style="font-style: italic;">"  %s"</span>)
                              (todo     . <span style="font-style: italic;">" "</span>)
                              (tags     . <span style="font-style: italic;">" "</span>)
                              (search   . <span style="font-style: italic;">" "</span>)))
  (org-agenda-custom-commands
   `((<span style="font-style: italic;">"a"</span> <span style="font-style: italic;">"Week-agenda"</span>
      agenda <span style="font-style: italic;">""</span>
      ((org-agenda-skip-function
        (<span style="font-weight: bold;">lambda</span> ()
          <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">skip entry which has 'web' tag even if it has deadline</span>
          (<span style="font-weight: bold;">and</span> (<span style="font-weight: bold;">save-excursion</span>
                 (<span style="font-weight: bold;">let</span> ((tags (org-get-tags)))
                   (member <span style="font-style: italic;">"web"</span> tags)))
               (<span style="font-weight: bold;">progn</span> (outline-next-heading) (point)))))))
     (<span style="font-style: italic;">"r"</span> . <span style="font-style: italic;">"Search for all record files"</span>)
     (<span style="font-style: italic;">"rs"</span> <span style="font-style: italic;">"Entries containing search words entry or headline."</span>
      search <span style="font-style: italic;">""</span>
      ((org-agenda-files my/org-archive-files)
       (org-agenda-sorting-strategy '(time-down))))
     (<span style="font-style: italic;">"rm"</span> <span style="font-style: italic;">"Match a TAGS/PROP/TODO query in record file"</span>
      tags <span style="font-style: italic;">""</span>
      ((org-agenda-files my/org-archive-files)
       (org-agenda-sorting-strategy '(time-down))))
     (<span style="font-style: italic;">"o"</span> . <span style="font-style: italic;">"someday list"</span>)
     (<span style="font-style: italic;">"om"</span> <span style="font-style: italic;">"someday to craft"</span>
      ((org-ql-search-block `(<span style="font-weight: bold;">and</span> (todo ,org-todo-keyword-4)
                                  (tags-expanded <span style="font-style: italic;">"AC_CRAFT"</span>))
                            ((org-ql-block-header <span style="font-style: italic;">"Someday to craft"</span>))))
      ((org-agenda-files my/org-archive-files)
       (org-agenda-sorting-strategy '(priority-down))))
     (<span style="font-style: italic;">"op"</span> <span style="font-style: italic;">"someday to purchase"</span>
      ((org-ql-search-block `(<span style="font-weight: bold;">and</span> (todo ,org-todo-keyword-4)
                                  (tags <span style="font-style: italic;">"ac_purchase"</span>))
                            ((org-ql-block-header <span style="font-style: italic;">"Someday to purchase"</span>))))
      ((org-agenda-files my/org-archive-files)
       (org-agenda-sorting-strategy '(priority-down))))
     (<span style="font-style: italic;">"oc"</span> <span style="font-style: italic;">"someday to cook"</span>
      ((org-ql-search-block `(<span style="font-weight: bold;">and</span> (todo ,org-todo-keyword-4)
                                  (tags <span style="font-style: italic;">"ac_cook"</span>))
                            ((org-ql-block-header <span style="font-style: italic;">"Someday to cook"</span>))))
      ((org-agenda-files my/org-archive-files)
       (org-agenda-sorting-strategy '(priority-down))))
     (<span style="font-style: italic;">"O"</span> <span style="font-style: italic;">"all someday entries"</span>
      ((org-ql-search-block `(<span style="font-weight: bold;">and</span> (todo ,org-todo-keyword-4)
                                  (tags-expanded <span style="font-style: italic;">"AC_CRAFT"</span>))
                            ((org-ql-block-header <span style="font-style: italic;">"Someday to craft"</span>)))
       (org-ql-search-block `(<span style="font-weight: bold;">and</span> (todo ,org-todo-keyword-4)
                                  (tags <span style="font-style: italic;">"ac_purchase"</span>))
                            ((org-ql-block-header <span style="font-style: italic;">"Someday to purchase"</span>)))
       (org-ql-search-block `(<span style="font-weight: bold;">and</span> (todo ,org-todo-keyword-4)
                                  (tags <span style="font-style: italic;">"ac_cook"</span>))
                            ((org-ql-block-header <span style="font-style: italic;">"Someday to cook"</span>)))
       (org-ql-search-block `(<span style="font-weight: bold;">and</span> (todo ,org-todo-keyword-4)
                                  (not (tags-expanded <span style="font-style: italic;">"ac_purchase"</span> <span style="font-style: italic;">"ac_cook"</span> <span style="font-style: italic;">"AC_CRAFT"</span>)))
                            ((org-ql-block-header <span style="font-style: italic;">"Someday things"</span>))))
      ((org-agenda-files my/org-archive-files)))
     (<span style="font-style: italic;">"l"</span> <span style="font-style: italic;">"Log entries in a week"</span>
      agenda <span style="font-style: italic;">""</span>
      ((org-agenda-span (<span style="font-weight: bold;">if</span> (equal current-prefix-arg '(4))
                            'day 'week))
       (org-agenda-start-with-log-mode t)
       (org-agenda-include-inactive-timestamps nil)
       (org-agenda-include-diary t)
       (org-agenda-sorting-strategy
        '(time-up
          deadline-up
          todo-state-up
          priority-down))))
     (<span style="font-style: italic;">"L"</span> <span style="font-style: italic;">"Log entry timeline on today with default org-agenda-prefix-format"</span>
      agenda <span style="font-style: italic;">""</span>
      ((org-agenda-prefix-format (eval (car (get 'org-agenda-prefix-format 'standard-value))))
       (org-agenda-span (<span style="font-weight: bold;">if</span> (equal current-prefix-arg '(4))
                            'day 'week))
       (org-agenda-start-with-log-mode t)
       (org-agenda-include-inactive-timestamps nil)
       (org-agenda-include-diary t)
       (org-agenda-sorting-strategy
        '(time-up
          deadline-up
          todo-state-up
          priority-down))))
     <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">KEEP IN MIND</span>
     <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">invoking `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">org-clock-sum-all</span><span style="font-weight: bold; font-style: italic;">' is required before showing effort table</span>
     (<span style="font-style: italic;">"e"</span> . <span style="font-style: italic;">"Effort table"</span>)
     (<span style="font-style: italic;">"ei"</span> <span style="font-style: italic;">"today"</span>
      ((org-ql-search-block `(<span style="font-weight: bold;">or</span> (todo ,org-warning-keyword-0)
                                 (todo ,org-todo-keyword-2)
                                 (<span style="font-weight: bold;">and</span> (clocked <span style="font-weight: bold;">:on</span> today)
                                      (<span style="font-weight: bold;">or</span> (todo) (done))
                                      (not (habit))
                                      (not (tags <span style="font-style: italic;">"web"</span>))))
                            ((org-ql-block-header <span style="font-style: italic;">"Today's task"</span>))))
      ((org-agenda-overriding-header <span style="font-style: italic;">"Today's Task"</span>)
       (org-overriding-columns-format <span style="font-style: italic;">"%26ITEM(Task) %Effort(Effort){:} %CLOCKSUM_T(Today){:} %CLOCKSUM(Total)"</span>)
       (org-agenda-view-columns-initially t)
       (org-agenda-sorting-strategy '(todo-state-up priority-down deadline-up))))
     (<span style="font-style: italic;">"eg"</span> <span style="font-style: italic;">"this week"</span>
      ((org-ql-search-block `(<span style="font-weight: bold;">or</span> (todo ,org-warning-keyword-0)
                                 (todo ,org-todo-keyword-1)
                                 (todo ,org-todo-keyword-2))
                            ((org-ql-block-header <span style="font-style: italic;">"This Week's task"</span>))))
      ((org-agenda-overriding-header <span style="font-style: italic;">"This Week's Task"</span>)
       (org-overriding-columns-format <span style="font-style: italic;">"%26ITEM(Task) %Effort(Effort){:} %CLOCKSUM_T(Today){:} %CLOCKSUM(Total)"</span>)
       (org-agenda-view-columns-initially t)
       (org-agenda-sorting-strategy '(todo-state-up priority-down deadline-up))))
     (<span style="font-style: italic;">"ed"</span> <span style="font-style: italic;">"done task"</span>
      ((org-ql-search-block `(<span style="font-weight: bold;">or</span> (todo ,org-done-keyword-0)
                                 (todo ,org-done-keyword-1)
                                 (todo ,org-done-keyword-2))
                            ((org-ql-block-header <span style="font-style: italic;">"Done task"</span>))))
      ((org-agenda-overriding-header <span style="font-style: italic;">"Done Task"</span>)
       (org-overriding-columns-format <span style="font-style: italic;">"%26ITEM(Task) %Effort(Effort){:} %CLOCKSUM(Total){:}"</span>)
       (org-agenda-view-columns-initially t)
       (org-agenda-sorting-strategy '(todo-state-up priority-down deadline-up))))
     (<span style="font-style: italic;">"i"</span> <span style="font-style: italic;">"Today's agenda"</span>
      ((todo <span style="font-style: italic;">"Today's agenda"</span>
             ((org-agenda-sorting-strategy '(priority-up))))
       (org-ql-search-block `(heading ,(format-time-string <span style="font-style: italic;">"%Y-%m-%d %A"</span>))
                            ((org-agenda-files `(,(my/org-archive-file)))
                             (org-ql-block-header <span style="font-style: italic;">"Today's tree node"</span>)))
       (org-ql-search-block `(<span style="font-weight: bold;">or</span> (todo ,org-warning-keyword-0)
                                 (todo ,org-todo-keyword-2))
                            ((org-ql-block-header <span style="font-style: italic;">"Today's task"</span>)))
       (org-ql-search-block `(<span style="font-weight: bold;">and</span> (planning <span style="font-weight: bold;">:on</span> today)
                                  (not (todo ,org-todo-keyword-2
                                             ,org-done-keyword-0
                                             ,org-done-keyword-1
                                             ,org-done-keyword-2))
                                  (not (tags <span style="font-style: italic;">"web"</span>))
                                  (not (habit)))
                            ((org-ql-block-header <span style="font-style: italic;">"Scheduled/Deadlined on today"</span>)))
       (org-ql-search-block `(<span style="font-weight: bold;">and</span> (habit)
                                  (todo ,org-todo-keyword-0)
                                  (scheduled <span style="font-weight: bold;">:to</span> today)
                                  (not (tags <span style="font-style: italic;">"bad_habit"</span>))
                                  (not (tags-inherited <span style="font-style: italic;">"ARCHIVE"</span>)))
                            ((org-ql-block-header <span style="font-style: italic;">"Habits to take"</span>)))
       (org-ql-search-block `(<span style="font-weight: bold;">and</span> (ts-active <span style="font-weight: bold;">:on</span> today)
                                  (not (<span style="font-weight: bold;">or</span> (todo ,org-todo-keyword-2)
                                           (habit) (done))))
                            ((org-ql-block-header <span style="font-style: italic;">"Today's common event"</span>)))
       (org-ql-search-block '(<span style="font-weight: bold;">and</span> (done)
                                  (closed <span style="font-weight: bold;">:on</span> today))
                            ((org-ql-block-header <span style="font-style: italic;">"Completed tasks on today"</span>)))))
     (<span style="font-style: italic;">"g"</span> <span style="font-style: italic;">"This Week's agenda"</span>
      ((org-ql-search-block `(heading ,(format-time-string <span style="font-style: italic;">"%G-W%V"</span>))
                            ((org-agenda-files `(,(my/org-archive-file)))
                             (org-ql-block-header <span style="font-style: italic;">"This week's tree"</span>)))
       (org-ql-search-block `(<span style="font-weight: bold;">or</span> (todo ,org-todo-keyword-1))
                            ((org-ql-block-header <span style="font-style: italic;">"This week's tasks"</span>)))
       (org-ql-search-block `(<span style="font-weight: bold;">or</span> (todo ,org-warning-keyword-0)
                                 (todo ,org-todo-keyword-2))
                            ((org-ql-block-header <span style="font-style: italic;">"Today's tasks"</span>)))
       (org-ql-search-block `(<span style="font-weight: bold;">and</span> (planning <span style="font-weight: bold;">:from</span> 0 <span style="font-weight: bold;">:to</span> 6)
                                  (not (todo ,org-todo-keyword-2
                                             ,org-done-keyword-0
                                             ,org-done-keyword-1
                                             ,org-done-keyword-2))
                                  (not (tags <span style="font-style: italic;">"web"</span>))
                                  (not (habit)))
                            ((org-ql-block-header <span style="font-style: italic;">"Scheduled/Deadlined this week"</span>)))
       (org-ql-search-block `(<span style="font-weight: bold;">and</span> (<span style="font-weight: bold;">and</span> (ts-active <span style="font-weight: bold;">:from</span> 0 <span style="font-weight: bold;">:to</span> 6)
                                       (not (deadline))
                                       (not (scheduled))
                                       (not (closed)))
                                  (not (<span style="font-weight: bold;">or</span> (todo ,org-todo-keyword-1
                                                 ,org-todo-keyword-2)
                                           (done))))
                            ((org-ql-block-header <span style="font-style: italic;">"This week's common event"</span>))))
      ((org-agenda-sorting-strategy
        '(todo-state-up priority-down deadline-up))))
     (<span style="font-style: italic;">"c"</span> <span style="font-style: italic;">"actionable thing list"</span>
      ((org-ql-search-block `(<span style="font-weight: bold;">and</span> (todo ,org-todo-keyword-3)
                                  (not (deadline <span style="font-weight: bold;">:to</span> -1)))
                            ((org-ql-block-header <span style="font-style: italic;">"Doable things"</span>))))
      ((org-agenda-sorting-strategy
        '(todo-state-up priority-down deadline-up))))
     (<span style="font-style: italic;">"t"</span> <span style="font-style: italic;">"All tasks"</span>
      ((org-ql-search-block `(todo ,org-warning-keyword-0)
                            ((org-ql-block-header <span style="font-style: italic;">"Urgent task"</span>)))
       (org-ql-search-block `(todo ,org-todo-keyword-2)
                            ((org-ql-block-header <span style="font-style: italic;">"Today's task"</span>)))
       (org-ql-search-block `(todo ,org-todo-keyword-1)
                            ((org-ql-block-header <span style="font-style: italic;">"This week's task"</span>)))
       (org-ql-search-block `(todo ,org-todo-keyword-4)
                            ((org-ql-block-header <span style="font-style: italic;">"Someday's entries on agenda files"</span>)))
       (org-ql-search-block `(<span style="font-weight: bold;">and</span> (todo ,org-todo-keyword-0)
                                  (not (habit)))
                            ((org-ql-block-header <span style="font-style: italic;">"Remaining task"</span>)))))
     (<span style="font-style: italic;">"d"</span> <span style="font-style: italic;">"Done tasks"</span>
      ((org-ql-search-block '(done)
                            ((org-ql-block-header <span style="font-style: italic;">"Done/Canceled/Pending task"</span>)))))
     (<span style="font-style: italic;">"#"</span> <span style="font-style: italic;">"stuck project"</span>
      ((org-ql-search-block `(<span style="font-weight: bold;">and</span> (tags <span style="font-style: italic;">"project"</span>)
                                  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">exclude projects</span>
                                  (not (children (todo ,org-todo-keyword-0
                                                       ,org-todo-keyword-1
                                                       ,org-todo-keyword-2
                                                       ,org-todo-keyword-3))))
                            ((org-ql-block-header <span style="font-style: italic;">"Stuck projects"</span>)))))
     (<span style="font-style: italic;">"p"</span> <span style="font-style: italic;">"Projects"</span> tags <span style="font-style: italic;">"+project"</span>)
     (<span style="font-style: italic;">"h"</span> <span style="font-style: italic;">"Habits in consistency graph"</span>
      agenda <span style="font-style: italic;">""</span>
      ((org-agenda-span 'day)
       (org-agenda-use-time-grid nil)
       (org-agenda-prefix-format '((agenda . <span style="font-style: italic;">""</span>)))
       (org-habit-show-all-today t)
       (org-habit-graph-column 32)
       (org-habit-preceding-days 14)
       (org-habit-following-days 21)
       (org-agenda-sorting-strategy '(scheduled-up))
       <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">display habits only</span>
       (org-agenda-skip-function
        (<span style="font-weight: bold;">lambda</span> ()
          (<span style="font-weight: bold;">and</span> (<span style="font-weight: bold;">save-excursion</span>
                 (not (org-is-habit-p)))
               (<span style="font-weight: bold;">progn</span> (outline-next-heading) (point)))))))
     (<span style="font-style: italic;">"H"</span> <span style="font-style: italic;">"show all habits"</span>
      ((org-ql-search-block '(habit)
                            ((org-ql-block-header <span style="font-style: italic;">"All Habits"</span>))))
      ((org-agenda-sorting-strategy '(scheduled-up))))))
  <span style="font-weight: bold;">:config</span>
  (<span style="font-weight: bold;">dolist</span> (dir '(<span style="font-style: italic;">"archive"</span> <span style="font-style: italic;">"index"</span> <span style="font-style: italic;">"wiki"</span>))
    (mapc (<span style="font-weight: bold;">lambda</span> (org-file)
            (add-to-list 'org-agenda-text-search-extra-files
                         org-file))
          (directory-files (expand-file-name dir org-directory)
                           t
                           (<span style="font-weight: bold;">rx</span> (one-or-more not-newline)
                               (<span style="font-weight: bold;">or</span> <span style="font-style: italic;">".org"</span> <span style="font-style: italic;">".org.gpg"</span>)
                               line-end)))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">org-agenda-cmp-latest-clock-log</span> (a b)
  <span style="font-style: italic;">"Compare two org entry A and B in terms of clock log.</span>

<span style="font-style: italic;">This function can be used as `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">org-agenda-cmp-user-defined</span><span style="font-style: italic;">' in `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">org-agenda-sorting-strategy</span><span style="font-style: italic;">'."</span>
  (<span style="font-weight: bold;">let*</span> ((marker-a (get-text-property 1 'org-marker a))
         (time-a (org-get-latest-clock-log-time marker-a))
         (marker-b (get-text-property 1 'org-marker b))
         (time-b (org-get-latest-clock-log-time marker-b)))
    (<span style="font-weight: bold;">if</span> (time-less-p time-a time-b) -1 +1)))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">org-clock-sum-all</span> ()
  <span style="font-style: italic;">"Sum the times for all agenda files."</span>
  (<span style="font-weight: bold;">interactive</span>)
  (<span style="font-weight: bold;">save-excursion</span>
    (mapc (<span style="font-weight: bold;">lambda</span> (file)
            (<span style="font-weight: bold;">with-current-buffer</span> (<span style="font-weight: bold;">or</span> (org-find-base-buffer-visiting file)
                                     (find-file-noselect file))
              (org-clock-sum)
              (org-clock-sum-today)))
          (org-agenda-files))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">org-get-latest-clock-log-time</span> (pom)
  <span style="font-style: italic;">"Get the latest clock log time stamp in org entry at POM as a time object.</span>

<span style="font-style: italic;">If entry at POM has no clock log time stamp, this function returns 0."</span>
  (<span style="font-weight: bold;">org-with-point-at</span> pom
    (<span style="font-weight: bold;">save-excursion</span>
      (<span style="font-weight: bold;">setq</span> end-of-subtree (org-end-of-subtree))
      (<span style="font-weight: bold;">setq</span> latest-time 0)
      (org-back-to-heading t)
      (org-show-all)
      (<span style="font-weight: bold;">while</span> (re-search-forward org-drawer-regexp end-of-subtree t)
        (<span style="font-weight: bold;">when</span> (string= (match-string 1) (org-clock-drawer-name))
          (<span style="font-weight: bold;">while</span> (<span style="font-weight: bold;">progn</span>
                   (forward-line 1)
                   (<span style="font-weight: bold;">when</span> (org-match-line org-clock-ts-line-re)
                     (<span style="font-weight: bold;">setq</span> match-ts
                           (<span style="font-weight: bold;">if</span> (match-string 3)
                               (match-string 3) (match-string 1)))
                     (<span style="font-weight: bold;">when</span> (time-less-p latest-time
                                        (apply 'encode-time (parse-time-string match-ts)))
                       (<span style="font-weight: bold;">setq</span> latest-time (apply 'encode-time (parse-time-string match-ts)))))
                   (not (org-match-line org-clock-drawer-end-re))))))))
  latest-time)
</pre>
</div>
</div>
</div>

<div id="outline-container-org5e6b580" class="outline-4">
<h4 id="org5e6b580">org-capture</h4>
<div class="outline-text-4" id="text-org5e6b580">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package org-capture
  <span style="font-weight: bold;">:after</span> (org my/org-archive)
  <span style="font-weight: bold;">:hook</span>
  (org-capture-mode . (<span style="font-weight: bold;">lambda</span> ()
                        (skk-mode 1)
                        (delete-other-windows)))
  <span style="font-weight: bold;">:custom</span>
  (org-capture-bookmark nil)
  (org-capture-templates
   `((<span style="font-style: italic;">"t"</span> <span style="font-style: italic;">"Task"</span>
      entry (id <span style="font-style: italic;">"adcd63ea-f81a-4909-b659-6e5794052fcc"</span>)
      ,(format <span style="font-style: italic;">"* %s %%?\n%%U\n"</span>
               org-todo-keyword-0))
     (<span style="font-style: italic;">"p"</span> <span style="font-style: italic;">"Project"</span>
      entry (id <span style="font-style: italic;">"adcd63ea-f81a-4909-b659-6e5794052fcc"</span>)
      <span style="font-style: italic;">"* %? [/] :project:\n %U\n- [ ] insert ID property if necessary"</span>
      <span style="font-weight: bold;">:prepend</span> t <span style="font-weight: bold;">:jump-to-captured</span> t)
     (<span style="font-style: italic;">"n"</span> <span style="font-style: italic;">"Note"</span>
      entry (file+datetree ,my/org-archive-file)
      <span style="font-style: italic;">"* %? %^g\n %U\n"</span> <span style="font-weight: bold;">:tree-type</span> week)
     (<span style="font-style: italic;">"m"</span> <span style="font-style: italic;">"Memo"</span>
      entry (file <span style="font-style: italic;">"~/org/note/memo.org"</span>)
      <span style="font-style: italic;">"* %U\n#+begin_src %^{Lnaguage|text}\n%(my-org-capture-filter-memo \"%i\")\n#+end_src"</span>
      <span style="font-weight: bold;">:jump-to-captured</span> t
      <span style="font-weight: bold;">:immediate-finish</span> t)
     (<span style="font-style: italic;">"s"</span> <span style="font-style: italic;">"Someday memo"</span>)
     (<span style="font-style: italic;">"ss"</span> <span style="font-style: italic;">"any"</span>
      entry (file+datetree ,my/org-archive-file)
      ,(format <span style="font-style: italic;">"* %s %%?\n%%U\n%%a"</span>
               org-todo-keyword-4)
      <span style="font-weight: bold;">:tree-type</span> week)
     (<span style="font-style: italic;">"sr"</span> <span style="font-style: italic;">"purchase book"</span>
      entry (file+datetree ,my/org-archive-file)
      ,(format <span style="font-style: italic;">"* %s %%? :ac_purchase:book:\n%%U\n%%a"</span>
               org-todo-keyword-4)
      <span style="font-weight: bold;">:tree-type</span> week)
     (<span style="font-style: italic;">"sc"</span> <span style="font-style: italic;">"cook"</span>
      entry (file+datetree ,my/org-archive-file)
      ,(format <span style="font-style: italic;">"* %s %%? :ac_cook:\n%%U\n%%a"</span>
               org-todo-keyword-4)
      <span style="font-weight: bold;">:tree-type</span> week)
     (<span style="font-style: italic;">"sp"</span> <span style="font-style: italic;">"purchase"</span>
      entry (file+datetree ,my/org-archive-file)
      ,(format <span style="font-style: italic;">"* %s %%? :ac_purchase:\n%%U\n%%a"</span>
               org-todo-keyword-4)
      <span style="font-weight: bold;">:tree-type</span> week)
     (<span style="font-style: italic;">"D"</span> <span style="font-style: italic;">"Drill"</span>)
     (<span style="font-style: italic;">"Dd"</span> <span style="font-style: italic;">"Drill entry in currently clocking or today's entry."</span>
      entry (<span style="font-weight: bold;">function</span> org-goto-clocking-or-today)
      <span style="font-style: italic;">"* %i :drill:\n[%?]"</span>)
     (<span style="font-style: italic;">"De"</span> <span style="font-style: italic;">"English drill entry in currently clocking or today's entry."</span>
      entry (<span style="font-weight: bold;">function</span> org-goto-clocking-or-today)
      <span style="font-style: italic;">"* %i :drill:fd_en:\n[%^C%?]\n- %a"</span>)
     (<span style="font-style: italic;">"M"</span> <span style="font-style: italic;">"Append memo to clocking task"</span>
      item (clock)
      <span style="font-style: italic;">"- %i%?"</span>))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my-org-capture-filter-memo</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> str)
  <span style="font-style: italic;">"Replace semantic representation in `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">org-mode</span><span style="font-style: italic;">' with plain string in STR."</span>
  (<span style="font-weight: bold;">cond</span>
   ((stringp str)
    (replace-regexp-in-string <span style="font-style: italic;">"^</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">(</span><span style="font-style: italic;">*+ </span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">)</span><span style="font-style: italic;">"</span> <span style="font-style: italic;">",\\1"</span> str))
   (t <span style="font-style: italic;">""</span>)))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">org-goto-clocking-or-today</span> ()
  <span style="font-style: italic;">"Go to currently clocking entry.</span>

<span style="font-style: italic;">If no entry is clocked or CATEGORY on clocking entry is \"Cyclic\",</span>
<span style="font-style: italic;">go to today's entry in record file."</span>
  (<span style="font-weight: bold;">if</span> (<span style="font-weight: bold;">and</span> (org-clocking-p)
           (<span style="font-weight: bold;">save-excursion</span>
             (<span style="font-weight: bold;">with-current-buffer</span> (org-clocking-buffer)
               (org-clock-jump-to-current-clock)
               (org-back-to-heading)
               (not (string=
                     (org-entry-get (point) <span style="font-style: italic;">"CATEGORY"</span> t)
                     <span style="font-style: italic;">"Cyclic"</span>)))))
      (org-clock-goto)
    (<span style="font-weight: bold;">let*</span> ((now (decode-time (current-time)))
           (day (nth 3 now))
           (month (nth 4 now))
           (year (nth 5 now))
           (org-refile-targets
            `((,my/org-archive-file <span style="font-weight: bold;">:regexp</span> . ,(format <span style="font-style: italic;">"%04d-%02d-%02d"</span> year month day)))))
      (find-file my/org-archive-file)
      (org-datetree-find-iso-week-create `(,month ,day ,year) nil))))
</pre>
</div>
</div>
</div>

<div id="outline-container-org5d4595c" class="outline-4">
<h4 id="org5d4595c">org-timer and org-clock</h4>
<div class="outline-text-4" id="text-org5d4595c">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package org-timer
  <span style="font-weight: bold;">:after</span> org
  <span style="font-weight: bold;">:hook</span>
  (org-timer-done . (<span style="font-weight: bold;">lambda</span> ()
                      (<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">and</span> (org-clocking-p)
                                 org-clock-marker)
                        (<span style="font-weight: bold;">let</span> ((alert (org-entry-get org-clock-marker
                                                    <span style="font-style: italic;">"ALERT"</span>)))
                          (<span style="font-weight: bold;">if</span> (<span style="font-weight: bold;">and</span> (stringp alert)
                                   (string= alert <span style="font-style: italic;">"alarm"</span>))
                              (alert <span style="font-style: italic;">"Timer Done!"</span> <span style="font-weight: bold;">:style</span> 'alarm)
                            (alert <span style="font-style: italic;">"Timer Done!"</span> <span style="font-weight: bold;">:style</span> 'fringe <span style="font-weight: bold;">:mode</span> 'org-mode <span style="font-weight: bold;">:buffer</span> (org-clocking-buffer) <span style="font-weight: bold;">:severity</span> 'trivial)))))))

(use-package org-clock
  <span style="font-weight: bold;">:after</span> org
  <span style="font-weight: bold;">:hook</span>
  ((org-clock-in org-clock-out org-clock-cancel) . save-buffer)
  (org-clock-in-prepare . my/org-clock-in-set-timer)
  (org-clock-out . my/org-clock-out-have-a-break)
  ((org-clock-out org-clock-cancel) .
   (<span style="font-weight: bold;">lambda</span> () (<span style="font-weight: bold;">and</span> org-timer-countdown-timer
                   (org-timer-stop))))
  <span style="font-weight: bold;">:custom</span>
  (org-clock-out-when-done t)
  (org-clock-persist t)
  (org-clock-persist-query-resume nil)
  (org-clock-string-limit 20)
  (org-clock-continuously t)
  (org-clock-ask-before-exiting nil)
  (org-clock-out-remove-zero-time-clocks t)
  <span style="font-weight: bold;">:config</span>
  (org-clock-persistence-insinuate)
  (<span style="font-weight: bold;">defconst</span> <span style="font-weight: bold; font-style: italic;">org-clock-ts-line-re</span>
    (concat <span style="font-style: italic;">"^[ \t]*"</span> org-clock-string <span style="font-style: italic;">"[ \t]*"</span> org-tsr-regexp-both)
    <span style="font-style: italic;">"Matches a line with clock time stamp."</span>))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/org-clock-in-set-timer</span> ()
  <span style="font-style: italic;">"Start count down timer for a clocked in entry.</span>

<span style="font-style: italic;">If the entry has ATTENTION_SPAN property, use it for `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">org-timer-default-timer</span><span style="font-style: italic;">'.</span>
<span style="font-style: italic;">Otherwise count down time is Effort property value.</span>
<span style="font-style: italic;">In neither case, count down time is 25 min which is suggested in the Pomodoro-technique."</span>
  (<span style="font-weight: bold;">let</span> ((todo (org-get-todo-state))
        (attention-span (org-entry-get (point) <span style="font-style: italic;">"ATTENTION_SPAN"</span> 'selective))
        (effort (org-entry-get (point) <span style="font-style: italic;">"Effort"</span> 'selective)))
    (<span style="font-weight: bold;">when</span> org-clock-clocking-in
      (org-clock-out))
    (<span style="font-weight: bold;">cond</span>
     ((stringp attention-span)
      (<span style="font-weight: bold;">let</span> ((org-timer-default-timer attention-span))
        (org-timer-set-timer '(64))))
     ((<span style="font-weight: bold;">and</span> (stringp effort)
           (ts&lt; (ts-parse effort) (ts-parse <span style="font-style: italic;">"01:40"</span>)))
      (org-timer-set-timer '(16)))
     (todo
      (<span style="font-weight: bold;">let</span> ((org-timer-default-timer <span style="font-style: italic;">"25"</span>))
        (org-timer-set-timer '(64)))))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/org-clock-out-without-remove</span> ()
  <span style="font-style: italic;">"Clock out and save record even if clock time is zero."</span>
  (<span style="font-weight: bold;">interactive</span>)
  (<span style="font-weight: bold;">let</span> ((org-clock-out-remove-zero-time-clocks nil))
    (org-clock-out nil t)))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/org-clock-out-have-a-break</span> ()
  <span style="font-style: italic;">"Clock in 'Break' task if the task about to clock out manually has any kind of TODO keyword."</span>
  (<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">and</span> (not org-clock-clocking-in)
             (org-get-todo-state))
    (org-id-goto <span style="font-style: italic;">"d49d97de-58ec-4e41-b58c-491a9e216e1c"</span>)
    (org-clock-in)
    (org-save-all-org-buffers)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org77e37e8" class="outline-4">
<h4 id="org77e37e8">org-refile</h4>
<div class="outline-text-4" id="text-org77e37e8">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package org-refile
  <span style="font-weight: bold;">:after</span> org
  <span style="font-weight: bold;">:custom</span>
  (org-refile-targets
   `((org-agenda-files <span style="font-weight: bold;">:tag</span> . <span style="font-style: italic;">"project"</span>)
     (,(directory-files-recursively org-directory <span style="font-style: italic;">"\\.org$"</span>) <span style="font-weight: bold;">:tag</span> . <span style="font-style: italic;">"refile"</span>))))
</pre>
</div>
</div>
</div>

<div id="outline-container-org84d3681" class="outline-4">
<h4 id="org84d3681">org-plot</h4>
<div class="outline-text-4" id="text-org84d3681">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package org-plot
  <span style="font-weight: bold;">:straight</span> gnuplot gnuplot-mode
  <span style="font-weight: bold;">:after</span> org)
</pre>
</div>
</div>
</div>

<div id="outline-container-org1c3dc30" class="outline-4">
<h4 id="org1c3dc30">org-id</h4>
<div class="outline-text-4" id="text-org1c3dc30">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package org-id
  <span style="font-weight: bold;">:after</span> org
  <span style="font-weight: bold;">:custom</span>
  (org-id-locations-file
   (expand-file-name <span style="font-style: italic;">".org-id-locations"</span> org-directory))
  (org-id-track-globally t)
  (org-id-extra-files
   (append org-agenda-text-search-extra-files))
  (org-id-link-to-org-use-id 'create-if-interactive))
</pre>
</div>
</div>
</div>

<div id="outline-container-org120afbf" class="outline-4">
<h4 id="org120afbf">org links (ol)</h4>
<div class="outline-text-4" id="text-org120afbf">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package ol
  <span style="font-weight: bold;">:after</span> org
  <span style="font-weight: bold;">:custom</span>
  (org-link-elisp-confirm-function nil)
  <span style="font-weight: bold;">:config</span>
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">the file which is referred via ong link opens in same window</span>
  (<span style="font-weight: bold;">setf</span> (alist-get 'file org-link-frame-setup) 'find-file)
  (org-link-set-parameters <span style="font-style: italic;">"src"</span> <span style="font-weight: bold;">:follow</span> #'org-babel-ref-resolve)
  (add-to-list 'org-open-at-point-functions 'org-open-at-point-link)
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">set 'sudo' link type to invoke command with root privilege</span>
  (org-link-set-parameters
   <span style="font-style: italic;">"sudo"</span>
   (<span style="font-weight: bold;">lambda</span> (cmd)
     <span style="font-style: italic;">"Run CMD with sudo."</span>
     (shell-command
      (concat <span style="font-style: italic;">"echo "</span> (shell-quote-argument (read-passwd <span style="font-style: italic;">"Password? "</span>))
              <span style="font-style: italic;">" | sudo -S "</span> cmd)))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">org-open-at-point-link</span> ()
  <span style="font-style: italic;">"This function is responsible for org links when user calls `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">org-open-at-point</span><span style="font-style: italic;">'."</span>
  (<span style="font-weight: bold;">let*</span> ((context (org-element-lineage
                   (org-element-context)
                   '(link)
                   t))
         (type (org-element-property <span style="font-weight: bold;">:type</span> context))
         (path (org-element-property <span style="font-weight: bold;">:path</span> context))
         (app (org-element-property <span style="font-weight: bold;">:application</span> context))
         (search-option (org-element-property <span style="font-weight: bold;">:search-option</span> context)))
    (<span style="font-weight: bold;">if</span> (stringp type)
        (<span style="font-weight: bold;">cond</span>
         ((string-match-p <span style="font-style: italic;">"https?"</span> type)
          (<span style="font-weight: bold;">let</span> ((url-pos (split-location-uri (org-link-unescape (concat type <span style="font-style: italic;">":"</span> path)))))
            (<span style="font-weight: bold;">cl-case</span> (prefix-numeric-value current-prefix-arg)
              (16 (browse-url-default-browser (car url-pos)))
              (4 (eww-browse-url (car url-pos)))
              (t (open-url (car url-pos) (cadr url-pos))))
            t))
         ((string= type <span style="font-style: italic;">"file"</span>)
          (<span style="font-weight: bold;">let</span> ((line-search (<span style="font-weight: bold;">cond</span> ((not search-option) nil)
                                   ((string-match-p <span style="font-style: italic;">"\\`[0-9]+\\'"</span> search-option)
                                    (list (string-to-number search-option)))
                                   (t (list nil search-option)))))
            (apply #'my/org-open-file
                   path
                   (<span style="font-weight: bold;">cond</span>
                    ((equal app <span style="font-style: italic;">"sys"</span>) 'system)
                    ((equal app <span style="font-style: italic;">"emacs"</span>) 'emacs)
                    (t nil))
                   line-search))
          t))
      (my/enter-thing-at-point))))
</pre>
</div>
</div>
</div>

<div id="outline-container-org19a7974" class="outline-4">
<h4 id="org19a7974">org-archive</h4>
<div class="outline-text-4" id="text-org19a7974">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package org-archive
  <span style="font-weight: bold;">:after</span> org
  <span style="font-weight: bold;">:custom</span>
  (org-archive-default-command 'org-archive-set-tag)
  (org-cycle-open-archived-trees t))
</pre>
</div>
</div>
</div>

<div id="outline-container-org8f6b3ec" class="outline-4">
<h4 id="org8f6b3ec">org-list</h4>
<div class="outline-text-4" id="text-org8f6b3ec">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package org-list
  <span style="font-weight: bold;">:after</span> org
  <span style="font-weight: bold;">:custom</span>
  (org-list-demote-modify-bullet '((<span style="font-style: italic;">"-"</span> . <span style="font-style: italic;">"+"</span>) (<span style="font-style: italic;">"+"</span> . <span style="font-style: italic;">"-"</span>) (<span style="font-style: italic;">"*"</span> . <span style="font-style: italic;">"-"</span>)
                                   (<span style="font-style: italic;">"1."</span> . <span style="font-style: italic;">"1)"</span>) (<span style="font-style: italic;">"1)"</span> . <span style="font-style: italic;">"1."</span>) (<span style="font-style: italic;">"*"</span> . <span style="font-style: italic;">"1."</span>)))
  (org-cycle-include-plain-lists 'integrate)
  (org-list-use-circular-motion t)
  (org-list-allow-alphabetical t)
  <span style="font-weight: bold;">:config</span>
  (<span style="font-weight: bold;">setf</span> org-list-forbidden-blocks nil))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgae5be5a" class="outline-4">
<h4 id="orgae5be5a">org-indent</h4>
<div class="outline-text-4" id="text-orgae5be5a">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package org-indent
  <span style="font-weight: bold;">:after</span> org
  <span style="font-weight: bold;">:hook</span>
  (org-mode . org-indent-mode)
  <span style="font-weight: bold;">:custom</span>
  (org-startup-indented t))
</pre>
</div>
</div>
</div>

<div id="outline-container-org3ef4191" class="outline-4">
<h4 id="org3ef4191">org-crypt</h4>
<div class="outline-text-4" id="text-org3ef4191">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package org-crypt
  <span style="font-weight: bold;">:after</span> org
  <span style="font-weight: bold;">:custom</span>
  (org-crypt-key user-mail-address)
  (org-tags-exclude-from-inheritance '(<span style="font-style: italic;">"crypt"</span>))
  <span style="font-weight: bold;">:config</span>
  (org-crypt-use-before-save-magic))
</pre>
</div>
</div>
</div>

<div id="outline-container-org19a4948" class="outline-4">
<h4 id="org19a4948">org-babel</h4>
<div class="outline-text-4" id="text-org19a4948">
<div class="org-src-container">
<pre class="src src-scheme"><span style="font-style: italic;">"graphviz"</span>
<span style="font-style: italic;">"plantuml"</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package ob-core
  <span style="font-weight: bold;">:after</span> org
  <span style="font-weight: bold;">:custom</span>
  (org-confirm-babel-evaluate nil)
  <span style="font-weight: bold;">:config</span>
  (org-babel-do-load-languages
   'org-babel-load-languages
   '((C        . t)
     (java     . t)
     (R        . t)
     (shell    . t)
     (ruby     . t)
     (python   . t)
     (org      . t)
     (lua      . t)
     (gnuplot  . t)
     (dot      . t)
     (plantuml . t)
     (lilypond . t)))
  (add-hook 'org-babel-after-execute-hook 'org-display-inline-images)
  (<span style="font-weight: bold;">cond</span>
   ((string= system-type <span style="font-style: italic;">"gnu/linux"</span>)
    (custom-set-variables `(org-plantuml-jar-path ,(expand-file-name <span style="font-style: italic;">"plantuml.jar"</span> <span style="font-style: italic;">"~/.guix-profile/share/java"</span>))))
   ((string= system-type <span style="font-style: italic;">"darwin"</span>)
    (custom-set-variables '(org-plantuml-jar-path <span style="font-style: italic;">"/usr/local/Cellar/plantuml/8041/plantuml.8041.jar"</span>)))))
</pre>
</div>
</div>

<ul class="org-ul">
<li><a id="org41f886c"></a><a href="https://github.com/astahlman/ob-async/releases.atom">ob-async</a><br />
<div class="outline-text-5" id="text-org41f886c">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package ob-async
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:after</span> ob-core)
</pre>
</div>
</div>
</li>

<li><a id="org421c06e"></a>ob-lilypond<br />
<div class="outline-text-5" id="text-org421c06e">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package ob-lilypond
  <span style="font-weight: bold;">:after</span> (org lilypond-mode)
  <span style="font-weight: bold;">:custom</span>
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(org-babel-lilypond-commands '("lilypond" "firefox" "fluidsynth -a alsa -m alsa_seq -l"))</span>
  (org-babel-lilypond-commands '(<span style="font-style: italic;">"lilypond"</span> <span style="font-style: italic;">"firefox"</span> <span style="font-style: italic;">"xdg-open"</span>))
  (org-babel-lilypond-arrange-mode t))
</pre>
</div>
</div>
</li>
</ul>
</div>

<div id="outline-container-org707a69c" class="outline-4">
<h4 id="org707a69c">org-src</h4>
<div class="outline-text-4" id="text-org707a69c">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package org-src
  <span style="font-weight: bold;">:diminish</span> (org-src-mode . <span style="font-style: italic;">"os"</span>)
  <span style="font-weight: bold;">:custom</span>
  (org-src-window-setup 'current-window)
  <span style="font-weight: bold;">:config</span>
  (advice-add #'org-edit-src-save
              <span style="font-weight: bold;">:before</span>
              #'my/delete-trailing-whitespace)
  (advice-add #'org-edit-src-exit
              <span style="font-weight: bold;">:after</span>
              #'save-buffer))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/delete-trailing-whitespace</span> ()
  (delete-trailing-whitespace))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfe2ef85" class="outline-4">
<h4 id="orgfe2ef85">org-export</h4>
<div class="outline-text-4" id="text-orgfe2ef85">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package ox
  <span style="font-weight: bold;">:defer</span> t
  <span style="font-weight: bold;">:after</span> org
  <span style="font-weight: bold;">:custom</span>
  (org-export-with-smart-quotes t)
  (org-export-with-emphasize t)
  (org-export-with-special-strings t)
  (org-export-with-fixed-width t)
  (org-export-with-timestamps t)
  (org-export-preserve-breaks nil)
  (org-export-with-sub-superscripts nil)
  (org-export-with-archived-trees 'headline)
  (org-export-with-author nil)
  (org-export-with-broken-links 'mark)
  (org-export-with-clocks nil)
  (org-export-with-creator nil)
  (org-export-with-drawers '(not <span style="font-style: italic;">"LOGBOOK"</span>))
  (org-export-with-date nil)
  (org-export-with-entities t)
  (org-export-with-email nil)
  (org-export-with-footnotes t)
  (org-export-headline-levels 5)
  (org-export-with-inlinetasks t)
  (org-export-with-section-numbers nil)
  (org-export-with-planning nil)
  (org-export-with-priority nil)
  (org-export-with-properties nil)
  (org-export-with-statistics-cookies t)
  (org-export-with-tags nil)
  (org-export-with-tasks t)
  (org-export-with-latex t)
  (org-export-time-stamp-file nil)
  (org-export-with-title t)
  (org-export-with-toc nil)
  (org-export-with-todo-keywords nil)
  (org-export-with-tables t)
  (org-export-default-language <span style="font-style: italic;">"ja"</span>)
  (org-export-dispatch-use-expert-ui nil))

(use-package ox-html
  <span style="font-weight: bold;">:defer</span> t
  <span style="font-weight: bold;">:after</span> ox
  <span style="font-weight: bold;">:custom</span>
  (org-html-preamble t)
  (org-html-postamble 'auto)
  (org-html-with-latex t)
  (org-html-container-element <span style="font-style: italic;">"div"</span>)
  (org-html-doctype <span style="font-style: italic;">"xhtml-strict"</span>))

(use-package ox-latex
  <span style="font-weight: bold;">:defer</span> t
  <span style="font-weight: bold;">:after</span> ox
  <span style="font-weight: bold;">:custom</span>
  (org-latex-pdf-process '(<span style="font-style: italic;">"platex %f"</span>
                           <span style="font-style: italic;">"platex %f"</span>
                           <span style="font-style: italic;">"bibtex %b"</span>
                           <span style="font-style: italic;">"platex %f"</span>
                           <span style="font-style: italic;">"platex %f"</span>
                           <span style="font-style: italic;">"dvipdfmx %b.dvi"</span>))
  (org-latex-default-class <span style="font-style: italic;">"jsarticle"</span>)
  <span style="font-weight: bold;">:config</span>
  (add-to-list 'org-latex-classes
               '(<span style="font-style: italic;">"jsarticle"</span>
                 <span style="font-style: italic;">"\\documentclass[dvipdfmx,12pt]{jsarticle}"</span>
                 (<span style="font-style: italic;">"\\section{%s}"</span> . <span style="font-style: italic;">"\\section*{%s}"</span>)
                 (<span style="font-style: italic;">"\\subsection{%s}"</span> . <span style="font-style: italic;">"\\subsection*{%s}"</span>)
                 (<span style="font-style: italic;">"\\subsubsection{%s}"</span> . <span style="font-style: italic;">"\\subsubsection*{%s}"</span>)
                 (<span style="font-style: italic;">"\\paragraph{%s}"</span> . <span style="font-style: italic;">"\\paragraph*{%s}"</span>)
                 (<span style="font-style: italic;">"\\subparagraph{%s}"</span> . <span style="font-style: italic;">"\\subparagraph*{%s}"</span>)))
  (add-to-list 'org-latex-classes
               `(<span style="font-style: italic;">"beamer"</span>
                 <span style="font-style: italic;">"\\documentclass[presentation,dvipdfmx,18pt]{beamer}\n"</span>
                 (<span style="font-style: italic;">"\\section{%s}"</span> . <span style="font-style: italic;">"\\section*{%s}"</span>)
                 (<span style="font-style: italic;">"\\subsection{%s}"</span> . <span style="font-style: italic;">"\\subsection*{%s}"</span>)
                 (<span style="font-style: italic;">"\\subsubsection{%s}"</span> . <span style="font-style: italic;">"\\subsubsection*{%s}"</span>))))

(use-package ox-hugo
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:defer</span> t
  <span style="font-weight: bold;">:after</span> ox)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb953723" class="outline-4">
<h4 id="orgb953723">org-contrib</h4>
<div class="outline-text-4" id="text-orgb953723">
<p>
org-contrib is a set of 3rd party add-ons for org-mode.
</p>
</div>

<ul class="org-ul">
<li><a id="orge58c681"></a>org-contacts<br />
<div class="outline-text-5" id="text-orge58c681">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package org-contacts
  <span style="font-weight: bold;">:after</span> org
  <span style="font-weight: bold;">:straight</span> org-contrib
  <span style="font-weight: bold;">:custom</span>
  (org-contacts-files `(,(expand-file-name <span style="font-style: italic;">"index/contacts.org.gpg"</span> org-directory))))
</pre>
</div>
</div>
</li>
</ul>
</div>

<div id="outline-container-orga185122" class="outline-4">
<h4 id="orga185122"><a href="https://github.com/yjwen/org-reveal/releases.atom">org-reveal</a></h4>
<div class="outline-text-4" id="text-orga185122">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package ox-reveal
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:after</span> ox)
</pre>
</div>
</div>
</div>

<div id="outline-container-orga3c0e27" class="outline-4">
<h4 id="orga3c0e27"><a href="https://github.com/alphapapa/org-ql/releases.atom">org-ql</a></h4>
<div class="outline-text-4" id="text-orga3c0e27">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package org-ql
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:after</span> org
  <span style="font-weight: bold;">:custom</span>
  (org-ql-search-directories-files-recursive t)
  <span style="font-weight: bold;">:config</span>
  (<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">org-ql-search</span>)
  (org-ql-defpred (tags-expanded expanded-tags tags-x xtags) (<span style="font-weight: bold; text-decoration: underline;">&amp;rest</span> tags)
    <span style="font-style: italic;">"Return non-nil if current heading has one or more of TAGS.</span>
<span style="font-style: italic;">If TAGS contains a group tag, all tags in the group is used to match.</span>
<span style="font-style: italic;">Both inherited and local tags is tested."</span>
    <span style="font-weight: bold;">:normalizers</span> ((`(,predicate-names . ,tags)
                   `(tags-expanded ,@tags)))
    <span style="font-weight: bold;">:body</span> (apply #'org-ql--predicate-tags
                 (seq-uniq (--mapcat (org-tags-expand it t)
                                     tags))))
  (org-ql-defpred (category-inherited) (<span style="font-weight: bold; text-decoration: underline;">&amp;rest</span> categories)
    <span style="font-style: italic;">"Return non-nil if current heading has CATEGORY.</span>
<span style="font-style: italic;">Ancestors are looked up If current heading has no CATEGORY."</span>
    <span style="font-weight: bold;">:body</span> (when-let ((category (<span style="font-weight: bold;">or</span> (org-get-category (point))
                                   (org-entry-get (point) <span style="font-style: italic;">"CATEGORY"</span> t))))
            (<span style="font-weight: bold;">cl-typecase</span> categories
              (null t)
              (otherwise (member category categories))))))
</pre>
</div>
</div>
</div>

<div id="outline-container-org35db0a5" class="outline-4">
<h4 id="org35db0a5"><a href="https://github.com/ndwarshuis/org-ml/releases.atom">org-ml</a></h4>
<div class="outline-text-4" id="text-org35db0a5">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package org-ml
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:after</span> org)
</pre>
</div>
</div>
</div>

<div id="outline-container-org615cf5d" class="outline-4">
<h4 id="org615cf5d"><a href="https://github.com/org-roam/org-roam/releases.atom">org-roam</a></h4>
<div class="outline-text-4" id="text-org615cf5d">
<p>
org-roam v2
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package org-roam
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:after</span> org
  <span style="font-weight: bold;">:bind</span> ((<span style="font-style: italic;">"C-c n l"</span> . org-roam-buffer-toggle-display)
         (<span style="font-style: italic;">"C-c n D"</span> . org-roam-find-directory)
         (<span style="font-style: italic;">"C-c n f"</span> . org-roam-find-file)
         (<span style="font-style: italic;">"C-c n i"</span> . org-roam-insert)
         <span style="font-weight: bold;">:map</span> org-mode-map
         (<span style="font-style: italic;">"C-M-i"</span> . completion-at-point))
  <span style="font-weight: bold;">:custom</span>
  (org-roam-directory (expand-file-name <span style="font-style: italic;">"note"</span> org-directory))
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">DB does not have to be with org files since it is derived from org files uniquely</span>
  (org-roam-db-location (expand-file-name <span style="font-style: italic;">"org-roam.db"</span> <span style="font-style: italic;">"~/var/lib/org-roam"</span>))
  (org-roam-buffer-position 'bottom))
</pre>
</div>
</div>
</div>
<div id="outline-container-org45e48cc" class="outline-4">
<h4 id="org45e48cc"><a href="https://gitlab.com/phillord/org-drill/-/tags?format=atom">org-drill</a></h4>
<div class="outline-text-4" id="text-org45e48cc">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package org-drill
  <span style="font-weight: bold;">:init</span> (straight-use-package 'persist)
  <span style="font-weight: bold;">:after</span> (org persist)
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:custom</span>
  (org-drill-spaced-repetition-algorithm 'sm5)
  (org-drill-sm5-initial-interval 10.0)
  (org-drill-add-random-noise-to-intervals-p t)
  (org-drill-adjust-intervals-for-early-and-late-repetitions-p t)
  (org-drill-days-before-old 20)
  (org-drill-learn-fraction 0.65)
  (org-drill-overdue-interval-factor 1.6))

</pre>
</div>
</div>
</div>
<div id="outline-container-orgcb2c300" class="outline-4">
<h4 id="orgcb2c300"><a href="https://github.com/org-mime/org-mime/releases.atom">org-mime</a></h4>
<div class="outline-text-4" id="text-orgcb2c300">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package org-mime
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:after</span> org
  <span style="font-weight: bold;">:config</span>
  (<span style="font-weight: bold;">push</span> '(<span style="font-style: italic;">"Send An Email"</span>) org-speed-commands))
</pre>
</div>
</div>
</div>

<div id="outline-container-org434339e" class="outline-4">
<h4 id="org434339e"><a href="https://github.com/alphapapa/org-web-tools/releases.atom">org-web-tools</a></h4>
<div class="outline-text-4" id="text-org434339e">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package org-web-tools
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:after</span> org
  <span style="font-weight: bold;">:demand</span> t
  <span style="font-weight: bold;">:bind</span> ((<span style="font-style: italic;">"C-c C-;"</span> . org-web-tools-insert-link-for-url)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org446208e" class="outline-4">
<h4 id="org446208e"><a href="https://github.com/dfeich/org-clock-convenience/releases.atom">org-clock-convenience</a></h4>
<div class="outline-text-4" id="text-org446208e">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package org-clock-convenience
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:after</span> (org)
  <span style="font-weight: bold;">:bind</span> (<span style="font-weight: bold;">:map</span> org-agenda-mode-map
              (<span style="font-style: italic;">"@"</span>   . org-clock-convenience-fill-gap)
              (<span style="font-style: italic;">"C-@"</span> . org-clock-convenience-fill-gap-both)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orge579328" class="outline-4">
<h4 id="orge579328">custom functions</h4>
<div class="outline-text-4" id="text-orge579328">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/org-open-file</span> (path <span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> in-emacs line search)
  <span style="font-style: italic;">"docstring"</span>
  (<span style="font-weight: bold;">cl-case</span> (prefix-numeric-value current-prefix-arg)
    (16 (my/view-file path t))
    (4 (org-open-file path t line search))
    (t (<span style="font-weight: bold;">cond</span>
        ((member in-emacs '((16) system))
         (my/view-file path t))
        ((member in-emacs '((4) emacs))
         (org-open-file path t line search))
        (t (my/view-file path)
           (<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">or</span> line search)
             (goto-pos (<span style="font-weight: bold;">or</span> line search))))))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/org-babel-lob-ingest-batch</span> ()
  (<span style="font-weight: bold;">interactive</span>)
  (mapc (<span style="font-weight: bold;">lambda</span> (dir)
          (<span style="font-weight: bold;">dolist</span> (f (directory-files (expand-file-name dir org-directory) <span style="font-style: italic;">"</span><span style="font-weight: bold; font-style: italic;">\</span><span style="font-style: italic;">.org$"</span>))
            (org-babel-lob-ingest f)))
        '(<span style="font-style: italic;">"agenda"</span> <span style="font-style: italic;">"index"</span> <span style="font-style: italic;">"wiki"</span>)))

(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">org-readable-directory</span> <span style="font-style: italic;">"~/var/tmp/readable"</span>
  <span style="font-style: italic;">"A directory where generated html files are located in org-readable."</span>)

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">org-readable</span> ()
  <span style="font-style: italic;">"Show current org subtree in EWW."</span>
  (<span style="font-weight: bold;">interactive</span>)
  (<span style="font-weight: bold;">let*</span> ((heading (org-get-heading t t t t))
         (org-export-show-temporary-export-buffer nil)
         (export-buf-name <span style="font-style: italic;">"*Org HTML Export*"</span>)
         (org-export-with-broken-links 'mark)
         (id (org-id-get))
         (uuid (downcase (<span style="font-weight: bold;">if</span> id id (org-id-uuid))))
         (org-readable-file (format <span style="font-style: italic;">"%s/%s.html"</span> org-readable-directory uuid)))
    (org-html-export-as-html nil t nil)
    (<span style="font-weight: bold;">with-current-buffer</span> export-buf-name
      (write-file org-readable-file)
      (eww-open-file org-readable-file))
    (kill-buffer export-buf-name)))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">org-property-copy-as-kill</span> ()
  <span style="font-style: italic;">"Prompt user to select property to append to the kill ring.</span>

<span style="font-style: italic;">If property's value matches $(...) format, ... is interpreted as shell command and execute it."</span>
  (<span style="font-weight: bold;">interactive</span>)
  (<span style="font-weight: bold;">let*</span> ((properties (org-entry-properties))
         (prop-key-to-copy
          (completing-read <span style="font-style: italic;">"Property name: "</span>
                           (mapcar #'(lambda (var) (car var)) properties))))
    (<span style="font-weight: bold;">when</span> (stringp prop-key-to-copy)
      (<span style="font-weight: bold;">let*</span> ((prop-value (cdr (assoc prop-key-to-copy properties)))
             (str-to-copy
              (<span style="font-weight: bold;">cond</span>
               ((string-match <span style="font-style: italic;">"$(</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">(</span><span style="font-style: italic;">.+</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">)</span><span style="font-style: italic;">)"</span> prop-value)
                (shell-command-to-string (match-string 1 prop-value)))
               (t prop-value))))
        (kill-new str-to-copy)))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/org-reset-dwim</span> ()
  <span style="font-style: italic;">"Do reset procedure in each context."</span>
  (<span style="font-weight: bold;">interactive</span>)
  (<span style="font-weight: bold;">cond</span>
   ((org-at-table-p) (org-table-blank-field))
   ((org-in-subtree-not-table-p)
    (<span style="font-weight: bold;">org-save-outline-visibility</span> t
      (org-reset-checkbox-state-subtree)))))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">WARN: This function does not work correctly</span>
<span style="font-weight: bold; font-style: italic;">;;       </span><span style="font-weight: bold; font-style: italic;">Wait until library org-ml get mature</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">org-gc-drawer-subtree</span> ()
  <span style="font-style: italic;">"Remove all clocks and items in drawer of subtrees older than a month before."</span>
  (<span style="font-weight: bold;">interactive</span>)
  (<span style="font-weight: bold;">let*</span> ((month-before (-&gt;&gt; (decode-time (current-time))
                            (--map-indexed (<span style="font-weight: bold;">if</span> (= it-index 4)
                                               (- it 1) it))
                            (encode-time)))
         (config (list <span style="font-weight: bold;">:log-into-drawer</span> t
                       <span style="font-weight: bold;">:clock-into-drawer</span> t))
         (gc-clock-fun (<span style="font-weight: bold;">lambda</span> (headline)
                         (org-ml-update*
                           (org-ml-headline-map-logbook-clocks* config
                             (--filter
                              (time-less-p month-before
                                           (org-ml-time-to-unixtime
                                            (org-ml-timestamp-get-end-time
                                             (org-ml-get-property <span style="font-weight: bold;">:value</span> it))))
                              it)
                             it)
                           headline)))
         (gc-item-fun (<span style="font-weight: bold;">lambda</span> (headline)
                        (org-ml-update*
                          (org-ml-headline-map-logbook-items* config
                            (--filter
                             (time-less-p month-before
                                          (org-ml-logbook-item-get-timestamp it))
                             it)
                            it)
                          headline))))
    (-&gt;&gt; (org-ml-parse-this-headline)
         (funcall gc-clock-fun))
    (-&gt;&gt; (org-ml-parse-this-headline)
         (funcall gc-item-fun))
    (-&gt;&gt; (org-ml-parse-this-subtree)
         (org-ml-headline-get-subheadlines)
         (-map gc-clock-fun))
    (-&gt;&gt; (org-ml-parse-this-subtree)
         (org-ml-headline-get-subheadlines)
         (-map gc-item-fun))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">org-download-video-link-at-point</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> playlistp)
  <span style="font-style: italic;">"Download video file at point.</span>
<span style="font-style: italic;">With `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">C-u</span><span style="font-style: italic;">' prefix arg, try to download all videos in playlist.</span>

<span style="font-style: italic;">Video file is expected to appear in org-link."</span>
  (<span style="font-weight: bold;">interactive</span> <span style="font-style: italic;">"P"</span>)
  (org-link-at-point-map (<span style="font-weight: bold;">lambda</span> (url title)
                           (my/download-video url title playlistp))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">org-download-audio-link-at-point</span> ()
  <span style="font-style: italic;">"Download audio file at point.</span>

<span style="font-style: italic;">Audio file is expected to appear in org-link."</span>
  (<span style="font-weight: bold;">interactive</span>)
  (org-link-at-point-map (<span style="font-weight: bold;">lambda</span> (url title)
                           (my/download-audio url title))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">org-show-media-duration-at-point</span> ()
  <span style="font-style: italic;">"Show duration of media at point."</span>
  (<span style="font-weight: bold;">interactive</span>)
  (org-link-at-point-map (<span style="font-weight: bold;">lambda</span> (url title)
                           (show-media-duration url))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">org-link-at-point-map</span> (<span style="font-weight: bold;">function</span>)
  <span style="font-style: italic;">"Call `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">FUNCTION</span><span style="font-style: italic;">' with url and title obtained from org-link at point."</span>
  (<span style="font-weight: bold;">let*</span> ((context (org-element-lineage
                   (org-element-context)
                   '(link)
                   t))
         (type (org-element-property <span style="font-weight: bold;">:type</span> context))
         (path (org-element-property <span style="font-weight: bold;">:path</span> context))
         (desc (when-let ((begin (org-element-property <span style="font-weight: bold;">:contents-begin</span> context))
                          (end (org-element-property <span style="font-weight: bold;">:contents-end</span> context)))
                 (buffer-substring begin end))))
    (<span style="font-weight: bold;">cond</span>
     ((string-match-p <span style="font-style: italic;">"https?"</span> type)
      (funcall function (org-link-unescape (concat type <span style="font-style: italic;">":"</span> path)) desc))
     ((string-match-p <span style="font-style: italic;">"elfeed"</span> type)
      (<span style="font-weight: bold;">save-excursion</span>
        (org-open-at-point)
        (<span style="font-weight: bold;">when</span> (eq major-mode 'elfeed-show-mode)
          (when-let ((url (<span style="font-weight: bold;">or</span> (caar (elfeed-entry-enclosures elfeed-show-entry))
                              (elfeed-entry-link elfeed-show-entry)))
                     (title (elfeed-entry-title elfeed-show-entry)))
            (funcall function url title))
          (quit-window)))))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">org-send-email</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> arg)
  <span style="font-style: italic;">"Send a html email extracted from current org entry.</span>

<span style="font-style: italic;">Given a `\\[</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">universal-argument</span><span style="font-style: italic;">]' prefix `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">ARG</span><span style="font-style: italic;">', send an ascii email instead."</span>
  (<span style="font-weight: bold;">interactive</span> <span style="font-style: italic;">"P"</span>)
  (<span style="font-weight: bold;">cond</span>
   ((equal arg '(4))
    (call-interactively #'org-send-email-ascii))
   (t
    (<span style="font-weight: bold;">let</span> ((org-mime-use-property-inheritance t))
      (call-interactively #'org-mime-org-subtree-htmlize)))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">org-send-email-ascii</span> ()
  <span style="font-style: italic;">"Send a mail whose contents converted from current org entry.</span>

<span style="font-style: italic;">Format of mail contents is plain text."</span>
  (<span style="font-weight: bold;">interactive</span>)
  (<span style="font-weight: bold;">let</span> ((heading (org-get-heading t t t t))
        (org-export-show-temporary-export-buffer nil)
        (export-buf-name <span style="font-style: italic;">"*Org ASCII Export*"</span>)
        (org-export-with-toc nil)
        (org-export-with-author nil))
    (org-ascii-export-as-ascii nil t t t)
    (mail-simple-send (<span style="font-weight: bold;">or</span> (org-entry-get (point) <span style="font-style: italic;">"MAIL_TO"</span> t)
                          (read-string <span style="font-style: italic;">"MAIL_TO: "</span>))
                      heading
                      (<span style="font-weight: bold;">with-current-buffer</span> export-buf-name
                        (buffer-string)))
    (kill-buffer export-buf-name)))

</pre>
</div>
</div>
</div>

<div id="outline-container-orgf15f26f" class="outline-4">
<h4 id="orgf15f26f">key bindings</h4>
<div class="outline-text-4" id="text-orgf15f26f">
<p>
speed commands and hydra-org.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package org-keys
  <span style="font-weight: bold;">:after</span> org
  <span style="font-weight: bold;">:custom</span>
  (org-use-speed-commands
   (<span style="font-weight: bold;">lambda</span> () (<span style="font-weight: bold;">and</span> (looking-at org-outline-regexp) (looking-back <span style="font-style: italic;">"^</span><span style="font-weight: bold; font-style: italic;">\</span><span style="font-style: italic;">**"</span>))))
  (org-speed-commands
   '((<span style="font-style: italic;">"Outline Navigation"</span>)
     (<span style="font-style: italic;">"n"</span> . (org-speed-move-safe 'org-next-visible-heading))
     (<span style="font-style: italic;">"p"</span> . (org-speed-move-safe 'org-previous-visible-heading))
     (<span style="font-style: italic;">"f"</span> . (org-speed-move-safe 'org-forward-heading-same-level))
     (<span style="font-style: italic;">"b"</span> . (org-speed-move-safe 'org-backward-heading-same-level))
     (<span style="font-style: italic;">"F"</span> . org-next-block)
     (<span style="font-style: italic;">"B"</span> . org-previous-block)
     (<span style="font-style: italic;">"u"</span> . (org-speed-move-safe 'outline-up-heading))
     (<span style="font-style: italic;">"j"</span> . org-goto)
     (<span style="font-style: italic;">"g"</span> . (org-refile t))
     (<span style="font-style: italic;">"Outline Visibility"</span>)
     (<span style="font-style: italic;">"c"</span> . org-ctrl-c-tab)
     (<span style="font-style: italic;">"C"</span> . org-shifttab)
     (<span style="font-style: italic;">" "</span> . org-display-outline-path)
     (<span style="font-style: italic;">"N"</span> . my/toggle-narrow-dwim)
     (<span style="font-style: italic;">"z"</span> . org-toggle-narrow-to-subtree)
     (<span style="font-style: italic;">"="</span> . org-columns)
     (<span style="font-style: italic;">"/"</span> . org-sparse-tree)
     (<span style="font-style: italic;">"Outline Structure Editing"</span>)
     (<span style="font-style: italic;">"U"</span> . org-metaup)
     (<span style="font-style: italic;">"D"</span> . org-metadown)
     (<span style="font-style: italic;">"r"</span> . org-metaright)
     (<span style="font-style: italic;">"l"</span> . org-metaleft)
     (<span style="font-style: italic;">"R"</span> . org-shiftmetaright)
     (<span style="font-style: italic;">"L"</span> . org-shiftmetaleft)
     (<span style="font-style: italic;">"i"</span> . (<span style="font-weight: bold;">progn</span> (forward-char 1) (call-interactively 'org-insert-heading-respect-content)))
     (<span style="font-style: italic;">"^"</span> . org-sort)
     (<span style="font-style: italic;">"w"</span> . org-refile)
     (<span style="font-style: italic;">"a"</span> . org-archive-subtree-default-with-confirmation)
     (<span style="font-style: italic;">"@"</span> . org-mark-subtree)
     (<span style="font-style: italic;">"#"</span> . org-toggle-comment)
     (<span style="font-style: italic;">"Clock Commands"</span>)
     (<span style="font-style: italic;">"I"</span> . org-clock-in)
     (<span style="font-style: italic;">"O"</span> . my/org-clock-out-without-remove)
     (<span style="font-style: italic;">"X"</span> . org-clock-cancel)
     (<span style="font-style: italic;">"Meta Data Editing"</span>)
     (<span style="font-style: italic;">"t"</span> . org-todo)
     (<span style="font-style: italic;">","</span> . (org-priority))
     (<span style="font-style: italic;">"0"</span> . (org-priority ?\ ))
     (<span style="font-style: italic;">":"</span> . org-set-tags-command)
     (<span style="font-style: italic;">"P"</span> . org-set-property)
     (<span style="font-style: italic;">"e"</span> . org-set-effort)
     (<span style="font-style: italic;">"E"</span> . org-inc-effort)
     (<span style="font-style: italic;">"s"</span> . org-schedule)
     (<span style="font-style: italic;">"d"</span> . org-deadline)
     (<span style="font-style: italic;">"v"</span> . org-property-copy-as-kill)
     (<span style="font-style: italic;">"W"</span> . (<span style="font-weight: bold;">lambda</span> (m) (<span style="font-weight: bold;">interactive</span> <span style="font-style: italic;">"sMinutes before warning: "</span>) (org-entry-put (point) <span style="font-style: italic;">"APPT_WARNTIME"</span> m)))
     (<span style="font-style: italic;">"Org Capture"</span>)
     (<span style="font-style: italic;">"Misc"</span>)
     (<span style="font-style: italic;">"$"</span> . my/org-archive-subtree)
     (<span style="font-style: italic;">"!"</span> . org-readable)
     (<span style="font-style: italic;">"o"</span> . org-open-at-point)
     (<span style="font-style: italic;">"M"</span> . org-send-email)
     (<span style="font-style: italic;">"?"</span> . org-speed-command-help)
     (<span style="font-style: italic;">"&lt;"</span> . (org-agenda-set-restriction-lock 'subtree))
     (<span style="font-style: italic;">"&gt;"</span> . (org-agenda-remove-restriction-lock)))))

(<span style="font-weight: bold;">with-eval-after-load</span> 'hydra
  (defhydra hydra-org (global-map <span style="font-style: italic;">"C-o"</span>
                                  <span style="font-weight: bold;">:color</span> teal)
    <span style="font-style: italic;">"Org Search"</span>
    (<span style="font-style: italic;">"a"</span> org-agenda)
    (<span style="font-style: italic;">"c"</span> org-capture)
    (<span style="font-style: italic;">"t"</span> org-set-tags-command)
    (<span style="font-style: italic;">"j"</span> org-clock-goto)
    (<span style="font-style: italic;">"g"</span> consult-org-agenda)
    (<span style="font-style: italic;">"h"</span> consult-outline)
    (<span style="font-style: italic;">"ee"</span> my/org-english-capture)
    (<span style="font-style: italic;">"ed"</span> my/org-english-drill)
    (<span style="font-style: italic;">"eD"</span> my/org-english-drill-resume)
    (<span style="font-style: italic;">"et"</span> my/org-english-drill-test-display)
    (<span style="font-style: italic;">"s"</span> org-store-link)
    (<span style="font-style: italic;">"C-s"</span> org-save-all-org-buffers)
    (<span style="font-style: italic;">"TAB"</span> org-indent-mode)
    (<span style="font-style: italic;">"i"</span> org-info-find-node)
    (<span style="font-style: italic;">"&amp;"</span> org-mark-ring-goto)
    (<span style="font-style: italic;">"I"</span> org-clock-in)
    (<span style="font-style: italic;">"O"</span> my/org-clock-out-without-remove)
    (<span style="font-style: italic;">"X"</span> org-clock-cancel)
    (<span style="font-style: italic;">"qq"</span> org-ql-search)
    (<span style="font-style: italic;">"qv"</span> org-ql-view)
    (<span style="font-style: italic;">"qr"</span> my/org-archive-search)
    (<span style="font-style: italic;">"r"</span> my/org-archive-find-date)
    (<span style="font-style: italic;">"l"</span> my/lookup-org-archive)
    (<span style="font-style: italic;">"bi"</span> my/org-babel-lob-ingest-batch)
    (<span style="font-style: italic;">"@"</span> org-mark-subtree)
    (<span style="font-style: italic;">"="</span> org-clock-sum-all)
    (<span style="font-style: italic;">"SPC"</span> my/org-reset-dwim)
    (<span style="font-style: italic;">"C-g"</span> nil <span style="font-style: italic;">"quit"</span>)))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org6c308d4" class="outline-3">
<h3 id="org6c308d4">completion</h3>
<div class="outline-text-3" id="text-org6c308d4">
</div>

<div id="outline-container-org7d1f076" class="outline-4">
<h4 id="org7d1f076"><a href="https://github.com/minad/vertico/releases.atom">vertico</a></h4>
<div class="outline-text-4" id="text-org7d1f076">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package vertico
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:config</span>
  (bind-keys <span style="font-weight: bold;">:map</span> vertico-map
             (<span style="font-style: italic;">"M-w"</span> . vertico-save))
  (vertico-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-org48da5f8" class="outline-4">
<h4 id="org48da5f8"><a href="https://github.com/minad/consult/releases.atom">consult</a></h4>
<div class="outline-text-4" id="text-org48da5f8">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package consult
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:after</span> vertico
  <span style="font-weight: bold;">:bind</span>
  (<span style="font-weight: bold;">:map</span> global-map
        (<span style="font-style: italic;">"C-s"</span> . consult-line)
        (<span style="font-style: italic;">"C-;"</span> . consult-buffer)
        (<span style="font-style: italic;">"C-c m"</span> . consult-mode-command)
        (<span style="font-style: italic;">"C-c r"</span> . consult-recent-file)
        (<span style="font-style: italic;">"C-c g"</span> . consult-outline)
        (<span style="font-style: italic;">"C-x M-:"</span> . consult-complex-command)
        (<span style="font-style: italic;">"M-y"</span> . consult-yank-pop)
        (<span style="font-style: italic;">"C-M-y"</span> . consult-yank-from-kill-ring)
        (<span style="font-style: italic;">"M-g M-g"</span> . consult-goto-line)
        (<span style="font-style: italic;">"M-g m"</span> . consult-mark)
        (<span style="font-style: italic;">"M-g M"</span> . consult-global-mark)
        (<span style="font-style: italic;">"M-g i"</span> . consult-imenu)
        (<span style="font-style: italic;">"M-g I"</span> . consult-imenu-multi)
        (<span style="font-style: italic;">"M-s e"</span> . consult-isearch)
        (<span style="font-style: italic;">"M-s \\"</span> . consult-locate)
        (<span style="font-style: italic;">"M-s g"</span> . consult-grep)
        (<span style="font-style: italic;">"M-s G"</span> . consult-git-grep)
        (<span style="font-style: italic;">"M-s r"</span> . consult-ripgrep)
        (<span style="font-style: italic;">"M-s l"</span> . consult-line)
        (<span style="font-style: italic;">"M-s L"</span> . consult-line-multi)
        (<span style="font-style: italic;">"M-s m"</span> . consult-multi-occur)
        (<span style="font-style: italic;">"M-s k"</span> . consult-keep-lines)
        (<span style="font-style: italic;">"M-s u"</span> . consult-focus-lines)
        <span style="font-weight: bold;">:map</span> isearch-mode-map
        (<span style="font-style: italic;">"M-e"</span> . consult-isearch)
        (<span style="font-style: italic;">"M-s e"</span> . consult-isearch)
        (<span style="font-style: italic;">"M-s l"</span> . consult-line)
        (<span style="font-style: italic;">"M-s L"</span> . consult-line-multi)
        (<span style="font-style: italic;">"C-c h"</span> . consult-history)
        <span style="font-weight: bold;">:map</span> minibuffer-local-map
        (<span style="font-style: italic;">"C-c h"</span> . consult-history)
        <span style="font-weight: bold;">:map</span> help-map
        (<span style="font-style: italic;">"a"</span> . consult-apropos)
        <span style="font-weight: bold;">:map</span> org-mode-map
        (<span style="font-style: italic;">"C-c h"</span> . consult-org-heading))
  <span style="font-weight: bold;">:custom</span>
  (consult-line-start-from-top t)
  (consult-project-root-function #'project-root-function))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">project-root-function</span> ()
  (when-let (project (project-current))
    (car (project-roots project))))
</pre>
</div>
</div>

<ul class="org-ul">
<li><a id="org2f2ca82"></a>consult-dir<br />
<div class="outline-text-5" id="text-org2f2ca82">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package consult-dir
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:bind</span> ((<span style="font-style: italic;">"C-x C-d"</span> . consult-dir)
         <span style="font-weight: bold;">:map</span> vertico-map
         (<span style="font-style: italic;">"C-x C-d"</span> . consult-dir)
         (<span style="font-style: italic;">"C-x C-j"</span> . consult-dir-jump-file)))
</pre>
</div>
</div>
</li>
</ul>
</div>

<div id="outline-container-org116b155" class="outline-4">
<h4 id="org116b155"><a href="https://github.com/oantolin/embark/releases.atom">embark</a></h4>
<div class="outline-text-4" id="text-org116b155">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package embark
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:bind</span> ((<span style="font-style: italic;">"C-."</span> . embark-act)
         (<span style="font-style: italic;">"M-."</span> . embark-dwim)
         (<span style="font-style: italic;">"&lt;help&gt; B"</span> . embark-bindings))
  <span style="font-weight: bold;">:init</span>
  (<span style="font-weight: bold;">setq</span> prefix-help-command #'embark-prefix-help-command) <span style="font-weight: bold; font-style: italic;">;</span>
  <span style="font-weight: bold;">:config</span>
  (bind-keys <span style="font-weight: bold;">:map</span> embark-collect-mode-map
             (<span style="font-style: italic;">"C-j"</span> . push-button)))

(use-package embark-consult
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:after</span> (embark consult)
  <span style="font-weight: bold;">:demand</span> t
  <span style="font-weight: bold;">:hook</span>
  (embark-collect-mode . consult-preview-at-point-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-org42e9303" class="outline-4">
<h4 id="org42e9303"><a href="https://github.com/minad/marginalia/releases.atom">marginalia</a></h4>
<div class="outline-text-4" id="text-org42e9303">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package marginalia
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:custom</span>
  (marginalia-align-offset nil)
  (marginalia-truncate-width 180)
  (marginalia-margin-threshold 250)
  (marginalia-separator-threshold 200)
  <span style="font-weight: bold;">:config</span>
  (marginalia-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-org45710b8" class="outline-4">
<h4 id="org45710b8"><a href="https://github.com/oantolin/orderless/releases.atom">orderless</a></h4>
<div class="outline-text-4" id="text-org45710b8">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package orderless
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:custom</span> (completion-styles '(orderless)))
</pre>
</div>
</div>

<ul class="org-ul">
<li><a id="orgece0db9"></a>migemo support<br />
<div class="outline-text-5" id="text-orgece0db9">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">orderless-migemo</span> (component)
  (<span style="font-weight: bold;">let</span> ((pattern (migemo-get-pattern component)))
    (<span style="font-weight: bold;">condition-case</span> nil
        (<span style="font-weight: bold;">progn</span> (string-match-p pattern <span style="font-style: italic;">""</span>) pattern)
      (invalid-regexp nil))))

(orderless-define-completion-style orderless-default-style
  (orderless-matching-styles '(orderless-literal
                               orderless-regexp)))

(orderless-define-completion-style orderless-migemo-style
  (orderless-matching-styles '(orderless-literal
                               orderless-regexp
                               orderless-migemo)))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">uncomment below if you wish to apply migemo globally</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(setq orderless-matching-styles '(orderless-literal orderless-regexp orderless-migemo))</span>

(<span style="font-weight: bold;">setq</span> completion-category-overrides
      '((command (styles orderless-default-style))
        (file (styles orderless-migemo-style))
        (buffer (styles orderless-migemo-style))
        (symbol (styles orderless-default-style))
        (consult-location (styles orderless-migemo-style)) <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">category `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">consult-location</span><span style="font-weight: bold; font-style: italic;">' &#12399; `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">consult-line</span><span style="font-weight: bold; font-style: italic;">' &#12394;&#12393;&#12395;&#20351;&#12431;&#12428;&#12427;</span>
        (consult-multi (styles orderless-migemo-style)) <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">category `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">consult-multi</span><span style="font-weight: bold; font-style: italic;">' &#12399; `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">consult-buffer</span><span style="font-weight: bold; font-style: italic;">' &#12394;&#12393;&#12395;&#20351;&#12431;&#12428;&#12427;</span>
        (consult-org-heading (styles orderless-migemo-style))
        (org-roam-node (styles orderless-migemo-style)) <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">category `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">org-roam-node</span><span style="font-weight: bold; font-style: italic;">' &#12399; `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">org-roam-node-find</span><span style="font-weight: bold; font-style: italic;">' &#12391;&#20351;&#12431;&#12428;&#12427;</span>
        (unicode-name (styles orderless-migemo-style))
        (variable (styles orderless-default-style))))
</pre>
</div>
</div>
</li>
</ul>
</div>
</div>

<div id="outline-container-org2a519ac" class="outline-3">
<h3 id="org2a519ac">major modes for programming/editing&#xa0;&#xa0;&#xa0;<span class="tag"><span class="programs">programs</span></span></h3>
<div class="outline-text-3" id="text-org2a519ac">
</div>

<div id="outline-container-org0b999e0" class="outline-4">
<h4 id="org0b999e0">prog</h4>
<div class="outline-text-4" id="text-org0b999e0">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package prog-mode
  <span style="font-weight: bold;">:hook</span> (prog-mode . my/prog-mode-hook-function))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/prog-mode-hook-function</span> ()
  (hl-line-mode -1)
  (hs-minor-mode -1)
  (flyspell-prog-mode)
  (display-fill-column-indicator-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-org846928a" class="outline-4">
<h4 id="org846928a">sh</h4>
<div class="outline-text-4" id="text-org846928a">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package sh-script
  <span style="font-weight: bold;">:delight</span> <span style="font-style: italic;">" SH"</span>
  <span style="font-weight: bold;">:commands</span> sh-mode
  <span style="font-weight: bold;">:mode</span> (<span style="font-style: italic;">"\\.sh$"</span> . sh-mode)
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:dash "Bash"</span>
  <span style="font-weight: bold;">:custom</span>
  (sh-basic-offset 2)
  (sh-indent-after-if '+)
  (sh-indent-for-case-label 0)
  (sh-indent-for-case-alt '+))
</pre>
</div>
</div>
</div>

<div id="outline-container-org71cfbd8" class="outline-4">
<h4 id="org71cfbd8">emacs lisp</h4>
<div class="outline-text-4" id="text-org71cfbd8">
<p>
I'm in the trial of pp-eval-last-sexp instead of eval-last-sexp adviced from <a href="https://karthinks.com/software/an-elisp-editing-tip/">this blog post</a>
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package elisp-mode
  <span style="font-weight: bold;">:commands</span> emacs-lisp-mode
  <span style="font-weight: bold;">:delight</span>
  (emacs-lisp-mode <span style="font-style: italic;">" EL"</span>)
  (lisp-interaction-mode <span style="font-style: italic;">" LispInt"</span>)
  <span style="font-weight: bold;">:hook</span> (emacs-lisp-mode . (<span style="font-weight: bold;">lambda</span> ()
                             (<span style="font-weight: bold;">setq-local</span> tab-width 4)
                             (<span style="font-weight: bold;">setq-local</span> counsel-dash-docsets '(<span style="font-style: italic;">"Emacs Lisp"</span> <span style="font-style: italic;">"Common Lisp"</span>))
                             (eldoc-mode 1)))
  <span style="font-weight: bold;">:config</span>
  (<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">eldoc</span>)
  (substitute-key-definition 'eval-last-sexp
                             'pp-eval-last-sexp
                             global-map))
</pre>
</div>
</div>
</div>

<div id="outline-container-org339b83b" class="outline-4">
<h4 id="org339b83b">cc-mode</h4>
<div class="outline-text-4" id="text-org339b83b">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package cc-mode
  <span style="font-weight: bold;">:hook</span> (c-mode-common . (<span style="font-weight: bold;">lambda</span> ()
                           (<span style="font-weight: bold;">setq-local</span> counsel-dash-docsets '(<span style="font-style: italic;">"C"</span>))))
  <span style="font-weight: bold;">:custom</span>
  (c-tab-always-indent t)
  (c-auto-align-backslashes nil)
  (c-echo-syntactic-information-p t)
  (c-default-style <span style="font-style: italic;">"my/c-style"</span>)
  <span style="font-weight: bold;">:config</span>
  (c-toggle-auto-newline 1)
  (c-add-style <span style="font-style: italic;">"my/c-style"</span>
               '((c-basic-offset . 4)
                 (c-comment-only-line-offset . 0)
                 (c-hanging-braces-alist
                  . ((brace-if-brace before after)
                     (substatement-open before after)))
                 (c-hanging-colons-alist
                  . ((case-label after)))
                 (c-cleanup-list
                  . (brace-else-brace
                     brace-elseif-brace
                     empty-defun-braces
                     defun-close-semi
                     list-close-comma
                     scope-operator))
                 (c-offsets-alist
                  . ((arglist-intro . +)
                     (arglist-cont-nonempty . c-lineup-arglist)))))
  (c-add-style <span style="font-style: italic;">"my/objc-style"</span>
               '((c-basic-offset . 2)
                 (c-comment-only-line-offset . 0)
                 (c-hanging-braces-alist
                  . ((brace-if-brace before after)
                     (substatement-open before after)))
                 (c-hanging-colons-alist
                  . ((case-label after)))
                 (c-cleanup-list
                  . (brace-else-brace
                     brace-elseif-brace
                     empty-defun-braces
                     defun-close-semi
                     list-close-comma
                     scope-operator))
                 (c-offsets-alist
                  . ((arglist-intro . +)
                     (arglist-cont-nonempty . c-lineup-arglist))))))
</pre>
</div>
</div>
</div>

<div id="outline-container-org3ccef1c" class="outline-4">
<h4 id="org3ccef1c">python-mode</h4>
<div class="outline-text-4" id="text-org3ccef1c">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package python
  <span style="font-weight: bold;">:mode</span> <span style="font-style: italic;">"\\.py\\'"</span>
  <span style="font-weight: bold;">:interpreter</span> <span style="font-style: italic;">"python"</span>
  <span style="font-weight: bold;">:delight</span> <span style="font-style: italic;">" PY"</span>
  <span style="font-weight: bold;">:hook</span>
  ((python-mode inferior-python-mode) . my-python-mode-hook)
  (lsp-mode . (<span style="font-weight: bold;">lambda</span> ()
                (add-to-list 'lsp-disabled-clients 'jedi)
                (add-to-list 'lsp-enabled-clients 'pyls))))

(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">python-mode-initialized</span> nil)

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my-python-mode-hook</span> ()
  (<span style="font-weight: bold;">setq-local</span> flycheck-checker 'python-pylint)
  (jedi:setup)
  (jedi-mode 1)
  (<span style="font-weight: bold;">setq-local</span> counsel-dash-docsets
              '(<span style="font-style: italic;">"Python 3"</span> <span style="font-style: italic;">"Pandas"</span> <span style="font-style: italic;">"NumPy"</span> <span style="font-style: italic;">"Matplotlib"</span> <span style="font-style: italic;">"Scrapy"</span> <span style="font-style: italic;">"PEPs"</span> <span style="font-style: italic;">"lxml"</span>))
  (<span style="font-weight: bold;">unless</span> python-mode-initialized
    (<span style="font-weight: bold;">setq</span> python-mode-initialized t)
    (info-lookup-add-help
     <span style="font-weight: bold;">:mode</span> 'python-mode
     <span style="font-weight: bold;">:regexp</span> <span style="font-style: italic;">"[a-zA-Z_0-9.]+"</span>
     <span style="font-weight: bold;">:doc-spec</span>
     '((<span style="font-style: italic;">"(python)Python Module Index"</span> )
       (<span style="font-style: italic;">"(python)Index"</span>
        (<span style="font-weight: bold;">lambda</span>
          (item)
          (<span style="font-weight: bold;">cond</span>
           ((string-match
             <span style="font-style: italic;">"</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">(</span><span style="font-style: italic;">[A-Za-z0-9_]+</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">)</span><span style="font-style: italic;">() (in module </span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">(</span><span style="font-style: italic;">[A-Za-z0-9_.]+</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">)</span><span style="font-style: italic;">)"</span> item)
            (format <span style="font-style: italic;">"%s.%s"</span> (match-string 2 item)
                    (match-string 1 item))))))))))
</pre>
</div>
</div>

<ul class="org-ul">
<li><a id="orgd0acefe"></a><a href="https://github.com/emacsorphanage/company-jedi/releases.atom">company-jedi</a><br />
<div class="outline-text-5" id="text-orgd0acefe">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package company-jedi
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:after</span> python
  <span style="font-weight: bold;">:hook</span> (python-mode . my/python-mode-hook)
  <span style="font-weight: bold;">:custom</span>
  (jedi:tooltip-method nil)
  <span style="font-weight: bold;">:config</span>
  (<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/python-mode-hook</span> ()
    (add-to-list 'company-backends 'company-jedi)))
</pre>
</div>
</div>
</li>
</ul>
</div>

<div id="outline-container-orgb8f6257" class="outline-4">
<h4 id="orgb8f6257">ruby-mode</h4>
<div class="outline-text-4" id="text-orgb8f6257">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package ruby-mode
  <span style="font-weight: bold;">:delight</span> <span style="font-style: italic;">" RB"</span>
  <span style="font-weight: bold;">:mode</span> ((<span style="font-style: italic;">"\\.rb$"</span>   . ruby-mode)
         (<span style="font-style: italic;">"Capfile$"</span> . ruby-mode)
         (<span style="font-style: italic;">"Gemfile$"</span> . ruby-mode))
  <span style="font-weight: bold;">:interpreter</span> ((<span style="font-style: italic;">"ruby"</span>    . ruby-mode)
                (<span style="font-style: italic;">"rbx"</span>     . ruby-mode)
                (<span style="font-style: italic;">"jruby"</span>   . ruby-mode))
  <span style="font-weight: bold;">:config</span>
  (<span style="font-weight: bold;">setq</span> ruby-indent-level 2)
  (<span style="font-weight: bold;">setq</span> ruby-insert-encoding-magic-comment nil)
  (add-hook 'ruby-mode-hook
            '(lambda ()
               (<span style="font-weight: bold;">setq-local</span> flycheck-checker 'ruby-rubocop)
               (<span style="font-weight: bold;">setq-local</span> counsel-dash-docsets '(<span style="font-style: italic;">"Ruby"</span>))))
  (add-to-list 'hs-special-modes-alist
               `(ruby-mode
                 ,(<span style="font-weight: bold;">rx</span> (<span style="font-weight: bold;">or</span> <span style="font-style: italic;">"def"</span> <span style="font-style: italic;">"class"</span> <span style="font-style: italic;">"module"</span> <span style="font-style: italic;">"do"</span> <span style="font-style: italic;">"if"</span> <span style="font-style: italic;">"{"</span> <span style="font-style: italic;">"["</span>)) <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">Block start</span>
                 ,(<span style="font-weight: bold;">rx</span> (<span style="font-weight: bold;">or</span> <span style="font-style: italic;">"}"</span> <span style="font-style: italic;">"]"</span> <span style="font-style: italic;">"end"</span>))                       <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">Block end</span>
                 ,(<span style="font-weight: bold;">rx</span> (<span style="font-weight: bold;">or</span> <span style="font-style: italic;">"#"</span> <span style="font-style: italic;">"=begin"</span>))                        <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">Comment start</span>
                 ruby-forward-sexp nil)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org696c76f" class="outline-4">
<h4 id="org696c76f"><a href="https://github.com/nonsequitur/inf-ruby/releases.atom">inf-ruby</a></h4>
<div class="outline-text-4" id="text-org696c76f">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package inf-ruby
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:config</span>
  (<span style="font-weight: bold;">setq</span> inf-ruby-default-implementation <span style="font-style: italic;">"pry"</span>)
  (add-to-list 'inf-ruby-implementations '(<span style="font-style: italic;">"pry"</span> . <span style="font-style: italic;">"pry"</span>))
  (<span style="font-weight: bold;">setq</span> inf-ruby-eval-binding <span style="font-style: italic;">"Pry.toplevel_binding"</span>)
  (<span style="font-weight: bold;">setq</span> inf-ruby-first-prompt-pattern <span style="font-style: italic;">"^\\[[0-9]+\\] pry</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">(</span><span style="font-style: italic;">(.*)</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">)</span><span style="font-style: italic;">&gt; *"</span>)
  (<span style="font-weight: bold;">setq</span> inf-ruby-prompt-pattern <span style="font-style: italic;">"^\\[[0-9]+\\] pry</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">(</span><span style="font-style: italic;">(.*)</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">)</span><span style="font-style: italic;">[&gt;*\"'] *"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-org082d3cd" class="outline-4">
<h4 id="org082d3cd"><a href="https://github.com/yoshiki/yaml-mode/releases.atom">yaml-mode</a></h4>
<div class="outline-text-4" id="text-org082d3cd">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package yaml-mode
  <span style="font-weight: bold;">:straight</span> t)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb46791f" class="outline-4">
<h4 id="orgb46791f"><a href="https://github.com/immerrr/lua-mode/releases.atom">lua-mode</a></h4>
<div class="outline-text-4" id="text-orgb46791f">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package lua-mode
  <span style="font-weight: bold;">:straight</span> t)
</pre>
</div>
</div>
</div>

<div id="outline-container-org9215b90" class="outline-4">
<h4 id="org9215b90">perl-mode</h4>
<div class="outline-text-4" id="text-org9215b90">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package perl-mode
  <span style="font-weight: bold;">:delight</span> <span style="font-style: italic;">" PL"</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-org5fe0a58" class="outline-4">
<h4 id="org5fe0a58">tex-mode</h4>
<div class="outline-text-4" id="text-org5fe0a58">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package tex-mode
  <span style="font-weight: bold;">:mode</span> (<span style="font-style: italic;">"\\.tex$"</span> . latex-mode)
  <span style="font-weight: bold;">:hook</span> ((latex-mode . (<span style="font-weight: bold;">lambda</span> ()
                         (<span style="font-weight: bold;">setq-local</span> counsel-dash-docsets '(<span style="font-style: italic;">"LaTeX"</span>))))
         (tex-mode . (<span style="font-weight: bold;">lambda</span> () (<span style="font-weight: bold;">setq</span> ispell-parser 'tex)))))
</pre>
</div>
</div>
</div>

<div id="outline-container-org1f31a66" class="outline-4">
<h4 id="org1f31a66"><a href="https://github.com/fxbois/web-mode/releases.atom">web-mode</a></h4>
<div class="outline-text-4" id="text-org1f31a66">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package web-mode
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:delight</span> <span style="font-style: italic;">" WB"</span>
  <span style="font-weight: bold;">:mode</span> ((<span style="font-style: italic;">"\\.phtml$"</span>     . web-mode)
         (<span style="font-style: italic;">"\\.tpl\\.php$"</span> . web-mode)
         (<span style="font-style: italic;">"\\.jsp$"</span>       . web-mode)
         (<span style="font-style: italic;">"\\.as[cp]x$"</span>   . web-mode)
         (<span style="font-style: italic;">"\\.erb$"</span>       . web-mode)
         (<span style="font-style: italic;">"\\.html?$"</span>     . web-mode))
  <span style="font-weight: bold;">:hook</span> (web-mode . (<span style="font-weight: bold;">lambda</span> ()
                      (<span style="font-weight: bold;">setq-local</span> counsel-dash-docsets '(<span style="font-style: italic;">"HTML"</span> <span style="font-style: italic;">"HTTP"</span>))))
  <span style="font-weight: bold;">:custom</span>
  (web-mode-attr-indent-offset        2)
  (web-mode-attr-value-indent-offset  2)
  (web-mode-code-indent-offset        2)
  (web-mode-css-offset                2)
  (web-mode-markup-indent-offset      2)
  (web-mode-sql-indent-offset         2)
  (web-mode-block-padding             2)
  (web-mode-script-padding            2))
</pre>
</div>
</div>
</div>

<div id="outline-container-org952a598" class="outline-4">
<h4 id="org952a598">css-mode</h4>
<div class="outline-text-4" id="text-org952a598">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package css-mode
  <span style="font-weight: bold;">:hook</span> (css-mode . (<span style="font-weight: bold;">lambda</span> ()
                      (<span style="font-weight: bold;">setq-local</span> counsel-dash-docsets '(<span style="font-style: italic;">"CSS"</span>))))
  <span style="font-weight: bold;">:custom</span>
  (css-indent-offset 2))
</pre>
</div>
</div>
</div>

<div id="outline-container-org5ed975a" class="outline-4">
<h4 id="org5ed975a"><a href="https://github.com/mooz/js2-mode/releases.atom">js2-mode</a></h4>
<div class="outline-text-4" id="text-org5ed975a">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package js2-mode
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:delight</span> <span style="font-style: italic;">" J2"</span>
  <span style="font-weight: bold;">:mode</span> ((<span style="font-style: italic;">"\\.js</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">(</span><span style="font-style: italic;">on</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">)</span><span style="font-style: italic;">?\\'"</span> . js2-mode)
         (<span style="font-style: italic;">"\\.eslintrc\\'"</span>    . js2-mode))
  <span style="font-weight: bold;">:hook</span> (js2-mode . (<span style="font-weight: bold;">lambda</span> ()
                      (<span style="font-weight: bold;">setq-local</span> flycheck-checker 'javascript-eslint)
                      (<span style="font-weight: bold;">setq-local</span> flycheck-disabled-checkers '(javascript-jshint javascript-jscs))
                      (<span style="font-weight: bold;">setq-local</span> counsel-dash-docsets '(<span style="font-style: italic;">"JavaScript"</span> <span style="font-style: italic;">"HTTP"</span> <span style="font-style: italic;">"NodeJS"</span>))))
  <span style="font-weight: bold;">:custom</span>
  (flycheck-javascript-eslint-executable <span style="font-style: italic;">"eslint"</span>))

(use-package js
  <span style="font-weight: bold;">:delight</span> <span style="font-style: italic;">" JS"</span>
  <span style="font-weight: bold;">:custom</span>
  (js-indent-level 2))
</pre>
</div>
</div>
</div>

<div id="outline-container-org27836bf" class="outline-4">
<h4 id="org27836bf">text-mode</h4>
<div class="outline-text-4" id="text-org27836bf">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package text-mode
  <span style="font-weight: bold;">:mode</span> (<span style="font-style: italic;">"\\.txt$"</span> . text-mode)
  <span style="font-weight: bold;">:delight</span> <span style="font-style: italic;">" TX"</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-org6468ea4" class="outline-4">
<h4 id="org6468ea4">nxml</h4>
<div class="outline-text-4" id="text-org6468ea4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package nxml-mode
  <span style="font-weight: bold;">:delight</span> (nxml-mode <span style="font-style: italic;">" XM"</span>)
  <span style="font-weight: bold;">:mode</span> ((<span style="font-style: italic;">"</span><span style="font-weight: bold; font-style: italic;">\</span><span style="font-style: italic;">.xml$"</span>   . nxml-mode)
         (<span style="font-style: italic;">"</span><span style="font-weight: bold; font-style: italic;">\</span><span style="font-style: italic;">.xsl$"</span>   . nxml-mode)
         (<span style="font-style: italic;">"</span><span style="font-weight: bold; font-style: italic;">\</span><span style="font-style: italic;">.xhtml$"</span> . nxml-mode)
         (<span style="font-style: italic;">"</span><span style="font-weight: bold; font-style: italic;">\</span><span style="font-style: italic;">.page$"</span>  . nxml-mode)
         (<span style="font-style: italic;">"</span><span style="font-weight: bold; font-style: italic;">\</span><span style="font-style: italic;">.plist$"</span> . nxml-mode))
  <span style="font-weight: bold;">:hook</span> (nxml-mode . my/prog-mode-hook-function)
  <span style="font-weight: bold;">:custom</span>
  (nxml-child-indent 2)
  (nxml-attribute-indent 2)
  (nxml-slash-auto-complete-flag t)
  <span style="font-weight: bold;">:config</span>
  (<span style="font-weight: bold;">setq-local</span> tab-width 2)
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">pattern in hideshow mode for nxml mode</span>
  (add-to-list 'hs-special-modes-alist
               (list 'nxml-mode
                     <span style="font-style: italic;">"&lt;!--</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">|</span><span style="font-style: italic;">&lt;[</span><span style="font-style: italic;">^</span><span style="font-style: italic;">/&gt;]*[</span><span style="font-style: italic;">^</span><span style="font-style: italic;">/]&gt;"</span>
                     <span style="font-style: italic;">"--&gt;</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">|</span><span style="font-style: italic;">&lt;/[</span><span style="font-style: italic;">^</span><span style="font-style: italic;">/&gt;]*[</span><span style="font-style: italic;">^</span><span style="font-style: italic;">/]&gt;"</span>
                     <span style="font-style: italic;">"&lt;!--"</span>
                     'nxml-forward-element
                     nil)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org3b93f1a" class="outline-4">
<h4 id="org3b93f1a">sql-mode</h4>
<div class="outline-text-4" id="text-org3b93f1a">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package sql
  <span style="font-weight: bold;">:delight</span> <span style="font-style: italic;">" SQ"</span>
  <span style="font-weight: bold;">:commands</span> (sql-mode)
  <span style="font-weight: bold;">:mode</span> ((<span style="font-style: italic;">"\\.sql$"</span> . sql-mode))
  <span style="font-weight: bold;">:bind</span> (<span style="font-weight: bold;">:map</span> sql-interactive-mode-map
              (<span style="font-style: italic;">"C-j"</span> . comint-send-input))
  <span style="font-weight: bold;">:hook</span> (sql-mode . (<span style="font-weight: bold;">lambda</span> ()
                      (<span style="font-weight: bold;">setq-local</span> flycheck-checker 'sql-sqlint)
                      (<span style="font-weight: bold;">setq-local</span> counsel-dash-docsets '(<span style="font-style: italic;">"MySQL"</span>)))))
</pre>
</div>
</div>
</div>

<div id="outline-container-org6d98d74" class="outline-4">
<h4 id="org6d98d74">project</h4>
<div class="outline-text-4" id="text-org6d98d74">
<p>
Use hosting version of project.el on GitHub via straight until Emacs 28 which ships with latest version of project.el is released.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package project
  <span style="font-weight: bold;">:straight</span> t)
</pre>
</div>
</div>
</div>

<div id="outline-container-org5a015c8" class="outline-4">
<h4 id="org5a015c8">grep</h4>
<div class="outline-text-4" id="text-org5a015c8">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package grep
  <span style="font-weight: bold;">:custom</span>
  (grep-program <span style="font-style: italic;">"rg"</span>)
  <span style="font-weight: bold;">:config</span>
  (bind-keys <span style="font-weight: bold;">:map</span> grep-mode-map
             (<span style="font-style: italic;">"C-j"</span> . compile-goto-error)))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/grep-ripgrep-all</span> ()
  <span style="font-style: italic;">"Grep many kind of files like pdf, epub and more."</span>
  (<span style="font-weight: bold;">interactive</span>)
  (<span style="font-weight: bold;">let</span> ((grep-find-command '(<span style="font-style: italic;">"rga --with-filename --no-heading --line-number --color never -e ''"</span> . 66)))
    (call-interactively 'grep-find)))

(global-set-key (kbd <span style="font-style: italic;">"M-s A"</span>) 'my/grep-ripgrep-all)
</pre>
</div>
</div>
</div>

<div id="outline-container-org4e5eab5" class="outline-4">
<h4 id="org4e5eab5">compile</h4>
<div class="outline-text-4" id="text-org4e5eab5">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package compile
  <span style="font-weight: bold;">:bind</span> (<span style="font-weight: bold;">:map</span> compilation-mode-map
              (<span style="font-style: italic;">"C-j"</span> . compile-goto-error)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orge525731" class="outline-4">
<h4 id="orge525731">log-view</h4>
<div class="outline-text-4" id="text-orge525731">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package log-view
  <span style="font-weight: bold;">:delight</span>
  (log-view-mode <span style="font-style: italic;">" LV"</span>)
  <span style="font-weight: bold;">:mode</span> (<span style="font-style: italic;">"\\.log$"</span> . log-view-mode)
  <span style="font-weight: bold;">:hook</span> ((log-view-mode . my/prog-mode-hook-function )
         (log-view-mode . auto-revert-tail-mode)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org83ab0d9" class="outline-4">
<h4 id="org83ab0d9"><a href="https://github.com/skuro/plantuml-mode/releases.atom">plantuml-mode</a></h4>
<div class="outline-text-4" id="text-org83ab0d9">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package plantuml-mode
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:delight</span> <span style="font-style: italic;">" UM"</span>
  <span style="font-weight: bold;">:hook</span>
  (plantuml-mode . (<span style="font-weight: bold;">lambda</span> ()
                     (<span style="font-weight: bold;">setq-local</span> counsel-dash-docsets '(<span style="font-style: italic;">"PlantUML"</span>))))
  <span style="font-weight: bold;">:custom</span>
  (plantuml-jar-path <span style="font-style: italic;">"/usr/share/plantuml/plantuml.jar"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-org76af69b" class="outline-4">
<h4 id="org76af69b"><a href="https://github.com/lilypond/lilypond/releases.atom">lilypond</a></h4>
<div class="outline-text-4" id="text-org76af69b">
<p>
<a href="https://lilypond.org/unix.html">LilyPond</a> elisp package is included in source tarball available at <a href="https://lilypond.org/download/source">here</a>,
you are required to locate that package where emacs can search.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package lilypond-mode
  <span style="font-weight: bold;">:delight</span> (LilyPond-mode <span style="font-style: italic;">" LP"</span>)
  <span style="font-weight: bold;">:mode</span> (<span style="font-style: italic;">"\\.ly$"</span> . LilyPond-mode)
  <span style="font-weight: bold;">:custom</span>
  (LilyPond-pdf-command <span style="font-style: italic;">"firefox"</span>)
  (LilyPond-midi-command <span style="font-style: italic;">"fluidsynth -a alsa -m alsa_seq -l"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-org69c6f55" class="outline-4">
<h4 id="org69c6f55">conf</h4>
<div class="outline-text-4" id="text-org69c6f55">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package conf-mode
  <span style="font-weight: bold;">:delight</span> <span style="font-style: italic;">" CF"</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbc1ddfc" class="outline-4">
<h4 id="orgbc1ddfc">generic-x</h4>
<div class="outline-text-4" id="text-orgbc1ddfc">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package generic-x
  <span style="font-weight: bold;">:mode</span> ((<span style="font-style: italic;">"\\.conf$"</span>     . apache-conf-generic-mode)
         (<span style="font-style: italic;">"\\.htaccess$"</span> . apache-conf-generic-mode)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org0f830cf" class="outline-4">
<h4 id="org0f830cf">fundamental mode</h4>
<div class="outline-text-4" id="text-org0f830cf">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package emacs
  <span style="font-weight: bold;">:delight</span> (fundamental-mode <span style="font-style: italic;">" FU"</span>))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org4f8e36c" class="outline-3">
<h3 id="org4f8e36c">other third-party packages</h3>
<div class="outline-text-3" id="text-org4f8e36c">
</div>

<div id="outline-container-org994c77d" class="outline-4">
<h4 id="org994c77d"><a href="https://github.com/magit/magit/releases.atom">Magit</a>&#xa0;&#xa0;&#xa0;<span class="tag"><span class="maintaining">maintaining</span></span></h4>
<div class="outline-text-4" id="text-org994c77d">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package magit
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:delight</span>
  (magit-status-mode <span style="font-style: italic;">" MG"</span>)
  (magit-revision-mode <span style="font-style: italic;">" MG"</span>)
  <span style="font-weight: bold;">:bind</span> (<span style="font-weight: bold;">:map</span> magit-status-mode-map
              (<span style="font-style: italic;">"C-j"</span> . magit-visit-thing)
              (<span style="font-style: italic;">"/"</span>   . magit-file-checkout)
              (<span style="font-style: italic;">";"</span>   . magit-list-repositories)
              <span style="font-weight: bold;">:map</span> magit-log-mode-map
              (<span style="font-style: italic;">"C-j"</span> . magit-visit-thing)
              <span style="font-weight: bold;">:map</span> magit-repolist-mode-map
              (<span style="font-style: italic;">"C-j"</span> . magit-repolist-status))
  <span style="font-weight: bold;">:custom</span>
  (magit-repository-directories '((<span style="font-style: italic;">"~/git"</span> . 1))))
</pre>
</div>
</div>

<ul class="org-ul">
<li><a id="org1c43812"></a><a href="https://github.com/magit/git-modes/releases.atom">git-modes</a><br />
<div class="outline-text-5" id="text-org1c43812">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package git-modes
  <span style="font-weight: bold;">:straight</span> t)
</pre>
</div>
</div>
</li>

<li><a id="org5a2f561"></a><a href="https://github.com/magit/orgit/releases.atom">orgit</a><br />
<div class="outline-text-5" id="text-org5a2f561">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package orgit
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:after</span> (magit org)
  <span style="font-weight: bold;">:custom</span>
  (orgit-remote <span style="font-style: italic;">"github"</span>))
</pre>
</div>
</div>
</li>
</ul>
</div>

<div id="outline-container-org0766407" class="outline-4">
<h4 id="org0766407"><a href="https://github.com/bbatsov/projectile/releases.atom">projectile</a>&#xa0;&#xa0;&#xa0;<span class="tag"><span class="maintaining">maintaining</span>&#xa0;<span class="ARCHIVE">ARCHIVE</span>&#xa0;<span class="ignore">ignore</span></span></h4>
</div>

<div id="outline-container-orgc9f3cd6" class="outline-4">
<h4 id="orgc9f3cd6"><a href="https://github.com/ericdanan/counsel-projectile/releases.atom">counsel-projectile</a>&#xa0;&#xa0;&#xa0;<span class="tag"><span class="maintaining">maintaining</span>&#xa0;<span class="ARCHIVE">ARCHIVE</span>&#xa0;<span class="ignore">ignore</span></span></h4>
</div>
<div id="outline-container-org32da8de" class="outline-4">
<h4 id="org32da8de"><a href="https://github.com/Wilfred/ag.el/releases.atom">ag.el</a>&#xa0;&#xa0;&#xa0;<span class="tag"><span class="programs">programs</span>&#xa0;<span class="ARCHIVE">ARCHIVE</span>&#xa0;<span class="ignore">ignore</span></span></h4>
</div>

<div id="outline-container-orgc459e1d" class="outline-4">
<h4 id="orgc459e1d"><a href="https://github.com/nlamirault/ripgrep.el/releases.atom">ripgrep.el</a>&#xa0;&#xa0;&#xa0;<span class="tag"><span class="programs">programs</span>&#xa0;<span class="ARCHIVE">ARCHIVE</span>&#xa0;<span class="ignore">ignore</span></span></h4>
</div>

<div id="outline-container-orgf1a72c8" class="outline-4">
<h4 id="orgf1a72c8"><a href="https://github.com/mhayashi1120/Emacs-wgrep/releases.atom">Emacs-wgrep</a></h4>
<div class="outline-text-4" id="text-orgf1a72c8">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package wgrep
  <span style="font-weight: bold;">:straight</span> t)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb3c43e9" class="outline-4">
<h4 id="orgb3c43e9"><a href="https://github.com/jacktasia/dumb-jump/releases.atom">dumb-jump</a>&#xa0;&#xa0;&#xa0;<span class="tag"><span class="programs">programs</span></span></h4>
<div class="outline-text-4" id="text-orgb3c43e9">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package dumb-jump
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:bind</span> ((<span style="font-style: italic;">"M-g o"</span> . dumb-jump-go-other-window)
         (<span style="font-style: italic;">"M-g j"</span> . dumb-jump-go)
         (<span style="font-style: italic;">"M-g x"</span> . dumb-jump-go-prefer-external)
         (<span style="font-style: italic;">"M-g z"</span> . dumb-jump-go-prefer-external-other-window)
         (<span style="font-style: italic;">"M-g /"</span> . dumb-jump-back)
         (<span style="font-style: italic;">"M-g l"</span> . dumb-jump-quick-look)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb09bd5a" class="outline-4">
<h4 id="orgb09bd5a"><a href="https://github.com/benma/visual-regexp.el/releases.atom">visual-regexp.el</a></h4>
<div class="outline-text-4" id="text-orgb09bd5a">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package visual-regexp
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:bind</span> (<span style="font-style: italic;">"C-%"</span> . vr/query-replace))
</pre>
</div>
</div>

<ul class="org-ul">
<li><a id="org779e5ca"></a><a href="https://github.com/benma/visual-regexp-steroids.el/releases.atom">visual-regexp-steroids.el</a><br />
<div class="outline-text-5" id="text-org779e5ca">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package visual-regexp-steroids
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:after</span> (visual-regexp)
  <span style="font-weight: bold;">:config</span>
  (<span style="font-weight: bold;">setq</span> vr/engine 'python))
</pre>
</div>
</div>
</li>
</ul>
</div>

<div id="outline-container-orgdd0f17d" class="outline-4">
<h4 id="orgdd0f17d"><a href="https://github.com/abo-abo/avy/releases.atom">avy</a></h4>
<div class="outline-text-4" id="text-orgdd0f17d">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package avy
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:bind</span> ((<span style="font-style: italic;">"M-a"</span> . avy-goto-char-timer)
         <span style="font-weight: bold;">:map</span> isearch-mode-map
         (<span style="font-style: italic;">"C-a"</span> . avy-isearch)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org88450c2" class="outline-4">
<h4 id="org88450c2">paredit</h4>
<div class="outline-text-4" id="text-org88450c2">
<p>
Handy commands
</p>
<ul class="org-ul">
<li>press '(' to insert '()' pair</li>
<li>C-&lt;left/right&gt; to barf and slurp s-expressions</li>
<li>call paredit-splice-sexp to strip embracing parenthes</li>
<li>press M-&lt;up&gt; or M-r to delete upper sexp except pointing one</li>
<li>DEL, C-d, C-k act like originals but care for parenthes</li>
<li>press DEL to remedy unbalanced parenthes</li>
<li>press C-q ( to insert ( char manually</li>
</ul>


<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package paredit
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:bind</span> (<span style="font-weight: bold;">:map</span> paredit-mode-map
              (<span style="font-style: italic;">"C-h"</span> . paredit-backward-delete)
              (<span style="font-style: italic;">"C-M-g"</span> .  paredit-splice-sexp)
              (<span style="font-style: italic;">"M-s"</span> . nil)
              (<span style="font-style: italic;">"C-M-;"</span> . paredit-comment-dwim)
              (<span style="font-style: italic;">"M-;"</span> . nil))
  <span style="font-weight: bold;">:hook</span> ((emacs-lisp-mode . enable-paredit-mode)
         (paredit-mode . show-paren-mode)))
</pre>
</div>

<ul class="org-ul">
<li><p>
bug fix
Thanks to <a href="https://andreyorst.gitlab.io/posts/2021-09-30-why-is-paredit-is-so-un-emacsy/">this blog post</a>, a couple of commands in paredit.el are fixed with transient-mark-mode
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">my/paredit-delete-region-functions</span>
  '(paredit-forward-delete
    paredit-backward-delete)
  <span style="font-style: italic;">"List of `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">paredit-mode</span><span style="font-style: italic;">' functions that should support tmm region deletion."</span>)

(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">my/paredit-kill-region-functions</span>
  '(paredit-forward-kill-word
    paredit-backward-kill-word)
  <span style="font-style: italic;">"List of `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">paredit-mode</span><span style="font-style: italic;">' functions that should support tmm region killing."</span>)

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/paredit-fix-transient-mark-mode</span> (orig-fn <span style="font-weight: bold; text-decoration: underline;">&amp;rest</span> args)
  <span style="font-style: italic;">"Allow deleting/killing a region if expression is balanced."</span>
  (<span style="font-weight: bold;">if</span> (<span style="font-weight: bold;">and</span> transient-mark-mode
           mark-active)
      (<span style="font-weight: bold;">cond</span> ((memq this-command my/paredit-delete-region-functions)
             (paredit-delete-region (region-beginning) (region-end)))
            ((memq this-command my/paredit-kill-region-functions)
             (paredit-kill-region (region-beginning) (region-end)))
            (t (apply orig-fn args)))
    (apply orig-fn args)))

(<span style="font-weight: bold;">dolist</span> (fun (append my/paredit-delete-region-functions
                     my/paredit-kill-region-functions))
  (advice-add fun <span style="font-weight: bold;">:around</span> #'my/paredit-fix-transient-mark-mode))
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-org3717ec5" class="outline-4">
<h4 id="org3717ec5"><a href="https://github.com/emacs-lsp/lsp-mode/releases.atom">lsp-mode</a></h4>
<div class="outline-text-4" id="text-org3717ec5">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package lsp-mode
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:commands</span> (lsp lsp-deferred)
  <span style="font-weight: bold;">:hook</span> ((python-mode) . lsp-deferred))
</pre>
</div>
</div>

<ul class="org-ul">
<li><a id="orgb0c00de"></a><a href="https://github.com/emacs-lsp/lsp-ivy/releases.atom">lsp-ivy</a>&#xa0;&#xa0;&#xa0;<span class="tag"><span class="ARCHIVE">ARCHIVE</span>&#xa0;<span class="ignore">ignore</span></span><br /></li>
</ul>
</div>

<div id="outline-container-orgb2d49a3" class="outline-4">
<h4 id="orgb2d49a3"><a href="https://github.com/company-mode/company-mode/releases.atom">company-mode</a></h4>
<div class="outline-text-4" id="text-orgb2d49a3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package company
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:hook</span> (prog-mode . company-mode)
  <span style="font-weight: bold;">:bind</span> (<span style="font-weight: bold;">:map</span> company-active-map
              (<span style="font-style: italic;">"C-j"</span> . company-complete-selection)
              (<span style="font-style: italic;">"C-h"</span> . backward-delete-char-untabify)
              (<span style="font-style: italic;">"C-M-h"</span> . company-show-doc-buffer)
              (<span style="font-style: italic;">"C-n"</span> . company-select-next)
              (<span style="font-style: italic;">"C-p"</span> . company-select-previous)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf36cfe2" class="outline-4">
<h4 id="orgf36cfe2"><a href="https://github.com/flycheck/flycheck/releases.atom">flycheck</a></h4>
<div class="outline-text-4" id="text-orgf36cfe2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package flycheck
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:diminish</span>
  <span style="font-weight: bold;">:hook</span> ((c-mode sh-mode emacs-lisp-mode ruby-mode python-mode js2-mode sql-mode) . flycheck-mode)
  <span style="font-weight: bold;">:custom</span>
  (flycheck-check-syntax-automatically
   '(save new-line idle-change))
  (flycheck-display-errors-delay 10.0)
  (flycheck-checker-error-threshold 1000)
  <span style="font-weight: bold;">:config</span>
  (add-to-list 'display-buffer-alist
               `(,flycheck-error-message-buffer
                 . (display-buffer-reuse-window
                    display-buffer-in-previous-window
                    display-buffer-pop-up-window
                    . ((window-height . 5)))))
  (<span style="font-weight: bold;">with-eval-after-load</span> 'hydra
    (defhydra hydra-flycheck (flycheck-mode-map <span style="font-style: italic;">"C-c !"</span>
                                                <span style="font-weight: bold;">:color</span> red)
      <span style="font-style: italic;">"Flycheck"</span>
      (<span style="font-style: italic;">"C-c"</span> flycheck-compile)
      (<span style="font-style: italic;">"C-w"</span> flycheck-copy-errors-as-kill)
      (<span style="font-style: italic;">"?"</span> flycheck-describe-checker)
      (<span style="font-style: italic;">"C"</span> flycheck-clear)
      (<span style="font-style: italic;">"H"</span> display-local-help)
      (<span style="font-style: italic;">"V"</span> flycheck-version)
      (<span style="font-style: italic;">"c"</span> flycheck-buffer)
      (<span style="font-style: italic;">"e"</span> flycheck-explain-error-at-point)
      (<span style="font-style: italic;">"d"</span> flycheck-display-error-at-point)
      (<span style="font-style: italic;">"i"</span> flycheck-manual)
      (<span style="font-style: italic;">"l"</span> flycheck-list-errors)
      (<span style="font-style: italic;">"n"</span> flycheck-next-error)
      (<span style="font-style: italic;">"p"</span> flycheck-previous-error)
      (<span style="font-style: italic;">"s"</span> flycheck-select-checker)
      (<span style="font-style: italic;">"v"</span> flycheck-verify-setup)
      (<span style="font-style: italic;">"x"</span> flycheck-disable-checker)
      (<span style="font-style: italic;">"q"</span> nil <span style="font-style: italic;">"quit"</span>))))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgdf11b8a" class="outline-4">
<h4 id="orgdf11b8a"><a href="https://github.com/hayamiz/twittering-mode/releases.atom">twittering-mode</a></h4>
<div class="outline-text-4" id="text-orgdf11b8a">
<p>
useful tips:
</p>
<ul class="org-ul">
<li>invoke twittering-toggle-show-replied-statuses on "in reply to" state to show replied messages</li>
<li>invoke twittering-view-user-page (C-c C-v) on user name to jump to user profile page in default browser</li>
</ul>

<p>
CAUTION: An unexpected incident might occur if twittering-icon-mode call lay at :config section of use-package
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package twittering-mode
  <span style="font-weight: bold;">:straight</span> (twittering-mode
             <span style="font-weight: bold;">:host</span> github
             <span style="font-weight: bold;">:repo</span> <span style="font-style: italic;">"hayamiz/twittering-mode"</span>
             <span style="font-weight: bold;">:fork</span> (<span style="font-weight: bold;">:host</span> github
                          <span style="font-weight: bold;">:repo</span> <span style="font-style: italic;">"p-snow/twittering-mode"</span>))
  <span style="font-weight: bold;">:delight</span> <span style="font-style: italic;">" TW"</span>
  <span style="font-weight: bold;">:after</span> hydra
  <span style="font-weight: bold;">:commands</span> twit
  <span style="font-weight: bold;">:init</span>
  (<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">my/twittering-resource-dir</span> <span style="font-style: italic;">"~/var/lib/twmode"</span>)
  <span style="font-weight: bold;">:hook</span>
  (twittering-mode . twittering-icon-mode)
  <span style="font-weight: bold;">:custom</span>
  (twittering-private-info-file
   (expand-file-name <span style="font-style: italic;">"twittering-mode.gpg"</span> my/twittering-resource-dir))
  (twittering-user-id-db-file
   (expand-file-name <span style="font-style: italic;">"user-info.gz"</span> my/twittering-resource-dir))
  (twittering-use-master-password t)
  (twittering-use-ssl t)
  (twittering-number-of-tweets-on-retrieval 50)
  (twittering-use-icon-storage t)
  (twittering-icon-storage-file
   (expand-file-name <span style="font-style: italic;">"icons.gz"</span> my/twittering-resource-dir))
  (twittering-icon-storage-limit 2000)
  (twittering-convert-fix-size 24)
  (twittering-initial-timeline-spec-string '(<span style="font-style: italic;">":home"</span> <span style="font-style: italic;">":mentions"</span>))
  (twittering-edit-skeleton 'inherit-any)
  (twittering-display-remaining t)
  (twittering-timeline-header <span style="font-style: italic;">""</span>)
  (twittering-timeline-footer <span style="font-style: italic;">""</span>)
  (twittering-status-format
   (concat <span style="font-style: italic;">"%RT{%FACE[bold]{RT by %S\n}}"</span>
           <span style="font-style: italic;">"%i %S,"</span>
           <span style="font-style: italic;">"%FACE[font-lock-constant-face]{%FIELD-IF-NONZERO[ &#8634;%d]{retweet_count}}"</span>
           <span style="font-style: italic;">"%FACE[font-lock-warning-face]{%FIELD-IF-NONZERO[ &#9825;%d]{favorite_count}}"</span>
           <span style="font-style: italic;">" %@{}:\n"</span>
           <span style="font-style: italic;">"%T %r%QT{\n+----\n%i %S, %@{}:\n%T %r%R\n+----}\n "</span>))
  <span style="font-weight: bold;">:config</span>
  (bind-keys <span style="font-weight: bold;">:map</span> twittering-mode-map
             <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">move cursor</span>
             (<span style="font-style: italic;">"f"</span> . scroll-up-line)
             (<span style="font-style: italic;">"e"</span> . scroll-down-line)
             (<span style="font-style: italic;">"E"</span> . my/twittering-previous-status-and-top)
             (<span style="font-style: italic;">"SPC"</span> . my/twittering-next-status-and-top)
             (<span style="font-style: italic;">"&lt;"</span> . twittering-goto-first-status)
             (<span style="font-style: italic;">"&gt;"</span> . twittering-goto-last-status)
             (<span style="font-style: italic;">"TAB"</span> . twittering-goto-next-thing)
             (<span style="font-style: italic;">"&lt;backtab&gt;"</span> . twittering-goto-previous-thing)
             (<span style="font-style: italic;">"2"</span> . twittering-goto-previous-thing)
             (<span style="font-style: italic;">"3"</span> . twittering-goto-next-thing)
             (<span style="font-style: italic;">"4"</span> . my/twittering-open)
             <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">create/delete tweets(messages)</span>
             (<span style="font-style: italic;">"u"</span> . twittering-update-status-interactive)
             (<span style="font-style: italic;">"j"</span> . twittering-enter)
             (<span style="font-style: italic;">"J"</span> . twittering-reply-to-user)
             (<span style="font-style: italic;">"RET"</span> . twittering-enter)
             (<span style="font-style: italic;">"o"</span> . my/twittering-open)
             (<span style="font-style: italic;">"C-c C-o"</span> . my/twittering-open)
             (<span style="font-style: italic;">"d"</span> . twittering-direct-message)
             (<span style="font-style: italic;">"k"</span> . twittering-delete-status)
             (<span style="font-style: italic;">"y"</span> . twittering-push-uri-onto-kill-ring)
             (<span style="font-style: italic;">"Y"</span> . twittering-push-tweet-onto-kill-ring)
             <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">response to tweets</span>
             (<span style="font-style: italic;">"r"</span> . twittering-native-retweet)
             (<span style="font-style: italic;">"R"</span> . my/twittering-quote-retweet)
             (<span style="font-style: italic;">"b"</span> . twittering-favorite)
             (<span style="font-style: italic;">"B"</span> . twittering-unfavorite)
             (<span style="font-style: italic;">"l"</span> . twittering-follow)
             (<span style="font-style: italic;">"L"</span> . twittering-unfollow)
             (<span style="font-style: italic;">"t"</span> . twittering-toggle-show-replied-statuses)
             (<span style="font-style: italic;">"T"</span> . twittering-toggle-or-retrieve-replied-statuses)
             <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">switch between timelines</span>
             (<span style="font-style: italic;">"n"</span> . twittering-switch-to-next-timeline)
             (<span style="font-style: italic;">"p"</span> . twittering-switch-to-previous-timeline)
             (<span style="font-style: italic;">"."</span> . twittering-visit-timeline)
             (<span style="font-style: italic;">"@"</span> . twittering-other-user-timeline)
             (<span style="font-style: italic;">"/"</span> . my/twittering-search)
             (<span style="font-style: italic;">"?"</span> . twittering-search)
             (<span style="font-style: italic;">"c1"</span> . twittering-home-timeline)
             (<span style="font-style: italic;">"c2"</span> . (<span style="font-weight: bold;">lambda</span> ()
                       (<span style="font-weight: bold;">interactive</span>)
                       (twittering-visit-timeline <span style="font-style: italic;">":mentions"</span>)))
             (<span style="font-style: italic;">"c3"</span> . (<span style="font-weight: bold;">lambda</span> ()
                       (<span style="font-weight: bold;">interactive</span>)
                       (twittering-visit-timeline <span style="font-style: italic;">":retweets_of_me"</span>)))
             (<span style="font-style: italic;">"c4"</span> . (<span style="font-weight: bold;">lambda</span> ()
                       (<span style="font-weight: bold;">interactive</span>)
                       (twittering-search <span style="font-style: italic;">"from:_p_snow"</span>)))
             (<span style="font-style: italic;">"c5"</span> . (<span style="font-weight: bold;">lambda</span> ()
                       (<span style="font-weight: bold;">interactive</span>)
                       (twittering-visit-timeline <span style="font-style: italic;">":favorites"</span>)))
             (<span style="font-style: italic;">"c6"</span> . (<span style="font-weight: bold;">lambda</span> ()
                       (<span style="font-weight: bold;">interactive</span>)
                       (twittering-visit-timeline <span style="font-style: italic;">":direct_message_events"</span>)))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/twittering-next-status-and-top</span> ()
  <span style="font-style: italic;">"docstring"</span>
  (<span style="font-weight: bold;">interactive</span>)
  (twittering-goto-next-status)
  (recenter-top-bottom 0))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/twittering-previous-status-and-top</span> ()
  <span style="font-style: italic;">"docstring"</span>
  (<span style="font-weight: bold;">interactive</span>)
  (twittering-goto-previous-status)
  (recenter-top-bottom 0))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/twittering-quote-retweet</span> ()
  <span style="font-style: italic;">"docstring"</span>
  (<span style="font-weight: bold;">interactive</span>)
  (<span style="font-weight: bold;">let</span> ((orig-tweet-uri (twittering-push-uri-onto-kill-ring)))
    (twittering-update-status (format <span style="font-style: italic;">"\n%s"</span> orig-tweet-uri))
    (next-line -1 t)))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/twittering-search</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> arg)
  <span style="font-style: italic;">""</span>
  (<span style="font-weight: bold;">interactive</span> <span style="font-style: italic;">"P"</span>)
  (<span style="font-weight: bold;">let*</span> ((spec (get-text-property (point) 'goto-spec))
         (username (get-text-property (point) 'username))
         (word (<span style="font-weight: bold;">cond</span>
                ((use-region-p) (buffer-substring (region-beginning) (region-end)))
                ((stringp spec) spec)
                ((eq (car spec) 'user) (format <span style="font-style: italic;">"@%s"</span> (cadr spec)))
                ((stringp username) username))))
    (twittering-search (<span style="font-weight: bold;">and</span> (not arg) word))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/twittering-open</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> arg)
  <span style="font-style: italic;">""</span>
  (<span style="font-weight: bold;">interactive</span> <span style="font-style: italic;">"P"</span>)
  (<span style="font-weight: bold;">unless</span> (my/enter-thing-at-point)
    (<span style="font-weight: bold;">let</span> ((uri (<span style="font-weight: bold;">or</span> (get-text-property (point) 'uri)
                   (<span style="font-weight: bold;">if</span> (get-text-property (point) 'field)
                       (<span style="font-weight: bold;">let*</span> ((id (get-text-property (point) 'id))
                              (status (twittering-find-status id)))
                         (twittering-get-status-url-from-alist status))
                     nil))))
      (<span style="font-weight: bold;">cl-case</span> (prefix-numeric-value arg)
        (16 (browse-url-default-browser uri))
        (4 (eww-browse-url uri))
        (t (open-url uri))))))
</pre>
</div>
</div>
</div>

<div id="outline-container-org5e7a337" class="outline-4">
<h4 id="org5e7a337"><a href="https://github.com/remyferre/comment-dwim-2/releases.atom">comment-dwim-2</a>&#xa0;&#xa0;&#xa0;<span class="tag"><span class="programs">programs</span></span></h4>
<div class="outline-text-4" id="text-org5e7a337">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package comment-dwim-2
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:defer</span> 1
  <span style="font-weight: bold;">:bind</span> (<span style="font-style: italic;">"M-;"</span> . comment-dwim-2)
  <span style="font-weight: bold;">:config</span>
  (<span style="font-weight: bold;">setf</span> comment-dwim-2--inline-comment-behavior 'reindent-comment
        cd2/region-command 'cd2/comment-or-uncomment-region))
</pre>
</div>
</div>
</div>

<div id="outline-container-org22c290c" class="outline-4">
<h4 id="org22c290c">undo-tree</h4>
<div class="outline-text-4" id="text-org22c290c">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package undo-tree
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:diminish</span> undo-tree-mode
  <span style="font-weight: bold;">:hook</span>
  (after-init . global-undo-tree-mode)
  <span style="font-weight: bold;">:custom</span>
  (undo-tree-enable-undo-in-region t)
  <span style="font-weight: bold;">:config</span>
  (<span style="font-weight: bold;">setq</span> undo-tree-visualizer-buffer-name <span style="font-style: italic;">"*undo tree*"</span>)
  (add-to-list 'display-buffer-alist
               `(,undo-tree-visualizer-buffer-name . (display-buffer-in-side-window
                                                      . ((side . right)
                                                         (window-width . 15))))))
</pre>
</div>
</div>
</div>

<div id="outline-container-org4a5aaa0" class="outline-4">
<h4 id="org4a5aaa0"><a href="https://github.com/emacsorphanage/quickrun/releases.atom">quickrun</a>&#xa0;&#xa0;&#xa0;<span class="tag"><span class="programs">programs</span></span></h4>
<div class="outline-text-4" id="text-org4a5aaa0">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package quickrun
  <span style="font-weight: bold;">:straight</span> t)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgaf3bc8d" class="outline-4">
<h4 id="orgaf3bc8d"><a href="https://github.com/magnars/expand-region.el/releases.atom">expand-region.el</a>&#xa0;&#xa0;&#xa0;<span class="tag"><span class="mark">mark</span></span></h4>
<div class="outline-text-4" id="text-orgaf3bc8d">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package expand-region
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:bind</span> ((<span style="font-style: italic;">"C-,"</span>   . er/expand-region)
         (<span style="font-style: italic;">"C-M-,"</span> . er/contract-region))
  <span style="font-weight: bold;">:config</span>
  (<span style="font-weight: bold;">push</span> 'er/mark-outside-pairs er/try-expand-list))
</pre>
</div>
</div>
</div>

<div id="outline-container-org1e70d67" class="outline-4">
<h4 id="org1e70d67"><a href="https://github.com/Wilfred/helpful/releases.atom">helpful</a>&#xa0;&#xa0;&#xa0;<span class="tag"><span class="help">help</span></span></h4>
<div class="outline-text-4" id="text-org1e70d67">
<p>
helpful-mode shows  than <a href="#orgdffa154">help-mode</a>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package helpful
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:bind</span>
  (<span style="font-weight: bold;">:map</span> help-map
        (<span style="font-style: italic;">"f"</span> . helpful-callable)
        (<span style="font-style: italic;">"v"</span> . helpful-variable)
        (<span style="font-style: italic;">"k"</span> . helpful-key))
  (<span style="font-weight: bold;">:map</span> helpful-mode-map
        (<span style="font-style: italic;">"w"</span> . helpful-push-symbol-onto-kill-ring) )
  <span style="font-weight: bold;">:config</span>
  (bind-keys <span style="font-weight: bold;">:map</span> helpful-mode-map
             (<span style="font-style: italic;">"f"</span> . scroll-up-line)
             (<span style="font-style: italic;">"e"</span> . scroll-down-line)
             (<span style="font-style: italic;">"SPC"</span> . my/forward-paragraph)
             (<span style="font-style: italic;">"E"</span> . my/backward-paragraph)
             (<span style="font-style: italic;">"2"</span> . backward-button)
             (<span style="font-style: italic;">"3"</span> . forward-button)
             (<span style="font-style: italic;">"4"</span> . push-button)))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">helpful-push-symbol-onto-kill-ring</span> ()
  <span style="font-style: italic;">"Push symbol name to kill ring."</span>
  (<span style="font-weight: bold;">interactive</span>)
  (<span style="font-weight: bold;">let</span> ((symbol (symbol-name helpful--sym)))
    (kill-new (symbol-name helpful--sym))
    (message <span style="font-style: italic;">"COPY: %s"</span> symbol)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf0000d9" class="outline-4">
<h4 id="orgf0000d9"><a href="https://github.com/abo-abo/define-word/releases.atom">define-word</a></h4>
<div class="outline-text-4" id="text-orgf0000d9">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package define-word
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:custom</span>
  (define-word-displayfn-alist
    '((wordnik . my/define-word--display-in-buffer)
      (openthesaurus . my/define-word--display-in-buffer)
      (webster . my/define-word--display-in-buffer)
      (weblio . my/define-word--display-in-buffer)))
  (define-word-default-service 'wordnik)
  <span style="font-weight: bold;">:config</span>
  (<span style="font-weight: bold;">setf</span> (cdr (assoc 'wordnik define-word-services))
        '(<span style="font-style: italic;">"http://wordnik.com/words/%s"</span> my/define-word--parse-wordnik-all))
  (<span style="font-weight: bold;">push</span> '(weblio <span style="font-style: italic;">"https://ejje.weblio.jp/content/%s"</span>
                 my/define-word--parse-weblio)
        define-word-services)
  (<span style="font-weight: bold;">push</span> '(<span style="font-style: italic;">"&lt;b&gt;</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">(</span><span style="font-style: italic;">.*?</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">)</span><span style="font-style: italic;">&lt;/b&gt;"</span> bold)
        define-word--tag-faces)
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">fix issue #31 temporally</span>
  (<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/define-word--fix-31</span> (define-word-orig <span style="font-weight: bold; text-decoration: underline;">&amp;rest</span> args)
    <span style="font-style: italic;">"Fix `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">define-word</span><span style="font-style: italic;">' backends that require a user agent (like wordnik)."</span>
    (<span style="font-weight: bold;">let</span> ((url-request-extra-headers
           '((<span style="font-style: italic;">"User-Agent"</span> .
              <span style="font-style: italic;">"Mozilla/5.0 (Macintosh; Intel Mac OS X 11_5_2) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/93.0.4577.63 Safari/537.36"</span>))))
      (apply define-word-orig args)))
  (advice-add #'define-word <span style="font-weight: bold;">:around</span> #'my/define-word--fix-31))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/define-word</span> ()
  <span style="font-style: italic;">"docstring"</span>
  (<span style="font-weight: bold;">interactive</span>)
  (<span style="font-weight: bold;">if</span> (use-region-p)
      (call-interactively #'define-word-at-point)
    (call-interactively #'define-word)))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/define-word--display-in-buffer</span> (definition)
  <span style="font-style: italic;">"docstring"</span>
  (<span style="font-weight: bold;">let*</span> ((buf-name <span style="font-style: italic;">"*DEFINE WORD*"</span>)
         (buffer (get-buffer-create buf-name))
         (display-buffer-alist
          `((,buf-name
             (display-buffer-same-window)))))
    (<span style="font-weight: bold;">with-current-buffer</span> buffer
      (read-only-mode -1)
      (erase-buffer)
      (insert definition)
      (goto-char (point-min))
      (<span style="font-weight: bold;">save-excursion</span> (xml-parse-string))
      (read-only-mode 1)
      (buffer-face-set 'my/medium-large-gothic-face))
    (display-buffer buffer)))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/define-word--parse-wordnik-example</span> ()
  (<span style="font-weight: bold;">save-excursion</span>
    (<span style="font-weight: bold;">let</span> (beg
          results
          (define-word-limit 10))
      (re-search-forward <span style="font-style: italic;">"&lt;h2&gt;Examples"</span> nil t)
      (<span style="font-weight: bold;">save-excursion</span>
        (<span style="font-weight: bold;">setq</span> beg (re-search-forward <span style="font-style: italic;">"&lt;div class=\"relatedWords-module\"&gt;"</span> nil t)))
      (<span style="font-weight: bold;">while</span> (re-search-forward <span style="font-style: italic;">"&lt;p class=\"text\"&gt;</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">(</span><span style="font-style: italic;">.*</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">)</span><span style="font-style: italic;">&lt;/p&gt;"</span> beg t)
        (<span style="font-weight: bold;">push</span> <span style="font-style: italic;">"---"</span> results)
        (<span style="font-weight: bold;">push</span> (match-string 1) results))
      (<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">setq</span> results (nreverse results))
        (define-word--convert-html-tag-to-face (define-word--join-results results))))))

(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">my/define-word-part-map-alist</span> '((<span style="font-style: italic;">"adjective"</span> <span style="font-style: italic;">"adj."</span>)
                                        (<span style="font-style: italic;">"adverb"</span> <span style="font-style: italic;">"adv."</span>)
                                        (<span style="font-style: italic;">"intransitive verb"</span> <span style="font-style: italic;">"v.i."</span>)
                                        (<span style="font-style: italic;">"transitive verb"</span> <span style="font-style: italic;">"v.t."</span>)))


(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/define-word--parse-wordnik</span> ()
  (<span style="font-weight: bold;">let</span> ((str (define-word--parse-wordnik)))
    (<span style="font-weight: bold;">with-temp-buffer</span>
      (insert str)
      (mapc (<span style="font-weight: bold;">lambda</span> (abbrev-map)
              (goto-char (point-min))
              (<span style="font-weight: bold;">while</span> (re-search-forward (format <span style="font-style: italic;">"</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">(</span><span style="font-style: italic;">%s</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">)</span><span style="font-style: italic;">"</span> (car abbrev-map)) nil t)
                (<span style="font-weight: bold;">let</span> ((match (match-string 1)))
                  (replace-match
                   (propertize (cadr abbrev-map) 'face (text-properties-at (point)))))))
            my/define-word-part-map-alist)
      (buffer-string))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/define-word--parse-wordnik-related-word</span> ()
  <span style="font-style: italic;">"docstring"</span>
  (<span style="font-weight: bold;">save-excursion</span>
    (<span style="font-weight: bold;">save-match-data</span>
      (seq-reduce
       (<span style="font-weight: bold;">lambda</span> (accum group)
         (<span style="font-weight: bold;">let</span> (results
               (define-word-limit 20))
           (<span style="font-weight: bold;">if</span> (re-search-forward (format <span style="font-style: italic;">"&lt;h3&gt;%s"</span> group) nil t)
               (<span style="font-weight: bold;">progn</span> (<span style="font-weight: bold;">save-excursion</span>
                        (<span style="font-weight: bold;">setq</span> beg (re-search-forward <span style="font-style: italic;">"&lt;div class=\"related-group-header clearfix\"&gt;"</span> nil t)))
                      (<span style="font-weight: bold;">push</span> (concat group <span style="font-style: italic;">":"</span>) results)
                      (<span style="font-weight: bold;">while</span> (re-search-forward <span style="font-style: italic;">"&lt;span data-definition-for=\"</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">(</span><span style="font-style: italic;">[</span><span style="font-style: italic;">^</span><span style="font-style: italic;">\"]*</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">)</span><span style="font-style: italic;">\""</span> beg t)
                        (<span style="font-weight: bold;">push</span> (concat <span style="font-style: italic;">"- "</span> (match-string 1)) results)
                        (re-search-forward <span style="font-style: italic;">"&lt;/span&gt;"</span>))
                      (concat (<span style="font-weight: bold;">when</span> accum (concat accum <span style="font-style: italic;">"\n\n"</span>))
                              (<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">setq</span> results (nreverse results))
                                (define-word--convert-html-tag-to-face (define-word--join-results results)))))
             accum)))
       '(<span style="font-style: italic;">"antonym"</span> <span style="font-style: italic;">"equivalents"</span> <span style="font-style: italic;">"hypernyms"</span> <span style="font-style: italic;">"hyponyms"</span> <span style="font-style: italic;">"same context"</span>)
       nil))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/define-word--parse-wordnik-all</span> ()
  <span style="font-style: italic;">""</span>
  (<span style="font-weight: bold;">let*</span> ((def (funcall #'my/define-word--parse-wordnik))
         (rel (funcall #'my/define-word--parse-wordnik-related-word))
         (exp (funcall #'my/define-word--parse-wordnik-example)))
    (concat <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">"Definitions:\n" (funcall #'define-word--parse-wordnik) "\n\n"</span>
     (<span style="font-weight: bold;">when</span> def (format <span style="font-style: italic;">"Definitions:\n%s\n\n"</span> def))
     (<span style="font-weight: bold;">when</span> rel (format <span style="font-style: italic;">"%s\n\n"</span> rel))
     (<span style="font-weight: bold;">when</span> exp (format <span style="font-style: italic;">"Examples:\n%s\n"</span> exp)))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/define-word--parse-weblio</span> ()
  (<span style="font-weight: bold;">save-excursion</span>
    (<span style="font-weight: bold;">let</span> (beg
          results
          (define-word-limit 10))
      (re-search-forward <span style="font-style: italic;">"&lt;span class=\"squareCircle description\"&gt;\n&#24847;&#21619;&#12539;&#23550;&#35379;&lt;/span&gt;"</span> nil t)
      (<span style="font-weight: bold;">save-excursion</span>
        (<span style="font-weight: bold;">setq</span> beg (re-search-forward <span style="font-style: italic;">"&lt;/div&gt;"</span> nil t)))
      (<span style="font-weight: bold;">while</span> (re-search-forward <span style="font-style: italic;">"&lt;span class=\"content-explanation ej\"&gt;\n</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">(</span><span style="font-style: italic;">[</span><span style="font-style: italic;">^</span><span style="font-style: italic;">&lt;]*</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">)</span><span style="font-style: italic;">&lt;/span&gt;"</span> beg t)
        (<span style="font-weight: bold;">push</span> (match-string 1) results))
      (<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">setq</span> results (nreverse results))
        (define-word--convert-html-tag-to-face (define-word--join-results results))))))
</pre>
</div>
</div>
</div>

<div id="outline-container-org71fae34" class="outline-4">
<h4 id="org71fae34"><a href="https://github.com/hpdeifel/synosaurus/releases.atom">synosaurus</a></h4>
<div class="outline-text-4" id="text-org71fae34">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package synosaurus
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:custom</span>
  (synosaurus-choose-method 'default))
</pre>
</div>
</div>
</div>

<div id="outline-container-org380052c" class="outline-4">
<h4 id="org380052c"><a href="https://github.com/purcell/exec-path-from-shell/releases.atom">exec-path-from-shell</a></h4>
<div class="outline-text-4" id="text-org380052c">
<p>
A GNU Emacs library to ensure environment variables inside Emacs look the same as in the user's shell.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package exec-path-from-shell
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:config</span>
  (<span style="font-weight: bold;">when</span> (memq window-system '(mac))
    (exec-path-from-shell-initialize)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org22964c0" class="outline-4">
<h4 id="org22964c0"><a href="https://github.com/emacs-jp/migemo/releases.atom">migemo</a></h4>
<div class="outline-text-4" id="text-org22964c0">
<p>
migemo allows us to search incrementally Japanese words using roma-ji expression.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package migemo
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:ensure-system-package</span> cmigemo
  <span style="font-weight: bold;">:custom</span>
  (migemo-command <span style="font-style: italic;">"cmigemo"</span>)
  (migemo-options '(<span style="font-style: italic;">"-q"</span> <span style="font-style: italic;">"--emacs"</span>))
  (migemo-user-dictionary nil)
  (migemo-coding-system 'utf-8-unix)
  (migemo-regex-dictionary nil)
  <span style="font-weight: bold;">:config</span>
  (<span style="font-weight: bold;">cond</span>
   ((string= system-type <span style="font-style: italic;">"gnu/linux"</span>)
    (<span style="font-weight: bold;">setq</span> migemo-dictionary <span style="font-style: italic;">"/usr/share/cmigemo/utf-8/migemo-dict"</span>))
   ((string= system-type <span style="font-style: italic;">"darwin"</span>)
    (<span style="font-weight: bold;">setq</span> migemo-dictionary <span style="font-style: italic;">"/usr/local/Cellar/cmigemo/20110227/share/migemo/utf-8/migemo-dict"</span>)))
  (load-library <span style="font-style: italic;">"migemo"</span>)
  (migemo-init))
</pre>
</div>
</div>

<ul class="org-ul">
<li><a id="orge700d1c"></a><a href="https://github.com/ROCKTAKEY/ivy-migemo/releases.atom">ivy-migemo</a>&#xa0;&#xa0;&#xa0;<span class="tag"><span class="ARCHIVE">ARCHIVE</span>&#xa0;<span class="ignore">ignore</span></span><br /></li>
</ul>
</div>

<div id="outline-container-orgba0e08e" class="outline-4">
<h4 id="orgba0e08e"><a href="https://github.com/emacs-jp/japanese-holidays/releases.atom">japanese-holidays</a></h4>
<div class="outline-text-4" id="text-orgba0e08e">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package japanese-holidays
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:after</span> calendar
  <span style="font-weight: bold;">:hook</span>
  ((calendar-today-visible calendar-today-invisible) . japanese-holiday-mark-weekend)
  (calendar-today-visible . calendar-mark-today)
  <span style="font-weight: bold;">:config</span>
  (<span style="font-weight: bold;">setq</span> calendar-holidays
        (append japanese-holidays holiday-local-holidays holiday-other-holidays))
  (<span style="font-weight: bold;">setq</span> calendar-mark-holidays-flag t)
  (<span style="font-weight: bold;">setq</span> japanese-holiday-weekend '(0 6)
        japanese-holiday-weekend-marker
        '(holiday nil nil nil nil nil japanese-holiday-saturday)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org0d99201" class="outline-4">
<h4 id="org0d99201"><a href="https://github.com/nflath/hungry-delete/releases.atom">hungry-delete</a></h4>
<div class="outline-text-4" id="text-org0d99201">
<p>
Aggressively delete successive white spaces.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package hungry-delete
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:diminish</span>
  <span style="font-weight: bold;">:config</span>
  (global-hungry-delete-mode 1))
</pre>
</div>
</div>
</div>
<div id="outline-container-org4ca72a2" class="outline-4">
<h4 id="org4ca72a2"><a id="ID-4a58219c-74dd-4135-b56d-876b0db2cd83"></a><a href="https://github.com/Malabarba/aggressive-indent-mode/releases.atom">aggressive-indent-mode</a></h4>
<div class="outline-text-4" id="text-org4ca72a2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package aggressive-indent
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:diminish</span> (aggressive-indent-mode . <span style="font-style: italic;">"ai"</span>)
  <span style="font-weight: bold;">:hook</span> (emacs-lisp-mode . aggressive-indent-mode))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgc9ab3c7" class="outline-4">
<h4 id="orgc9ab3c7"><a href="https://github.com/emacsmirror/adaptive-wrap/releases.atom">adaptive-wrap</a></h4>
<div class="outline-text-4" id="text-orgc9ab3c7">
<p>
adaptive-wrap and visual-line-mode are active in a bundle in a bunch of major modes.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package adaptive-wrap
  <span style="font-weight: bold;">:straight</span> t)
</pre>
</div>
</div>
</div>

<div id="outline-container-orge24a1cc" class="outline-4">
<h4 id="orge24a1cc"><a href="https://github.com/iqbalansari/restart-emacs/releases.atom">restart-emacs</a></h4>
<div class="outline-text-4" id="text-orge24a1cc">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package restart-emacs
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:bind</span> ((<span style="font-style: italic;">"C-M-&lt;delete&gt;"</span>   . restart-emacs)
         (<span style="font-style: italic;">"C-M-S-&lt;delete&gt;"</span> . save-buffers-kill-emacs)))
</pre>
</div>
</div>
</div>
<div id="outline-container-orga461fed" class="outline-4">
<h4 id="orga461fed"><a href="https://github.com/coldnew/pangu-spacing/releases.atom">pangu-spacing</a></h4>
<div class="outline-text-4" id="text-orga461fed">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package pangu-spacing
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:diminish</span> pangu-spacing-mode
  <span style="font-weight: bold;">:custom</span>
  (pangu-spacing-real-insert-separtor t)
  <span style="font-weight: bold;">:config</span>
  (<span style="font-weight: bold;">setq</span> pangu-spacing-chinese-before-english-regexp
        (<span style="font-weight: bold;">rx</span> (group-n 1 (category japanese))
            (group-n 2 (in <span style="font-style: italic;">"a-zA-Z0-9"</span>))))
  (<span style="font-weight: bold;">setq</span> pangu-spacing-chinese-after-english-regexp
        (<span style="font-weight: bold;">rx</span> (group-n 1 (in <span style="font-style: italic;">"a-zA-Z0-9"</span>))
            (group-n 2 (category japanese)))))
</pre>
</div>
</div>
</div>
<div id="outline-container-org135dde8" class="outline-4">
<h4 id="org135dde8"><a href="https://github.com/justbur/emacs-which-key/releases.atom">emacs-which-key</a></h4>
<div class="outline-text-4" id="text-org135dde8">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package which-key
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:diminish</span> which-key-mode
  <span style="font-weight: bold;">:custom</span>
  (which-key-use-C-h-commands t)
  (which-key-max-description-length 43)
  (which-key-idle-delay 0.7)
  (which-key-separator <span style="font-style: italic;">" : "</span>)
  (which-key-side-window-max-height 0.5)
  <span style="font-weight: bold;">:config</span>
  (which-key-mode 1)
  (which-key-setup-side-window-bottom))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgb1c3c5e" class="outline-4">
<h4 id="orgb1c3c5e"><a href="https://github.com/abo-abo/hydra/releases.atom">hydra</a></h4>
<div class="outline-text-4" id="text-orgb1c3c5e">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package hydra
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:custom</span>
  (hydra-is-helpful nil))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgcb870b7" class="outline-4">
<h4 id="orgcb870b7"><a href="https://github.com/NicolasPetton/pass/releases.atom">pass</a></h4>
<div class="outline-text-4" id="text-orgcb870b7">
<p>
Major mode for manupulating password store file.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package pass
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:config</span>
  (bind-keys <span style="font-weight: bold;">:map</span> pass-mode-map
             (<span style="font-style: italic;">"C-j"</span> . pass-view)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org6ae73d4" class="outline-4">
<h4 id="org6ae73d4"><a href="https://github.com/zx2c4/password-store/releases.atom">password-store</a></h4>
<div class="outline-text-4" id="text-org6ae73d4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package password-store
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:custom</span>
  (password-store-time-before-clipboard-restore 25))
</pre>
</div>
</div>
</div>

<div id="outline-container-orge19477b" class="outline-4">
<h4 id="orge19477b">nov.el</h4>
<div class="outline-text-4" id="text-orge19477b">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package nov
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:demand</span> t
  <span style="font-weight: bold;">:mode</span> (<span style="font-style: italic;">"\\.epub$"</span> . nov-mode)
  <span style="font-weight: bold;">:hook</span> (nov-mode . nov-abbreviate-file-name)
  <span style="font-weight: bold;">:custom</span>
  (nov-variable-pitch nil)
  (nov-text-width t)
  <span style="font-weight: bold;">:config</span>
  (bind-keys <span style="font-weight: bold;">:map</span> nov-mode-map
             (<span style="font-style: italic;">"f"</span> . scroll-up-line)
             (<span style="font-style: italic;">"e"</span> . scroll-down-line)
             (<span style="font-style: italic;">"SPC"</span> . my/forward-paragraph)
             (<span style="font-style: italic;">"E"</span> . my/backward-paragraph)
             (<span style="font-style: italic;">"2"</span> . shr-next-link)
             (<span style="font-style: italic;">"4"</span> . nov-browse-url)
             (<span style="font-style: italic;">"C-j"</span> . nov-browse-url)))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">nov-abbreviate-file-name</span> ()
  <span style="font-style: italic;">"Shorten `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">nov-file-name</span><span style="font-style: italic;">' using `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">directory-abbrev-alist</span><span style="font-style: italic;">'."</span>
  (<span style="font-weight: bold;">setq</span> nov-file-name (abbreviate-file-name nov-file-name)))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgdd3789a" class="outline-4">
<h4 id="orgdd3789a"><a href="https://github.com/joaotavora/yasnippet/releases.atom">yasnippet</a></h4>
<div class="outline-text-4" id="text-orgdd3789a">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package yasnippet
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:delight</span> (snippet-mode <span style="font-style: italic;">" SN"</span>)
  <span style="font-weight: bold;">:diminish</span> (yas-minor-mode . <span style="font-style: italic;">"ys"</span>)
  <span style="font-weight: bold;">:hook</span>
  ((prog-mode org-mode shell-mode) . yas-minor-mode-on)
  <span style="font-weight: bold;">:custom</span>
  (yas-triggers-in-field t)
  <span style="font-weight: bold;">:config</span>
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">work around code</span>
  (yas-reload-all))
</pre>
</div>
</div>
<ul class="org-ul">
<li><a id="org785fae1"></a><a href="https://github.com/AndreaCrotti/yasnippet-snippets/releases.atom">yasnippet-snippets</a><br />
<div class="outline-text-5" id="text-org785fae1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package yasnippet-snippets
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:after</span> yasnippet)
</pre>
</div>
</div>
</li>
</ul>
</div>
<div id="outline-container-org7226713" class="outline-4">
<h4 id="org7226713"><a href="https://github.com/politza/pdf-tools/releases.atom">pdf-tools</a></h4>
<div class="outline-text-4" id="text-org7226713">
<div class="org-src-container">
<pre class="src src-scheme"><span style="font-style: italic;">"emacs-pdf-tools"</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package pdf-tools
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:delight</span>
  (pdf-view-mode <span style="font-style: italic;">" PV"</span>)
  <span style="font-weight: bold;">:mode</span> (<span style="font-style: italic;">"\\.pdf$"</span> . pdf-view-mode)
  <span style="font-weight: bold;">:hook</span>
  (pdf-view-mode . pdf-view-midnight-minor-mode)
  (pdf-view-mode . pdf-view-fit-page-to-window)
  <span style="font-weight: bold;">:custom</span>
  (pdf-view-display-size 'fit-width))
</pre>
</div>
</div>
</div>

<div id="outline-container-org495f068" class="outline-4">
<h4 id="org495f068"><a href="https://github.com/emacs-straight/rainbow-mode/releases.atom">rainbow-mode</a></h4>
<div class="outline-text-4" id="text-org495f068">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package rainbow-mode
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:diminish</span>
  (rainbow-mode . <span style="font-style: italic;">"rb"</span>)
  <span style="font-weight: bold;">:hook</span>
  ((css-mode scss-mode php-mode html-mode) . rainbow-mode)
  <span style="font-weight: bold;">:custom</span>
  (rainbow-html-colors t)
  (rainbow-x-colors t)
  (rainbow-latex-colors t)
  (rainbow-ansi-colors t))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgefc5eec" class="outline-4">
<h4 id="orgefc5eec"><a href="https://github.com/jwiegley/alert/releases.atom">alert</a></h4>
<div class="outline-text-4" id="text-orgefc5eec">
<div class="org-src-container">
<pre class="src src-scheme"><span style="font-style: italic;">"mpg321"</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package alert
  <span style="font-weight: bold;">:straight</span> t
  <span style="font-weight: bold;">:config</span>
  (set-face-background 'alert-saved-fringe-face nil)
  (alert-add-rule <span style="font-weight: bold;">:status</span> '(buried)
                  <span style="font-weight: bold;">:mode</span>   'mu4e-alert
                  <span style="font-weight: bold;">:style</span>  'fringe)
  (alert-add-rule <span style="font-weight: bold;">:status</span> '(buried)
                  <span style="font-weight: bold;">:mode</span>   'dired-mode
                  <span style="font-weight: bold;">:style</span>  'fringe)
  (alert-add-rule <span style="font-weight: bold;">:status</span> '(buried)
                  <span style="font-weight: bold;">:mode</span>   'org-mode
                  <span style="font-weight: bold;">:style</span>  'libnotify))

(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">alarm-sound</span> (expand-file-name <span style="font-style: italic;">"~/Music/levelup.mp3"</span>))
(alert-define-style 'alarm
                    <span style="font-weight: bold;">:title</span> <span style="font-style: italic;">"alarm"</span>
                    <span style="font-weight: bold;">:notifier</span>
                    (<span style="font-weight: bold;">lambda</span> (info)
                      (<span style="font-weight: bold;">let</span> ((message (plist-get info <span style="font-weight: bold;">:message</span>))
                            (severity (plist-get info <span style="font-weight: bold;">:severity</span>))
                            (title (plist-get info <span style="font-weight: bold;">:title</span>))
                            (icon (plist-get info <span style="font-weight: bold;">:icon</span>))
                            (category (plist-get info <span style="font-weight: bold;">:category</span>))
                            (buffer (plist-get info <span style="font-weight: bold;">:buffer</span>))
                            (mode (plist-get info <span style="font-weight: bold;">:mode</span>))
                            (data (plist-get info <span style="font-weight: bold;">:data</span>))
                            (style (plist-get info <span style="font-weight: bold;">:style</span>))
                            (persistent (plist-get info <span style="font-weight: bold;">:persistent</span>))
                            (id (plist-get info <span style="font-weight: bold;">:id</span>))
                            (system-volume (string-trim (shell-command-to-string <span style="font-style: italic;">"volget"</span>))))
                        (<span style="font-weight: bold;">if</span> (string= system-volume <span style="font-style: italic;">"0"</span>)
                            (alert message <span style="font-weight: bold;">:severity</span> severity <span style="font-weight: bold;">:title</span> title <span style="font-weight: bold;">:icon</span> icon <span style="font-weight: bold;">:category</span> category <span style="font-weight: bold;">:buffer</span> buffer <span style="font-weight: bold;">:mode</span> mode <span style="font-weight: bold;">:data</span> data <span style="font-weight: bold;">:style</span> 'fringe <span style="font-weight: bold;">:persistent</span> persistent <span style="font-weight: bold;">:id</span> id)
                          (start-process-shell-command <span style="font-style: italic;">"system-alarm"</span> nil
                                                       (mapconcat #'shell-quote-argument
                                                                  (list <span style="font-style: italic;">"mpg321"</span> alarm-sound)
                                                                  <span style="font-style: italic;">" "</span>))))))
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span style="font-weight: bold; font-style: italic;">#</span><span style="font-weight: bold; font-style: italic;">!/usr/bin/</span><span style="font-weight: bold;">env</span><span style="font-weight: bold; font-style: italic;"> bash</span>

pactl list sinks | grep <span style="font-style: italic;">'^[[:space:]]Volume:'</span> | head -n $(($<span style="font-weight: bold; font-style: italic;">SINK</span> + 1 )) | tail -n 1 | sed -e <span style="font-style: italic;">'s,.* \([0-9][0-9]*\)%.*,\1,'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgaa9ccd6" class="outline-4">
<h4 id="orgaa9ccd6"><a href="https://github.com/alphapapa/ts.el/releases.atom">ts.el</a></h4>
<div class="outline-text-4" id="text-orgaa9ccd6">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package ts
  <span style="font-weight: bold;">:straight</span> t)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb0ee3cf" class="outline-4">
<h4 id="orgb0ee3cf"><a href="https://github.com/SebastienWae/app-launcher/releases.atom">app-launcher</a></h4>
<div class="outline-text-4" id="text-orgb0ee3cf">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package app-launcher
  <span style="font-weight: bold;">:straight</span> '(app-launcher
              <span style="font-weight: bold;">:host</span> github
              <span style="font-weight: bold;">:repo</span> <span style="font-style: italic;">"SebastienWae/app-launcher"</span>))
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-org5ee43a8" class="outline-2">
<h2 id="org5ee43a8">further customization</h2>
<div class="outline-text-2" id="text-org5ee43a8">
</div>
<div id="outline-container-org41ede1b" class="outline-3">
<h3 id="org41ede1b">handy functionalities</h3>
<div class="outline-text-3" id="text-org41ede1b">
</div>

<div id="outline-container-orgd2f1892" class="outline-4">
<h4 id="orgd2f1892">power management</h4>
<div class="outline-text-4" id="text-orgd2f1892">
<p>
Shut down emacs automatically when remaining power of laptop PC lower than <a href="battery-load-low">battery-load-low</a>
to avoid accidental data loss.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">battery</span>)

(run-with-timer 60 60 #'kill-emacs-auto)

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">kill-emacs-auto</span> ()
  <span style="font-style: italic;">"Kill Emacs if remaining machine power lower than `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">battery-load-low</span><span style="font-style: italic;">'."</span>
  (<span style="font-weight: bold;">let*</span> ((data (<span style="font-weight: bold;">and</span> battery-status-function (funcall battery-status-function)))
         (percentage (car (read-from-string (cdr (assq ?p data)))))
         (power (cdr (assq ?L data))))
    (<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">and</span> (&lt; percentage battery-load-low)
               (string= power <span style="font-style: italic;">"BAT"</span>))
      (save-buffers-kill-emacs t))))
</pre>
</div>
</div>
</div>

<div id="outline-container-org33e55db" class="outline-4">
<h4 id="org33e55db">cursor movement</h4>
<div class="outline-text-4" id="text-org33e55db">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> sentence-end-double-space nil)

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/forward-paragraph</span> ()
  (<span style="font-weight: bold;">interactive</span>)
  (forward-paragraph 2)
  (backward-paragraph 1)
  (forward-line 1)
  (recenter-top-bottom 0))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/backward-paragraph</span> ()
  (<span style="font-weight: bold;">interactive</span>)
  (backward-paragraph 2)
  (forward-paragraph 1)
  (backward-paragraph 1)
  (forward-line 1)
  (recenter-top-bottom 0))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/drag-line-backward</span> ()
  <span style="font-style: italic;">"Drag up current line for one."</span>
  (<span style="font-weight: bold;">interactive</span>)
  (transpose-lines 1)
  (previous-line 2))

(global-set-key (kbd <span style="font-style: italic;">"M-S-&lt;up&gt;"</span>) 'my/drag-line-backward)

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/drag-line-forward</span> ()
  <span style="font-style: italic;">"Drag down current line for one."</span>
  (<span style="font-weight: bold;">interactive</span>)
  (next-line 1)
  (transpose-lines 1)
  (previous-line 1))

(global-set-key (kbd <span style="font-style: italic;">"M-S-&lt;down&gt;"</span>) 'my/drag-line-forward)
</pre>
</div>
</div>
</div>

<div id="outline-container-org5a24df7" class="outline-4">
<h4 id="org5a24df7">lookup functions</h4>
<div class="outline-text-4" id="text-org5a24df7">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defmacro</span> <span style="font-weight: bold;">define-lookup-function</span> (fun search-prefix)
  <span style="font-style: italic;">"Create lookup function named FUN using SEARCH-PREFIX for querying.</span>

<span style="font-style: italic;">if WORD-FIXED is given, use it as a search word."</span>
  (<span style="font-weight: bold;">declare</span> (indent 1))
  `(<span style="font-weight: bold;">defun</span> ,fun (word <span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> arg)
     <span style="font-style: italic;">"Issue search query with WORD.</span>

<span style="font-style: italic;">Use a string in region for WORD if region is active.</span>
<span style="font-style: italic;">If called with prefix argument, prompt the user to input WORD regardless region is active or not."</span>
     (<span style="font-weight: bold;">interactive</span> (<span style="font-weight: bold;">let</span> ((region-str (<span style="font-weight: bold;">when</span> (use-region-p)
                                      (buffer-substring (region-beginning) (region-end)))))
                    (list (<span style="font-weight: bold;">cond</span>
                           ((<span style="font-weight: bold;">and</span> (stringp region-str)
                                 (equal current-prefix-arg nil))
                            region-str)
                           (t
                            (read-string <span style="font-style: italic;">"Enter URL or keywords: "</span> region-str))))))
     (<span style="font-weight: bold;">let</span> ((eww-search-prefix ,search-prefix))
       (eww word 4))))

(define-lookup-function lookup-google <span style="font-style: italic;">"https://www.google.com/search?q="</span>)
(define-lookup-function lookup-wikipedia-en <span style="font-style: italic;">"https://en.wikipedia.org/wiki/"</span>)
(define-lookup-function lookup-wikipedia-ja <span style="font-style: italic;">"https://ja.wikipedia.org/wiki/"</span>)
(define-lookup-function lookup-amazon <span style="font-style: italic;">"https://www.amazon.co.jp/gp/search/?field-keywords="</span>)
(define-lookup-function lookup-melpa <span style="font-style: italic;">"https://melpa.org/#/?q="</span>)
(define-lookup-function lookup-duckduckgo <span style="font-style: italic;">"https://duckduckgo.com/html/?kl=jp-jp&amp;k1=-1&amp;kc=1&amp;kf=-1&amp;q="</span>)
(define-lookup-function lookup-eijiro <span style="font-style: italic;">"https://eow.alc.co.jp/search?q="</span>)
(define-lookup-function lookup-weblio <span style="font-style: italic;">"https://www.weblio.jp/content/"</span>)
(define-lookup-function lookup-youtube <span style="font-style: italic;">"https://www.youtube.com/results?search_query="</span>)

(<span style="font-weight: bold;">with-eval-after-load</span> 'hydra
  (defhydra hydra-lookup (global-map <span style="font-style: italic;">"C-c l"</span>
                                     <span style="font-weight: bold;">:color</span> blue)
    <span style="font-style: italic;">"Lookup"</span>
    (<span style="font-style: italic;">"g"</span> lookup-google)
    (<span style="font-style: italic;">"w"</span> lookup-wikipedia-ja)
    (<span style="font-style: italic;">"W"</span> lookup-wikipedia-en)
    (<span style="font-style: italic;">"a"</span> lookup-amazon <span style="font-style: italic;">"amazon.co.jp"</span>)
    (<span style="font-style: italic;">"m"</span> lookup-melpa <span style="font-style: italic;">"melpa"</span>)
    (<span style="font-style: italic;">"d"</span> lookup-duckduckgo <span style="font-style: italic;">"duckduckgo"</span>)
    (<span style="font-style: italic;">"l"</span> lookup-weblio <span style="font-style: italic;">"weblio"</span>)
    (<span style="font-style: italic;">"y"</span> lookup-youtube <span style="font-style: italic;">"youtube"</span>)
    (<span style="font-style: italic;">"e"</span> my/define-word)
    (<span style="font-style: italic;">"j"</span> (<span style="font-weight: bold;">lambda</span> ()
           (<span style="font-weight: bold;">interactive</span>)
           (<span style="font-weight: bold;">let</span> ((define-word-default-service 'weblio))
             (my/define-word)))
     <span style="font-style: italic;">"japanese translation"</span>)
    (<span style="font-style: italic;">"J"</span> lookup-eijiro)
    (<span style="font-style: italic;">"s"</span> synosaurus-lookup <span style="font-style: italic;">"synosaurus-lookup"</span>)
    (<span style="font-style: italic;">"S"</span> synosaurus-choose-and-replace <span style="font-style: italic;">"synosaurus-replace"</span>)
    (<span style="font-style: italic;">"o"</span> my/lookup-org-archive)
    (<span style="font-style: italic;">"'"</span> utl-say)
    (<span style="font-style: italic;">"q"</span> nil <span style="font-style: italic;">"quit"</span>)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org1d049d9" class="outline-4">
<h4 id="org1d049d9">perspective control</h4>
<div class="outline-text-4" id="text-org1d049d9">
<p>
This hydra definition enalbes the user to focus on changing font size, moving window to display.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">with-eval-after-load</span> 'hydra
  (defhydra hydra-perspective
    (global-map <span style="font-style: italic;">"C-&amp;"</span>
                <span style="font-weight: bold;">:foreign-keys</span> warn
                <span style="font-weight: bold;">:pre</span> (set-face-attribute 'fringe nil <span style="font-weight: bold;">:background</span> <span style="font-style: italic;">"LightSeaGreen"</span>)
                <span style="font-weight: bold;">:post</span> (set-face-attribute 'fringe nil <span style="font-weight: bold;">:background</span> nil))
    <span style="font-style: italic;">"Hydra perspective"</span>
    (<span style="font-style: italic;">"f"</span> scroll-up-line)
    (<span style="font-style: italic;">"e"</span> scroll-down-line)
    (<span style="font-style: italic;">"&gt;"</span> (scroll-left 1))
    (<span style="font-style: italic;">"&lt;"</span> (scroll-right 1))
    (<span style="font-style: italic;">"t"</span> visual-line-mode)
    (<span style="font-style: italic;">"+"</span> text-scale-adjust)
    (<span style="font-style: italic;">"="</span> text-scale-adjust)
    (<span style="font-style: italic;">"-"</span> text-scale-adjust)
    (<span style="font-style: italic;">"0"</span> text-scale-adjust)
    (<span style="font-style: italic;">"C-f"</span> forward-char)
    (<span style="font-style: italic;">"M-f"</span> forward-word)
    (<span style="font-style: italic;">"C-b"</span> backward-char)
    (<span style="font-style: italic;">"M-b"</span> backward-word)
    (<span style="font-style: italic;">"C-n"</span> next-line)
    (<span style="font-style: italic;">"C-p"</span> previous-line)
    (<span style="font-style: italic;">"C-v"</span> scroll-up-command)
    (<span style="font-style: italic;">"M-v"</span> scroll-down-command)
    (<span style="font-style: italic;">"C-a"</span> move-beginning-of-line)
    (<span style="font-style: italic;">"C-e"</span> move-end-of-line)
    (<span style="font-style: italic;">"C-g"</span> keyboard-quit <span style="font-weight: bold;">:exit</span> t)
    (<span style="font-style: italic;">"q"</span> nil <span style="font-weight: bold;">:exit</span> t)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfa76407" class="outline-4">
<h4 id="orgfa76407">tldr</h4>
<div class="outline-text-4" id="text-orgfa76407">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/tldr</span> (command)
  <span style="font-style: italic;">"Show the output of tldr for COMMAND in a dedicated buffer."</span>
  (<span style="font-weight: bold;">interactive</span> (list (read-string <span style="font-style: italic;">"Coomand: "</span>)))
  (<span style="font-weight: bold;">let*</span> ((buf-name <span style="font-style: italic;">"*TL;DR*"</span>)
         (buffer (get-buffer-create buf-name)))
    (<span style="font-weight: bold;">with-current-buffer</span> buffer
      (read-only-mode -1)
      (erase-buffer)
      (insert (shell-command-to-string (format <span style="font-style: italic;">"tldr %s"</span>
                                               (shell-quote-argument command))))
      (ansi-color-apply-on-region (point-min) (point-max))
      (goto-char (point-min))
      (read-only-mode 1))
    (display-buffer buffer '((display-buffer-pop-up-window)
                             . ((window-height . 8))))
    (switch-to-buffer-other-window buffer)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org524e3d5" class="outline-4">
<h4 id="org524e3d5">sending email</h4>
<div class="outline-text-4" id="text-org524e3d5">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">mail-simple-send</span> (mailto subject body)
  <span style="font-style: italic;">"Default function to send a mail with SUBJECT and BODY to myself."</span>
  (<span style="font-weight: bold;">save-excursion</span>
    (<span style="font-weight: bold;">let</span> ((message-kill-buffer-on-exit t))
      (message-mail mailto subject)
      (message-goto-body)
      (insert body)
      (message-send-and-exit))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">mail-buffer</span> (mailto)
  <span style="font-style: italic;">"Send the current buffer contents as a email.</span>

<span style="font-style: italic;">If region is active, send the string in the region instead."</span>
  (<span style="font-weight: bold;">let</span> ((mail-subj (buffer-name))
        (mail-body (<span style="font-weight: bold;">if</span> (use-region-p)
                       (buffer-substring (region-beginning) (region-end))
                     (buffer-string))))
    (mail-simple-send mailto mail-subj mail-body)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org6458ff0" class="outline-4">
<h4 id="org6458ff0">open url or something</h4>
<div class="outline-text-4" id="text-org6458ff0">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">thingatpt</span>)

(global-set-key (kbd <span style="font-style: italic;">"C-c C-o"</span>) 'my/enter-thing-at-point)

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/enter-thing-at-point</span> ()
  <span style="font-style: italic;">"Enter thing in appropriate manner."</span>
  (<span style="font-weight: bold;">interactive</span>)
  (<span style="font-weight: bold;">let*</span> ((thing nil)
         (region-thing (<span style="font-weight: bold;">when</span> (use-region-p)
                         (buffer-substring (region-beginning) (region-end)))))
    (<span style="font-weight: bold;">cond</span>
     ((<span style="font-weight: bold;">setq</span> thing
            (<span style="font-weight: bold;">if</span> region-thing
                (<span style="font-weight: bold;">when</span> (string-match thing-at-point-email-regexp
                                    region-thing)
                  (match-string 0 region-thing))
              (thing-at-point 'email t)))
      (mu4e~compose-mail thing)
      t)
     ((<span style="font-weight: bold;">setq</span> thing (car (eww-links-at-point)))
      (<span style="font-weight: bold;">cl-case</span> (prefix-numeric-value current-prefix-arg)
        (16 (browse-url-default-browser thing))
        (4 (eww-browse-url thing))
        (t (open-url thing)))
      t)
     ((<span style="font-weight: bold;">setq</span> thing
            (<span style="font-weight: bold;">if</span> region-thing
                (<span style="font-weight: bold;">when</span> (string-match browse-url-button-regexp
                                    region-thing)
                  (match-string 0 region-thing))
              (thing-at-point 'url t)))
      (<span style="font-weight: bold;">let</span> ((url-pos (split-location-uri thing)))
        (<span style="font-weight: bold;">cl-case</span> (prefix-numeric-value current-prefix-arg)
          (16 (browse-url-default-browser (car url-pos)))
          (4 (eww-browse-url (car url-pos)))
          (t (open-url (car url-pos) (cadr url-pos))))
        t))
     ((<span style="font-weight: bold;">and</span> (<span style="font-weight: bold;">setq</span> thing
                 (<span style="font-weight: bold;">if</span> region-thing
                     (<span style="font-weight: bold;">when</span> (string-match (format <span style="font-style: italic;">"[%s].+"</span> thing-at-point-file-name-chars)
                                         region-thing)
                       (match-string 0 region-thing))
                   (thing-at-point 'filename t)))
           (file-exists-p thing))
      (<span style="font-weight: bold;">let</span> ((url-pos (split-location-uri thing))
            (prefix-arg current-prefix-arg))
        (<span style="font-weight: bold;">if</span> (equal prefix-arg '(4))
            (find-file (car url-pos))
          (my/view-file (car url-pos) prefix-arg)
          (<span style="font-weight: bold;">unless</span> prefix-arg
            (goto-pos (cadr url-pos))))
        t))
     <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">this clause must be last in cond</span>
     ((<span style="font-weight: bold;">setq</span> thing (button-at (point)))
      (push-button)
      t))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">split-location-uri</span> (location-uri)
  <span style="font-style: italic;">"Split LOCATION-URI into normal uri and location specifier.</span>

<span style="font-style: italic;">Location specifier is either line number or string.</span>
<span style="font-style: italic;">If splitting is successful, this function returns a list containing uri and location specifier."</span>
  (<span style="font-weight: bold;">cond</span>
   ((string-match <span style="font-style: italic;">"</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">(</span><span style="font-style: italic;">.+</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">)</span><span style="font-style: italic;">::</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">(</span><span style="font-style: italic;">[[:digit:]]+</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">)</span><span style="font-style: italic;">$"</span> location-uri)
    (list (match-string 1 location-uri) (string-to-number (match-string 2 location-uri))))
   ((string-match <span style="font-style: italic;">"</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">(</span><span style="font-style: italic;">.+</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">)</span><span style="font-style: italic;">::</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">(</span><span style="font-style: italic;">[[:graph:][:blank:]]+</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">)</span><span style="font-style: italic;">$"</span> location-uri)
    (list (match-string 1 location-uri) (match-string 2 location-uri)))
   (t (list location-uri))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">goto-pos</span> (pos)
  <span style="font-style: italic;">"Move the cursor to the location where `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">POS</span><span style="font-style: italic;">' is pointing.</span>

<span style="font-style: italic;">if `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">POS</span><span style="font-style: italic;">' is a number assumed to be a line number.</span>
<span style="font-style: italic;">If `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">POS</span><span style="font-style: italic;">' is a string assumed to be a searching word."</span>
  (<span style="font-weight: bold;">interactive</span>)
  (<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">cond</span>
         ((numberp pos)
          (forward-line (- pos (line-number-at-pos)))
          t)
         ((stringp pos)
          (<span style="font-weight: bold;">let</span> ((pos-num (string-to-number pos)))
            (<span style="font-weight: bold;">cl-case</span> pos-num
              (0 (goto-char
                  (re-search-forward
                   (string-join (split-string pos <span style="font-style: italic;">""</span> t <span style="font-style: italic;">"[ \t\r\n]*"</span>) <span style="font-style: italic;">"[ \t\r\n]*"</span>) nil nil)))
              (t (forward-line (- pos-num (line-number-at-pos))))))
          t))
    (beginning-of-line)
    (recenter-top-bottom 0)))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">open-url</span> (url <span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> pos)
  <span style="font-style: italic;">"Open URL in an appropriate manner and jump to POS.</span>

<span style="font-style: italic;">If URL points to a multimedia contents such as youtube video and mp3 audio file,</span>
<span style="font-style: italic;">play it in media player."</span>
  (<span style="font-weight: bold;">cond</span>
   ((<span style="font-weight: bold;">or</span> (string-match <span style="font-style: italic;">"</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">(</span><span style="font-style: italic;">[</span><span style="font-style: italic;">^</span><span style="font-style: italic;">/]+\\.pdf</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">)</span><span style="font-style: italic;">"</span> url)
        (string-match <span style="font-style: italic;">"</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">(</span><span style="font-style: italic;">[</span><span style="font-style: italic;">^</span><span style="font-style: italic;">/]+\\.epub</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">)</span><span style="font-style: italic;">"</span> url))
    (<span style="font-weight: bold;">let</span> ((dl-file (expand-file-name (match-string 0 url)
                                     temporary-file-directory)))
      (call-process-shell-command (format <span style="font-style: italic;">"curl %s -s -o %s"</span> url dl-file))
      (my/view-file dl-file)
      (<span style="font-weight: bold;">when</span> pos (goto-pos pos))))
   ((string-match-p <span style="font-style: italic;">"^https?://www.youtube.com.*"</span> url)
    <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">convert greedily watch url to playlist url if possible</span>
    (<span style="font-weight: bold;">let</span> ((url (<span style="font-weight: bold;">if</span> (string-match <span style="font-style: italic;">"&amp;list=</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">(</span><span style="font-style: italic;">[[:graph:]]+</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">)</span><span style="font-style: italic;">"</span> url)
                   (format <span style="font-style: italic;">"https://www.youtube.com/playlist?list=%s"</span> (match-string 1 url))
                 url))
          (ytdl-opts
           (remove nil
                   (list (<span style="font-weight: bold;">when</span> (numberp pos)
                           (format <span style="font-style: italic;">"--ytdl-raw-options=playlist-start=%d"</span> pos))
                         (format <span style="font-style: italic;">"--ytdl-format=%s"</span> (shell-quote-argument (youtube-dl-format)))))))
      (start-process-shell-command <span style="font-style: italic;">"mpv"</span> nil (format <span style="font-style: italic;">"nohup mpv --force-window %s \"%s\" &gt;/dev/null 2&gt;&amp;1"</span> (mapconcat 'identity ytdl-opts <span style="font-style: italic;">" "</span>) url))))
   ((seq-some (<span style="font-weight: bold;">lambda</span> (suffix)
                (string-suffix-p suffix url))
              '(<span style="font-style: italic;">".mp3"</span> <span style="font-style: italic;">".m4a"</span> <span style="font-style: italic;">".mp4"</span> <span style="font-style: italic;">".mkv"</span> <span style="font-style: italic;">".web"</span> <span style="font-style: italic;">".|m3"</span> <span style="font-style: italic;">".|jp"</span> <span style="font-style: italic;">".|jp"</span> <span style="font-style: italic;">".png"</span>))
    (start-process-shell-command <span style="font-style: italic;">"mpv"</span> nil (format <span style="font-style: italic;">"nohup mpv --force-window \"%s\" &gt;/dev/null 2&gt;&amp;1"</span> url)))
   (t (browse-web url)
      (<span style="font-weight: bold;">setq</span> lexical-binding t)
      (<span style="font-weight: bold;">setq</span> position pos)
      (add-hook 'eww-after-render-hook
                (<span style="font-weight: bold;">lambda</span> ()
                  (<span style="font-weight: bold;">when</span> position (goto-pos position))
                  (<span style="font-weight: bold;">setq-local</span> eww-after-render-hook nil))
                0 t))))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgaf5f381" class="outline-4">
<h4 id="orgaf5f381">media file handling</h4>
<div class="outline-text-4" id="text-orgaf5f381">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">my/download-video-dir</span> <span style="font-style: italic;">"~/Videos"</span> <span style="font-style: italic;">"Directory where downloaded video locate."</span>)

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/download-video</span> (url <span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> filename playlistp)
  <span style="font-style: italic;">"Download video from `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">URL</span><span style="font-style: italic;">'.</span>

<span style="font-style: italic;">If optional argument `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">FILENAME</span><span style="font-style: italic;">' is passed, try to use this as filename.</span>
<span style="font-style: italic;">If optional argument `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">PLAYLISTP</span><span style="font-style: italic;">' is passed, try to download all videos in playlist</span>
<span style="font-style: italic;">instead of single video."</span>
  (<span style="font-weight: bold;">interactive</span> (list (read-string <span style="font-style: italic;">"URL: "</span>)))
  (<span style="font-weight: bold;">when</span> (string-match <span style="font-style: italic;">"https?://www.youtube.com.+"</span> url)
    (<span style="font-weight: bold;">let*</span> ((url-orig (match-string 0 url))
           (urlobj-orig (url-generic-parse-url url-orig))
           (pq-orig (url-path-and-query urlobj-orig))
           (yt-url
            (<span style="font-weight: bold;">if</span> (<span style="font-weight: bold;">and</span> (not playlistp)
                     (string= (car pq-orig) <span style="font-style: italic;">"/watch"</span>)
                     (assoc-string <span style="font-style: italic;">"list"</span> (url-parse-query-string (cdr pq-orig))))
                (url-recreate-url
                 (url-parse-make-urlobj (url-type urlobj-orig)
                                        (url-user urlobj-orig)
                                        (url-password urlobj-orig)
                                        (url-host urlobj-orig)
                                        (url-portspec urlobj-orig)
                                        (concat (car pq-orig) <span style="font-style: italic;">"?"</span>
                                                (url-build-query-string
                                                 (list (assoc <span style="font-style: italic;">"v"</span> (url-parse-query-string (cdr pq-orig))))))
                                        (url-target urlobj-orig)
                                        (url-attributes urlobj-orig)
                                        (url-fullness urlobj-orig)))
              url)))
      (<span style="font-weight: bold;">setq</span> lexical-binding t)
      (<span style="font-weight: bold;">setq</span> url-lex url)
      (<span style="font-weight: bold;">setq</span> filename-lex (<span style="font-weight: bold;">if</span> filename
                             (replace-regexp-in-string
                              <span style="font-style: italic;">"[\\?\"/:|&#8217;]"</span> <span style="font-style: italic;">""</span> filename)
                           nil))
      (princ (format <span style="font-style: italic;">"Downloading: %s"</span> (<span style="font-weight: bold;">or</span> filename-lex url)))
      (set-process-sentinel
       (start-process-shell-command
        <span style="font-style: italic;">"download video"</span> nil
        (format <span style="font-style: italic;">"cd \"%1$s\" &amp;&amp; youtube-dl %2$s \"%3$s\""</span>
                (expand-file-name my/download-video-dir)
                (mapconcat #'identity
                           (list (format <span style="font-style: italic;">"--format \"%s\""</span> (youtube-dl-format))
                                 (<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">and</span> filename-lex
                                            (not playlistp)
                                            (not (string= (car pq-orig) <span style="font-style: italic;">"/playlist"</span>)))
                                   (format <span style="font-style: italic;">"--output %s"</span> (shell-quote-argument filename-lex)))
                                 (<span style="font-weight: bold;">when</span> playlistp <span style="font-style: italic;">"--yes-playlist --ignore-errors --download-archive downloaded.txt"</span>))
                           <span style="font-style: italic;">" "</span>)
                yt-url))
       (<span style="font-weight: bold;">lambda</span> (process desc)
         (<span style="font-weight: bold;">when</span> (eq (process-status process) 'exit)
           (<span style="font-weight: bold;">let</span> ((exit-status (process-exit-status process)))
             (<span style="font-weight: bold;">if</span> (= exit-status 0)
                 (alert (format <span style="font-style: italic;">"Downloaded: %s"</span> (<span style="font-weight: bold;">or</span> filename-lex url-lex)) <span style="font-weight: bold;">:severity</span> 'normal <span style="font-weight: bold;">:style</span> 'fringe)
               (alert (format <span style="font-style: italic;">"Failed(%d): %s"</span> exit-status (<span style="font-weight: bold;">or</span> filename-lex url-lex)) <span style="font-weight: bold;">:severity</span> 'urgent <span style="font-weight: bold;">:style</span> 'fringe)))))))))

(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">my/download-audio-dir</span> <span style="font-style: italic;">"~/Audio"</span> <span style="font-style: italic;">"Directory where downloaded audio locate."</span>)

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/download-audio</span> (url <span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> filename)
  <span style="font-style: italic;">"Download audio from `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">URL</span><span style="font-style: italic;">'.</span>

<span style="font-style: italic;">If optional argument `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">FILENAME</span><span style="font-style: italic;">' is given use this as a filename."</span>
  (<span style="font-weight: bold;">interactive</span> (list (read-string <span style="font-style: italic;">"URL: "</span>)))
  (<span style="font-weight: bold;">let*</span> ((temp-fname (make-temp-name (<span style="font-weight: bold;">if</span> (directory-name-p my/download-audio-dir)
                                         my/download-audio-dir
                                       (concat my/download-audio-dir <span style="font-style: italic;">"/"</span>)))))
    (<span style="font-weight: bold;">setq</span> lexical-binding t)
    (<span style="font-weight: bold;">setq</span> url-lex url)
    (<span style="font-weight: bold;">setq</span> filename-lex (<span style="font-weight: bold;">if</span> filename
                           (replace-regexp-in-string
                            <span style="font-style: italic;">"[\\?\"/:|&#8217;]"</span> <span style="font-style: italic;">""</span> filename)
                         nil))
    (princ (format <span style="font-style: italic;">"Downloading: %s"</span> (<span style="font-weight: bold;">or</span> filename-lex url)))
    (set-process-sentinel
     (start-process-shell-command
      <span style="font-style: italic;">"download audio"</span> nil
      (format <span style="font-style: italic;">"%s; %s; %s"</span>
              (<span style="font-weight: bold;">if</span> (string-match <span style="font-style: italic;">"https?://www.youtube.com.+"</span> url)
                  (format <span style="font-style: italic;">"youtube-dl --extract-audio --audio-format mp3 \"%1$s\" -o %2$s.mp3; mv -f %2$s.mp3 %2$s"</span> (match-string 0 url) temp-fname)
                (format <span style="font-style: italic;">"curl -LJs \"%s\" -o %s"</span> url temp-fname))
              (format <span style="font-style: italic;">"cd \"%s\" &amp;&amp; ffmpeg -n %s %s.mp3"</span>
                      (expand-file-name my/download-audio-dir)
                      (mapconcat #'identity
                                 (list (format <span style="font-style: italic;">"-i %s"</span> temp-fname)
                                       (<span style="font-weight: bold;">if</span> (equal '(undecided) (find-coding-systems-string (<span style="font-weight: bold;">or</span> filename-lex url)))
                                           <span style="font-style: italic;">"-filter:a \"atempo=1.1\""</span>
                                         <span style="font-style: italic;">"-filter:a \"atempo=1.7\""</span>)
                                       <span style="font-style: italic;">"-vn"</span>)
                                 <span style="font-style: italic;">" "</span>)
                      (<span style="font-weight: bold;">if</span> filename-lex
                          (shell-quote-argument filename-lex)
                        (file-name-base temp-fname)))
              (format <span style="font-style: italic;">"rm -f %s"</span> temp-fname)))
     (<span style="font-weight: bold;">lambda</span> (process desc)
       (<span style="font-weight: bold;">when</span> (eq (process-status process) 'exit)
         (<span style="font-weight: bold;">let</span> ((exit-status (process-exit-status process)))
           (<span style="font-weight: bold;">if</span> (= exit-status 0)
               (alert (format <span style="font-style: italic;">"Downloaded: %s"</span> (<span style="font-weight: bold;">or</span> filename-lex url-lex)) <span style="font-weight: bold;">:severity</span> 'normal <span style="font-weight: bold;">:style</span> 'fringe)
             (alert (format <span style="font-style: italic;">"Failed(%d): %s"</span> exit-status (<span style="font-weight: bold;">or</span> filename-lex url-lex)) <span style="font-weight: bold;">:severity</span> 'urgent <span style="font-weight: bold;">:style</span> 'fringe))))))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">show-media-duration</span> (url)
  <span style="font-style: italic;">"Return a duration value for media located at URL."</span>
  (when-let ((duration (<span style="font-weight: bold;">cond</span>
                        ((string-match <span style="font-style: italic;">"https?://www.youtube.com.+"</span> url)
                         (car (split-string (shell-command-to-string
                                             (format <span style="font-style: italic;">"youtube-dl --get-duration %s"</span> url)))))
                        ((string-match <span style="font-style: italic;">"https?://.+"</span> url)
                         (car (split-string (shell-command-to-string
                                             (format <span style="font-style: italic;">"ffmpeg -i \"%s\" 2&gt;&amp;1 | grep Duration | awk -F '[ ]+' '{print substr($3, 0, length($3)-1)}'"</span> url))))))))
    (message <span style="font-style: italic;">"Duration: %s"</span> (<span style="font-weight: bold;">if</span> (stringp duration)
                                duration <span style="font-style: italic;">"N/A"</span>))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/download-video-at-point</span> ()
  <span style="font-style: italic;">"Download video file from url currently pointed."</span>
  (<span style="font-weight: bold;">interactive</span>)
  (when-let ((url (thing-at-point-url-at-point)))
    (my/download-video url)))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/download-audio-at-point</span> ()
  <span style="font-style: italic;">"Download audio file from url currently pointed."</span>
  (<span style="font-weight: bold;">interactive</span>)
  (<span style="font-weight: bold;">let</span> ((url (thing-at-point-url-at-point)))
    (<span style="font-weight: bold;">when</span> url
      (my/download-audio url))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/show-media-duration-at-point</span> ()
  <span style="font-style: italic;">"Show duration of media file which cursor currently pointed."</span>
  (<span style="font-weight: bold;">interactive</span>)
  (if-let* ((url (thing-at-point-url-at-point)))
      (show-media-duration url)))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">youtube-dl-format</span> ()
  <span style="font-style: italic;">"Return appropriate format option value for youtube-dl command."</span>
  (<span style="font-weight: bold;">let*</span> ((ipv4-addr (shell-command-to-string <span style="font-style: italic;">"hostname -I | cut -f1 -d' ' | tr -d '\n'"</span>))
         (wifi-ssid (shell-command-to-string <span style="font-style: italic;">"iwgetid -r | tr -d '\n'"</span>))
         (fmt-quality (<span style="font-weight: bold;">cond</span>
                       <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">using mobile Wi-Fi</span>
                       ((string-prefix-p <span style="font-style: italic;">"192.168.179."</span> ipv4-addr)
                        <span style="font-style: italic;">"bestvideo[height&lt;=?240]+worstaudio/best"</span>)
                       <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">using wired network or broad wifi</span>
                       ((<span style="font-weight: bold;">or</span> (string= ipv4-addr <span style="font-style: italic;">"192.168.100.126"</span>)
                            (member wifi-ssid '(<span style="font-style: italic;">"saint_laurent_ap"</span>)))
                        <span style="font-style: italic;">"bestvideo[height&lt;=?720]+bestaudio/best"</span>)
                       <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">usin unknown network</span>
                       (t
                        <span style="font-style: italic;">"worstvideo+worstaudio"</span>))))
    (format <span style="font-style: italic;">"%s mp4"</span> fmt-quality)))

(global-set-key (kbd <span style="font-style: italic;">"C-c D v"</span>) 'my/download-video-at-point)
(global-set-key (kbd <span style="font-style: italic;">"C-c D a"</span>) 'my/download-audio-at-point)
(global-set-key (kbd <span style="font-style: italic;">"C-c D ="</span>) 'my/show-media-duration-at-point)
</pre>
</div>
</div>

<ul class="org-ul">
<li><a id="org94e5332"></a>confidential settings&#xa0;&#xa0;&#xa0;<span class="tag"><span class="crypt">crypt</span></span><br />
<div class="outline-text-5" id="text-org94e5332">
<p>
&#x2013;&#x2014;BEGIN PGP MESSAGE&#x2013;&#x2014;
</p>

<p>
hQEMA9uWvE5LJ2ejAQf+LnxAHJ0vJk6rHxHtu2cnBeIqc/IIlp4Q5D4TgX2p91/P
5drEy/FHViLkJRvmZ+UoNlv4+yQTEXpxqeW+oSPrQ5q1SVYYpDRMx9kip/0nWnHX
hvbScPYZom5QRK7SOWXzFhMzeZe3Fc/LFpqGRpn+/XStHVMn3XTgkIVeGD3tiqNS
5Epsdgm+fQrMTJkanGwTaaCJYcvDIcuV+wWDA/t5gOM5lOwmr1wOyLNyuKV6DHqe
x83vIeUs/WDTHKv/slQupTUMuUxBSMO8n7sOr5VfsALH3qMIq6WYfS5He6+neB6B
vmsEtiO59lILcKSx7e3B1XbXAEIOhlLvIk0YCH1G+NLBIQGnX8Zz+ehBr5UPfCCU
BLxFGcdqqRvQzaOvEYNCSXdJsCtusfBkWvPE7gRkk8cCBJivsp4looHNI1YwfpZo
QiGzqXAWIf0bWrD1uCZJZ9sKV8TqJeSUv//R07DQ1FWP8KXdz0jx+T0ODUn+qAEc
VlwjhKb7HRXwzPvBpX9Gt6QxR/B0iZ6k1uhU5DKoKLK/hmFST9hXEin2retjb7yE
Sgv7CjQkpaSJv8MTfFc+XC/WtnZV3qu0btSblvgfVEKYr6qDo7+rHe71SOHx3cxr
TBcLEzH9KaJgVq+MrjLc2BWddh/aeMFLiWEyq0ENY2WgHkxFQ1gQ8THQ2hIQ3Oik
sCTdB5LLPYg138Pi6zXqW+/joDYhvr9U9w60d730eRoYEes1qHBQe1389QTt9kqG
Qqwhsi5EbTNCInkgbQVJmTf0K/6iC65EUbxggcAi9NvpBA3hSYbI7/meYOhIImmz
e31Hsf6QIuZe8dXqsfQmmPP4lLC/469ojrbRH66O6zHpfzj7dZEB8dLuOjgUiq0a
uITNB/ymtjH0gRJp2FsS2n0CSXM9uuUQM3Lne3hD5JFbTTusifXRRUnyxb3jCdGu
MvHkcNaUqgU+pTSh/vqm38/pmqk1BE6mPp1dNMllXv1QUW4=
=ZjCr
&#x2013;&#x2014;END PGP MESSAGE&#x2013;&#x2014;
</p>
</div>
</li>
</ul>
</div>

<div id="outline-container-org47adfc7" class="outline-4">
<h4 id="org47adfc7">using speech synthesis</h4>
<div class="outline-text-4" id="text-org47adfc7">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">utl-say</span> ()
  <span style="font-style: italic;">"read out using open-jtalk"</span>
  (<span style="font-weight: bold;">interactive</span>)
  (<span style="font-weight: bold;">let*</span> ((read-text-raw (buffer-substring (region-beginning) (region-end)))
         (read-text (replace-regexp-in-string <span style="font-style: italic;">"[ \t\r\n\v\f]+"</span> <span style="font-style: italic;">""</span> read-text-raw))
         (say-cmd (<span style="font-weight: bold;">if</span> (string-match
                       (format <span style="font-style: italic;">"\\`[%s]+\\'"</span> <span style="font-style: italic;">"[:ascii:]&#8217;&#8220;&#8221;&#8211;"</span>)
                       read-text)
                      <span style="font-style: italic;">"esay"</span> <span style="font-style: italic;">"jsay"</span>)))
    (call-process-shell-command (format <span style="font-style: italic;">"echo %s | %s &amp;"</span> read-text say-cmd))))
</pre>
</div>
</div>

<ul class="org-ul">
<li><a id="org77a9760"></a>jsay<br />
<div class="outline-text-5" id="text-org77a9760">
<div class="org-src-container">
<pre class="src src-shell"><span style="font-weight: bold; font-style: italic;">#</span><span style="font-weight: bold; font-style: italic;">!/usr/bin/</span><span style="font-weight: bold;">env</span><span style="font-weight: bold; font-style: italic;"> bash</span>

<span style="font-weight: bold;">readonly</span> <span style="font-weight: bold; font-style: italic;">DIC</span>=<span style="font-style: italic;">"${HOME}/usr/share/hts/dic"</span>
<span style="font-weight: bold;">readonly</span> <span style="font-weight: bold; font-style: italic;">VOICE</span>=<span style="font-style: italic;">"${HOME}/usr/share/hts/voice/mei_normal.htsvoice"</span>
<span style="font-weight: bold;">readonly</span> <span style="font-weight: bold; font-style: italic;">AUDIO_FILE</span>=<span style="font-weight: bold;">`mktemp ${HOME}/var/tmp/jsay_XXXXXXXX.wav`</span>

open_jtalk -x ${<span style="font-weight: bold; font-style: italic;">DIC</span>} -m ${<span style="font-weight: bold; font-style: italic;">VOICE</span>} -ow ${<span style="font-weight: bold; font-style: italic;">AUDIO_FILE</span>}
aplay --quiet ${<span style="font-weight: bold; font-style: italic;">AUDIO_FILE</span>}
rm -f ${<span style="font-weight: bold; font-style: italic;">AUDIO_FILE</span>}

<span style="font-weight: bold;">exit</span> 0
</pre>
</div>
</div>
</li>

<li><a id="org09ecdf6"></a>esay<br />
<div class="outline-text-5" id="text-org09ecdf6">
<div class="org-src-container">
<pre class="src src-shell"><span style="font-weight: bold; font-style: italic;">#</span><span style="font-weight: bold; font-style: italic;">!/usr/bin/</span><span style="font-weight: bold;">env</span><span style="font-weight: bold; font-style: italic;"> bash</span>

<span style="font-weight: bold;">readonly</span> <span style="font-weight: bold; font-style: italic;">VOICE</span>=<span style="font-style: italic;">"${HOME}/usr/share/hts/voice/cmu_us_arctic_slt.htsvoice"</span>
<span style="font-weight: bold;">readonly</span> <span style="font-weight: bold; font-style: italic;">AUDIO_FILE</span>=<span style="font-weight: bold;">`mktemp ${HOME}/var/tmp/esay_XXXXXXXX.wav`</span>

flite_hts_engine -m ${<span style="font-weight: bold; font-style: italic;">VOICE</span>} -o ${<span style="font-weight: bold; font-style: italic;">AUDIO_FILE</span>}
aplay --quiet ${<span style="font-weight: bold; font-style: italic;">AUDIO_FILE</span>}
rm -f ${<span style="font-weight: bold; font-style: italic;">AUDIO_FILE</span>}

<span style="font-weight: bold;">exit</span> 0
</pre>
</div>
</div>
</li>
</ul>
</div>

<div id="outline-container-org9b23c39" class="outline-4">
<h4 id="org9b23c39">collective hydra definitions</h4>
<div class="outline-text-4" id="text-org9b23c39">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">with-eval-after-load</span> 'hydra
  (defhydra hydra-launcher (global-map <span style="font-style: italic;">"M-l"</span>
                                       <span style="font-weight: bold;">:color</span> blue)
    <span style="font-style: italic;">"Launch"</span>
    (<span style="font-style: italic;">"xe"</span> eshell)
    (<span style="font-style: italic;">"xg"</span> gdb)
    (<span style="font-style: italic;">"xi"</span> ielm)
    (<span style="font-style: italic;">"xs"</span> shell)
    (<span style="font-style: italic;">"xt"</span> term)
    (<span style="font-style: italic;">"xv"</span> vterm)
    (<span style="font-style: italic;">"D"</span> dired-jump)
    (<span style="font-style: italic;">"="</span> ediff)
    (<span style="font-style: italic;">"@"</span> twit)
    (<span style="font-style: italic;">"v"</span> magit-status)
    (<span style="font-style: italic;">"r"</span> re-builder)
    (<span style="font-style: italic;">"a"</span> app-launcher-run-app)
    (<span style="font-style: italic;">"w"</span> lookup-google)
    (<span style="font-style: italic;">"W"</span> eww-switch-to-buffer)
    (<span style="font-style: italic;">"m"</span> mu4e)
    (<span style="font-style: italic;">"M"</span> mu4e-alert-view-unread-mails)
    (<span style="font-style: italic;">"f"</span> elfeed)
    (<span style="font-style: italic;">"p"</span> proced)
    (<span style="font-style: italic;">"P"</span> list-processes)
    (<span style="font-style: italic;">"b"</span> battery)
    (<span style="font-style: italic;">"c"</span> calendar)
    (<span style="font-style: italic;">"?"</span> woman)
    (<span style="font-style: italic;">";"</span> my/tldr)
    (<span style="font-style: italic;">"q"</span> quickrun)
    (<span style="font-style: italic;">"C-g"</span> nil <span style="font-style: italic;">"cancel"</span>))
  (defhydra hydra-toggle
    (global-map <span style="font-style: italic;">"C-c t"</span>
                <span style="font-weight: bold;">:color</span> pink
                <span style="font-weight: bold;">:pre</span> (set-face-background 'mode-line <span style="font-style: italic;">"DarkOrange4"</span>)
                <span style="font-weight: bold;">:post</span> (set-face-background 'mode-line <span style="font-style: italic;">"gray10"</span>))
    <span style="font-style: italic;">"Toggle"</span>
    (<span style="font-style: italic;">"t"</span> visual-line-mode)
    (<span style="font-style: italic;">"T"</span> toggle-truncate-lines)
    (<span style="font-style: italic;">"i"</span> adaptive-wrap-prefix-mode)
    (<span style="font-style: italic;">"p"</span> variable-pitch-mode)
    (<span style="font-style: italic;">"w"</span> whitespace-mode)
    (<span style="font-style: italic;">"l"</span> display-line-numbers-mode)
    (<span style="font-style: italic;">"L"</span> line-number-mode)
    (<span style="font-style: italic;">"C"</span> column-number-mode)
    (<span style="font-style: italic;">"v"</span> view-mode)
    (<span style="font-style: italic;">"r"</span> rainbow-mode)
    (<span style="font-style: italic;">"\\"</span> toggle-input-method)
    (<span style="font-style: italic;">"F"</span> toggle-frame-fullscreen)
    (<span style="font-style: italic;">"SPC"</span> pangu-spacing-mode)
    (<span style="font-style: italic;">"q"</span> nil <span style="font-style: italic;">"quit"</span>)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org4f2f606" class="outline-4">
<h4 id="org4f2f606">show the day in calendar</h4>
<div class="outline-text-4" id="text-org4f2f606">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/calendar-show-items</span> ()
  <span style="font-style: italic;">"Show items on the day pointed in calendar view."</span>
  (<span style="font-weight: bold;">interactive</span>)
  (<span style="font-weight: bold;">let*</span> ((calendar-date-display-form calendar-iso-date-display-form)
         (date (calendar-date-string (calendar-cursor-to-date)))
         (d (parse-time-string date))
         (year (decoded-time-year d))
         (files (append `(,(my/org-archive-file year))
                        org-agenda-files))
         (buffer-name-prefix <span style="font-style: italic;">"=="</span>)
         (buffer-name (concat buffer-name-prefix date))
         (display-buffer-alist
          `((,buffer-name-prefix
             (display-buffer-reuse-mode-window
              display-buffer-pop-up-window)))))
    (org-ql-search files `(<span style="font-weight: bold;">and</span> (<span style="font-weight: bold;">or</span> (parent (heading ,date))
                                   (ts-a <span style="font-weight: bold;">:on</span> ,date))
                               (not (tags <span style="font-style: italic;">"web"</span> <span style="font-style: italic;">"drill"</span>)))
      <span style="font-weight: bold;">:buffer</span> buffer-name)
    (other-window 1)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org21be1af" class="outline-4">
<h4 id="org21be1af">utilities</h4>
<div class="outline-text-4" id="text-org21be1af">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/copy-line-number</span> ()
  <span style="font-style: italic;">"Copy the line number of current point into the kill ring."</span>
  (<span style="font-weight: bold;">interactive</span>)
  (<span style="font-weight: bold;">let</span> ((line-number (number-to-string (line-number-at-pos))))
    (message <span style="font-style: italic;">"Line number: %s"</span> line-number)
    (kill-new line-number)))

(global-set-key (kbd <span style="font-style: italic;">"C-M-S-w"</span>) 'my/copy-line-number)

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/insert-time-stamp</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> arg)
  <span style="font-style: italic;">"Insert date string with format derived in deterministic way with ARG."</span>
  (<span style="font-weight: bold;">interactive</span> <span style="font-style: italic;">"P"</span>)
  (<span style="font-weight: bold;">let*</span> ((simple-fmt <span style="font-style: italic;">"%Y%m%d"</span>)
         (concise-fmt <span style="font-style: italic;">"%Y-%m-%d"</span>)
         (verbose-fmt <span style="font-style: italic;">"%Y-%m-%d %H:%M:%S"</span>)
         (fmt-in-use (<span style="font-weight: bold;">cond</span>
                      ((equal arg '(16))
                       (read-string <span style="font-style: italic;">"time format: "</span>
                                    <span style="font-style: italic;">"%Y-%m-%d %H:%M:%S"</span>))
                      ((equal arg '(4))
                       verbose-fmt)
                      (t (<span style="font-weight: bold;">cond</span>
                          ((eq major-mode 'text-mode) concise-fmt)
                          ((eq major-mode 'dired-mode) simple-fmt)
                          (t simple-fmt))))))
    (insert (format-time-string fmt-in-use))))

(global-set-key (kbd <span style="font-style: italic;">"C-c ."</span>) 'my/insert-time-stamp)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org9b6fac2" class="outline-3">
<h3 id="org9b6fac2">original features</h3>
<div class="outline-text-3" id="text-org9b6fac2">
</div>
<div id="outline-container-orgddbb40c" class="outline-4">
<h4 id="orgddbb40c">org-english</h4>
<div class="outline-text-4" id="text-orgddbb40c">
<p>
Learning Workflow for English words:
</p>
<ol class="org-ol">
<li>Capture an word to study by invoking my/org-english-capture</li>
<li>Review words periodically with my/org-english-drill-test-display or its variants</li>
</ol>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/org-english-capture</span> (word)
  <span style="font-style: italic;">"Capture an english WORD as a org-mode entry suitable for org-drill.</span>

<span style="font-style: italic;">Capture URL or file currently visiting as well as a sentence at point."</span>
  (<span style="font-weight: bold;">interactive</span> (list (<span style="font-weight: bold;">if</span> (use-region-p)
                         (buffer-substring (region-beginning) (region-end))
                       (read-string <span style="font-style: italic;">"Phrase: "</span>))))
  (<span style="font-weight: bold;">let*</span> ((sentence-end-double-space nil)
         (org-english-word word)
         (match-entry (org-ql-select
                        (my/org-archive-files)
                        `(<span style="font-weight: bold;">and</span> (heading ,(format <span style="font-style: italic;">"%s"</span> word))
                              (tags <span style="font-style: italic;">"drill"</span>))
                        <span style="font-weight: bold;">:action</span> 'element-with-markers))
         (sentence
          (seq-reduce (<span style="font-weight: bold;">lambda</span> (s w)
                        (replace-regexp-in-string w (format <span style="font-style: italic;">"[%s||%c]"</span> w (string-to-char w))
                                                  s))
                      (split-string word <span style="font-style: italic;">" "</span>)
                      (sentence-at-point))))
    (kill-new (<span style="font-weight: bold;">if</span> (stringp sentence) sentence <span style="font-style: italic;">""</span>))
    (<span style="font-weight: bold;">cond</span>
     (match-entry (org-capture nil <span style="font-style: italic;">"!1"</span>))
     (t (org-capture nil <span style="font-style: italic;">"!0"</span>)))))

(<span style="font-weight: bold;">with-eval-after-load</span> 'org-ql-view
  (<span style="font-weight: bold;">push</span> '(<span style="font-style: italic;">"English phrase list"</span>
          <span style="font-weight: bold;">:buffers-files</span> my/org-archive-files
          <span style="font-weight: bold;">:query</span> (<span style="font-weight: bold;">and</span> (tags <span style="font-style: italic;">"drill"</span>)
                      (tags <span style="font-style: italic;">"fd_en"</span>)))
        org-ql-views))

(<span style="font-weight: bold;">with-eval-after-load</span> 'org-capture
  (add-to-list 'org-capture-templates
               '(<span style="font-style: italic;">"!0"</span> <span style="font-style: italic;">"drill entry for english word"</span>
                 entry (<span style="font-weight: bold;">function</span> org-goto-clocking-or-today)
                 <span style="font-style: italic;">"* %i :drill:fd_en:</span>
<span style="font-style: italic;">[%(my/org-english-insert-japanese-translation)]</span>
<span style="font-style: italic;">%(my/org-english-insert-english-translation)</span>
<span style="font-style: italic;">- %a</span>
<span style="font-style: italic;">  #+begin_quote</span>
<span style="font-style: italic;">%c</span>
<span style="font-style: italic;">  #+end_quote"</span>))
  (add-to-list 'org-capture-templates
               '(<span style="font-style: italic;">"!1"</span> <span style="font-style: italic;">"drill entry for english word"</span>
                 item(<span style="font-weight: bold;">function</span> my/org-english-goto-match)
                 <span style="font-style: italic;">"- %a</span>
<span style="font-style: italic;">  #+begin_quote</span>
<span style="font-style: italic;">%c</span>
<span style="font-style: italic;">  #+end_quote"</span>)))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/org-english-goto-match</span> ()
  <span style="font-style: italic;">"Goto function for org-capture-template designed to insert an edditional example</span>
<span style="font-style: italic;">to existing english word entry."</span>
  (org-goto-marker-or-bmk
   (plist-get (cadar match-entry) <span style="font-weight: bold;">:org-marker</span>)))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/org-english-insert-english-translation</span> ()
  <span style="font-style: italic;">"Insert English translation into org capture entry."</span>
  (<span style="font-weight: bold;">let*</span> ((url (format <span style="font-style: italic;">"http://wordnik.com/words/%s"</span> (downcase org-english-word)))
         (buffer (url-retrieve-synchronously url t t)))
    (<span style="font-weight: bold;">with-temp-buffer</span>
      (url-insert-buffer-contents buffer url)
      (completing-read <span style="font-style: italic;">"match"</span> (split-string (funcall 'my/define-word--parse-wordnik) <span style="font-style: italic;">"\n"</span>)))))

(advice-add #'my/org-english-insert-english-translation <span style="font-weight: bold;">:around</span> #'my/define-word--fix-31)

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/org-english-insert-japanese-translation</span> ()
  <span style="font-style: italic;">"Insert Japanese translation into org capture entry."</span>
  (<span style="font-weight: bold;">let*</span> ((url (format <span style="font-style: italic;">"https://ejje.weblio.jp/content/%s"</span> (downcase org-english-word)))
         (buffer (url-retrieve-synchronously url t t)))
    (<span style="font-weight: bold;">with-temp-buffer</span>
      (url-insert-buffer-contents buffer url)
      (funcall 'my/define-word--parse-weblio))))

(<span style="font-weight: bold;">defmacro</span> <span style="font-weight: bold;">with-org-drill-english-config</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;rest</span> body)
  <span style="font-style: italic;">"Evaluate BODY with config for Org-Drill for english words review."</span>
  `(<span style="font-weight: bold;">progn</span>
     (<span style="font-weight: bold;">let</span> ((org-drill-scope '(<span style="font-style: italic;">"~/org/agenda/life.org"</span>
                              <span style="font-style: italic;">"~/org/archive/archive_2021.org"</span>
                              <span style="font-style: italic;">"~/org/archive/archive_2020.org"</span>
                              <span style="font-style: italic;">"~/org/archive/archive_2019.org"</span>))
           (org-drill-question-tag <span style="font-style: italic;">"drill"</span>)
           (org-drill-maximum-items-per-session 20)
           (org-drill-hide-item-headings-p t)
           (org-startup-indented nil))
       (global-visual-line-mode 1)
       (org-indent-mode -1)
       ,@body)
     (global-visual-line-mode 0)
     (org-indent-mode 1)
     (org-save-all-org-buffers)))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/org-english-drill</span> ()
  <span style="font-style: italic;">"Invoke Org-Drill for English word review."</span>
  (<span style="font-weight: bold;">interactive</span>)
  (with-org-drill-english-config (org-drill)))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/org-english-drill-resume</span> ()
  <span style="font-style: italic;">"Resume Org-Drill session for english word review."</span>
  (<span style="font-weight: bold;">interactive</span>)
  (with-org-drill-english-config (org-drill-resume)))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/org-english-drill-nontrivial</span> ()
  <span style="font-style: italic;">""</span>
  (<span style="font-weight: bold;">interactive</span>)
  (<span style="font-weight: bold;">let</span> ((org-drill-match <span style="font-style: italic;">"-trivial"</span>))
    (with-org-drill-english-config (org-drill))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/org-english-drill-new</span> ()
  <span style="font-style: italic;">""</span>
  (<span style="font-weight: bold;">interactive</span>)
  (<span style="font-weight: bold;">let</span> ((org-drill-match <span style="font-style: italic;">"-DRILL_TOTAL_REPEATS&gt;0"</span>))
    (with-org-drill-english-config (org-drill))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/org-english-drill-test-display</span> ()
  <span style="font-style: italic;">"Show Org-Drill entry in the same way as english drill session."</span>
  (<span style="font-weight: bold;">interactive</span>)
  (with-org-drill-english-config (org-drill-test-display)))

(<span style="font-weight: bold;">provide</span> '<span style="font-weight: bold; text-decoration: underline;">my/org-english</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-org2f61d1d" class="outline-4">
<h4 id="org2f61d1d">org-password-store</h4>
<div class="outline-text-4" id="text-org2f61d1d">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">password-store</span>)

(<span style="font-weight: bold;">defcustom</span> <span style="font-weight: bold; font-style: italic;">my/org-password-store-property</span> <span style="font-style: italic;">"PASSWORD_STORE"</span>
  <span style="font-style: italic;">"Property used in my/password-store feature to get password-store entry name attached to current org entry."</span>)

(<span style="font-weight: bold;">defmacro</span> <span style="font-weight: bold;">with-password-store-entry</span> (entry <span style="font-weight: bold; text-decoration: underline;">&amp;rest</span> body)
  <span style="font-style: italic;">"Eval BODY which can refer password-store ENTRY.."</span>
  (<span style="font-weight: bold;">declare</span> (indent defun))
  `(<span style="font-weight: bold;">let</span> ((entry (<span style="font-weight: bold;">or</span> ,entry
                    (<span style="font-weight: bold;">when</span> (derived-mode-p 'org-mode) (org-entry-get (point) my/org-password-store-property))
                    (password-store--completing-read t))))
     ,@body))

(<span style="font-weight: bold;">defmacro</span> <span style="font-weight: bold;">with-password-store-entry-field</span> (entry field <span style="font-weight: bold; text-decoration: underline;">&amp;rest</span> body)
  <span style="font-style: italic;">"Eval BODY which can refer password-store ENTRY and FIELD..</span>

<span style="font-style: italic;">Plus, OBDY can refer value of FIELD named field-value."</span>
  (<span style="font-weight: bold;">declare</span> (indent defun))
  `(<span style="font-weight: bold;">let*</span> ((entry (<span style="font-weight: bold;">or</span> ,entry
                     (<span style="font-weight: bold;">when</span> (derived-mode-p 'org-mode) (org-entry-get (point) my/org-password-store-property))
                     (password-store--completing-read t)))
          (field (<span style="font-weight: bold;">or</span> ,field
                     (password-store-read-field entry)))
          (field-value (password-store-get-field entry field)))
     ,@body))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/password-store-copy</span> ()
  <span style="font-style: italic;">"Add password for ENTRY into the kill ring.</span>

<span style="font-style: italic;">`</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">password-store-copy</span><span style="font-style: italic;">' is responsible for managing the kill ring."</span>
  (<span style="font-weight: bold;">interactive</span>)
  (with-password-store-entry nil
    (password-store-copy entry)))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/password-store-copy-field</span> ()
  <span style="font-style: italic;">"Add field for entry into the kill ring.</span>

<span style="font-style: italic;">entry and field is determined by appropriate manner."</span>
  (<span style="font-weight: bold;">interactive</span>)
  (with-password-store-entry-field nil nil
    (password-store-copy-field entry field)))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/password-store-url</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> arg)
  <span style="font-style: italic;">"Browse url stored in entry by appropriate manner determined by ARG."</span>
  (<span style="font-weight: bold;">interactive</span> <span style="font-style: italic;">"P"</span>)
  (with-password-store-entry-field nil <span style="font-style: italic;">"url"</span>
    (<span style="font-weight: bold;">cl-case</span> (prefix-numeric-value arg)
      (16 (browse-url field-value))
      (4 (eww-browse-url field-value))
      (t (open-url field-value)))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/password-store-show-field</span> ()
  <span style="font-style: italic;">"Show a field value in the minibuffer.</span>

<span style="font-style: italic;">Password-store entry and field used to derive this value are from org property</span>
<span style="font-style: italic;">or selected by user."</span>
  (<span style="font-weight: bold;">interactive</span>)
  (with-password-store-entry-field nil nil
    (message <span style="font-style: italic;">"%s: %s"</span> field field-value)))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/password-store-create</span> ()
  (<span style="font-weight: bold;">interactive</span>)
  (<span style="font-weight: bold;">let*</span> ((input (read-string <span style="font-style: italic;">"Entry-name or URL: "</span>))
         (domain (<span style="font-weight: bold;">when</span> (string-match-p browse-url-button-regexp input)
                   (string-trim-right
                    (shell-command-to-string (format <span style="font-style: italic;">"echo %s | awk -F[/:] '{print $4}'"</span>
                                                     (shell-quote-argument input)))))))
    (with-password-store-entry (<span style="font-weight: bold;">cond</span>
                                ((&gt; (length domain) 0) domain)
                                (input))
      (<span style="font-weight: bold;">when</span> (derived-mode-p 'org-mode)
        (org-entry-put (point) my/org-password-store-property entry))
      (password-store-edit entry))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/password-store-edit</span> ()
  (<span style="font-weight: bold;">interactive</span>)
  (with-password-store-entry nil
    (password-store-edit entry)))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">TODO: make my/password-store-insert as soon after</span>
<span style="font-weight: bold; font-style: italic;">;;     </span><span style="font-weight: bold; font-style: italic;">: password-store--run-insert has been implemented</span>

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/password-store-remove</span> ()
  (<span style="font-weight: bold;">interactive</span>)
  (with-password-store-entry nil
    (password-store-remove entry)
    (<span style="font-weight: bold;">when</span> (derived-mode-p 'org-mode)
      (org-entry-delete (point) my/org-password-store-property))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/password-store-web-login</span> ()
  (<span style="font-weight: bold;">interactive</span>)
  (with-password-store-entry-field nil <span style="font-style: italic;">"username"</span>
    (password-store-copy entry)
    (sleep-for 0.2) <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">work around for overlapping message</span>
    (<span style="font-weight: bold;">if</span> field-value
        (message <span style="font-style: italic;">"%s: %s"</span> field field-value)
      (message (string-trim-right
                (concat
                 (when-let ((email (assoc <span style="font-style: italic;">"email"</span> (password-store-parse-entry entry))))
                   (format <span style="font-style: italic;">"%s: %s\n"</span> (car email) (cdr email)))
                 (when-let ((second (nth 1 (password-store-parse-entry entry))))
                   (format <span style="font-style: italic;">"%s: %s\n"</span> (car second) (cdr second)))))))
    (sleep-for 3)
    (funcall-interactively #'my/password-store-url '(16))))

(advice-add #'password-store-clear <span style="font-weight: bold;">:before</span> #'my/password-store-clear)

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/password-store-clear</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> field)
  <span style="font-style: italic;">"Overwrite clipboard data so that password once saved in clipboard is deleted</span>
<span style="font-style: italic;"> for security risk.</span>

<span style="font-style: italic;">FIELD originally for messaging is ignored in this function."</span>
  (<span style="font-weight: bold;">interactive</span>)
  (<span style="font-weight: bold;">when</span> password-store-kill-ring-pointer
    (kill-new <span style="font-style: italic;">""</span>)
    (setcar kill-ring-yank-pointer <span style="font-style: italic;">""</span>)))

(<span style="font-weight: bold;">with-eval-after-load</span> 'hydra
  (defhydra hydra-password-store (global-map <span style="font-style: italic;">"C-o p"</span>
                                             <span style="font-weight: bold;">:color</span> teal)
    <span style="font-style: italic;">"Password store"</span>
    (<span style="font-style: italic;">"cc"</span> my/password-store-copy)
    (<span style="font-style: italic;">"cf"</span> my/password-store-copy-field)
    (<span style="font-style: italic;">"s"</span> my/password-store-show-field)
    (<span style="font-style: italic;">"w"</span> my/password-store-url)
    (<span style="font-style: italic;">"l"</span> my/password-store-web-login)
    (<span style="font-style: italic;">"n"</span> my/password-store-create)
    (<span style="font-style: italic;">"e"</span> my/password-store-edit)
    (<span style="font-style: italic;">"v"</span> my/password-store-edit)
    (<span style="font-style: italic;">"k"</span> my/password-store-remove)
    (<span style="font-style: italic;">"q"</span> nil <span style="font-style: italic;">"quit"</span>)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb7afd60" class="outline-4">
<h4 id="orgb7afd60">org-archive</h4>
<div class="outline-text-4" id="text-orgb7afd60">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">org</span>)
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">org-agenda</span>)

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/org-archive-file</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> year)
  <span style="font-style: italic;">"Return a path of archive file.</span>

<span style="font-style: italic;">If optional argument `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">YEAR</span><span style="font-style: italic;">' is passed that year's file is returned instead of current year's."</span>
  (<span style="font-weight: bold;">let*</span> ((record-year (<span style="font-weight: bold;">or</span> year (ts-year (ts-now))))
         (record-file-cand (format <span style="font-style: italic;">"%s/archive/archive_%s.org"</span> org-directory record-year))
         (record-file
          (<span style="font-weight: bold;">if</span> (file-exists-p record-file-cand)
              record-file-cand
            (expand-file-name <span style="font-style: italic;">"archive/archive_0000.org"</span> org-directory))))
    (<span style="font-weight: bold;">if</span> (<span style="font-weight: bold;">or</span> (file-exists-p record-file)
            (file-symlink-p record-file))
        record-file
      nil)))

(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">my/org-archive-file</span> (my/org-archive-file))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/org-archive-files</span> ()
  <span style="font-style: italic;">"Return list of archive files."</span>
  (append (directory-files (expand-file-name <span style="font-style: italic;">"archive"</span> org-directory) t <span style="font-style: italic;">"archive_[[:digit:]]\\{4\\}\\.org"</span> nil)
          org-agenda-files))

(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">my/org-archive-files</span> (my/org-archive-files))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/org-archive-find-date</span> (date)
  <span style="font-style: italic;">"Find and visit the location of DATE in archivee file.</span>

<span style="font-style: italic;">DATE must be a string representing the date to find and parsable with `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">format-time-string</span><span style="font-style: italic;">'.</span>

<span style="font-style: italic;">If called interactively, it prompt the user to select the date to find."</span>
  (<span style="font-weight: bold;">interactive</span>
   (<span style="font-weight: bold;">cond</span>
    ((eq major-mode 'calendar-mode)
     (list (calendar-date-string (calendar-cursor-to-date))))
    ((eq major-mode 'org-agenda-mode)
     (<span style="font-weight: bold;">let*</span> ((day (<span style="font-weight: bold;">or</span> (get-text-property (min (1- (point-max)) (point)) 'day)
                     (<span style="font-weight: bold;">user-error</span> <span style="font-style: italic;">"Don't know which date to open in calendar"</span>)))
            (date (calendar-gregorian-from-absolute day)))
       (list (calendar-date-string date))))
    (t (<span style="font-weight: bold;">let</span> ((date-select (org-read-date)))
         (list date-select)))))
  (<span style="font-weight: bold;">let*</span> ((d (parse-time-string date))
         (day (decoded-time-day d))
         (month (decoded-time-month d))
         (year (decoded-time-year d)))
    (find-file (my/org-archive-file year))
    (org-datetree-find-iso-week-create `(,month ,day ,year))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/org-archive-subtree</span> ()
  <span style="font-style: italic;">"Refile current subtree to archive file using latest timestamp."</span>
  (<span style="font-weight: bold;">interactive</span>)
  (<span style="font-weight: bold;">let*</span> ((ts (car (sort (org-timestamps-in-entry) #'ts&gt;)))
         (year (ts-year (<span style="font-weight: bold;">or</span> ts (ts-now))))
         (save-file (my/org-archive-file year))
         (tags (org-get-local-tags))
         (todo (org-get-todo-state)))
    (when-let* ((pos (<span style="font-weight: bold;">with-current-buffer</span> (find-file-noselect save-file)
                       (<span style="font-weight: bold;">save-excursion</span>
                         (<span style="font-weight: bold;">if</span> (<span style="font-weight: bold;">and</span> (member <span style="font-style: italic;">"web"</span> tags)
                                  (not (member todo '(<span style="font-style: italic;">"DN"</span> <span style="font-style: italic;">"PD"</span>))))
                             (org-find-exact-headline-in-buffer <span style="font-style: italic;">"untouched items"</span>)
                           (org-datetree-find-iso-week-create `(,(ts-month ts)
                                                                ,(ts-day ts)
                                                                ,(ts-year ts)))
                           (point))))))
      (org-refile nil nil (list nil save-file nil pos)))
    (org-save-all-org-buffers)
    (<span style="font-weight: bold;">setq</span> this-command 'my/org-archive-subtree)))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/org-agenda-archive-subtree</span> ()
  <span style="font-style: italic;">"Refile the entry or subtree belonging to the current agenda entry."</span>
  (<span style="font-weight: bold;">interactive</span>)
  (org-agenda-archive-with 'my/org-archive-subtree))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/org-ql-view-archive-subtree</span> ()
  <span style="font-style: italic;">"Refile the entry or subtree belonging to the current agenda entry."</span>
  (<span style="font-weight: bold;">interactive</span>)
  (org-agenda-archive-with 'my/org-archive-subtree)
  (org-ql-view-refresh))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/org-archive-search</span> (query)
  <span style="font-style: italic;">"Search org entries matched QUERY in archive files using `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">org-ql-search</span><span style="font-style: italic;">'."</span>
  (<span style="font-weight: bold;">interactive</span> (list (read-string <span style="font-style: italic;">"Query: "</span>)))
  (<span style="font-weight: bold;">let</span> ((files (my/org-archive-files)))
    (org-ql-search files query)))

(bind-keys <span style="font-weight: bold;">:map</span> org-agenda-mode-map
           (<span style="font-style: italic;">"$"</span> . my/org-agenda-archive-subtree)
           (<span style="font-style: italic;">"C"</span> . my/org-archive-find-date)
           <span style="font-weight: bold;">:map</span> org-ql-view-map
           (<span style="font-style: italic;">"$"</span> . my/org-ql-view-archive-subtree)
           <span style="font-weight: bold;">:map</span> calendar-mode-map
           (<span style="font-style: italic;">"C"</span> . my/org-archive-find-date))

(<span style="font-weight: bold;">push</span> '(<span style="font-style: italic;">"Archive entries"</span> . my/org-archive-search)
      org-ql-views)

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/lookup-org-archive</span> (word <span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> arg)
  <span style="font-style: italic;">"Look up WORD in my archive files using `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">org-ql-search</span><span style="font-style: italic;">'."</span>
  (<span style="font-weight: bold;">interactive</span> (list (<span style="font-weight: bold;">if</span> (use-region-p)
                         (buffer-substring (region-beginning) (region-end))
                       (read-string <span style="font-style: italic;">"Word: "</span>))
                     current-prefix-arg))
  (org-ql-search
    my/org-archive-files
    (<span style="font-weight: bold;">cond</span>
     ((equal arg '(4)) `(heading ,word))
     (t `(regexp ,word)))))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">TODO: This function can be rewritten with org-ml</span>
<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">org-timestamps-in-entry</span> ()
  <span style="font-style: italic;">"Return timestamp objects for all Org timestamps in entry."</span>
  (<span style="font-weight: bold;">interactive</span> (list current-prefix-arg))
  (<span style="font-weight: bold;">save-excursion</span>
    (goto-char (org-entry-beginning-position))
    (org-show-entry)
    (org-narrow-to-element)
    (<span style="font-weight: bold;">let*</span> ((parsetree (org-element-parse-buffer))
           (ts-list nil))
      (org-element-map parsetree '(planning clock timestamp)
        (<span style="font-weight: bold;">lambda</span> (elm)
          (<span style="font-weight: bold;">cl-case</span> (org-element-type elm)
            ('planning
             (add-to-list 'ts-list (ts-parse-org-element (<span style="font-weight: bold;">or</span> (org-element-property <span style="font-weight: bold;">:closed</span> elm)
                                                             (org-element-property <span style="font-weight: bold;">:scheduled</span> elm)
                                                             (org-element-property <span style="font-weight: bold;">:deadline</span> elm)))
                          t))
            ('clock
             (add-to-list 'ts-list (ts-parse-org-element (org-element-property <span style="font-weight: bold;">:value</span> elm)) t))
            ('timestamp
             (add-to-list 'ts-list (ts-parse-org-element elm) t)))))
      (widen)
      ts-list)))

(<span style="font-weight: bold;">provide</span> '<span style="font-weight: bold; text-decoration: underline;">my/org-archive</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgabe25d4" class="outline-4">
<h4 id="orgabe25d4">org-capture-derived</h4>
<div class="outline-text-4" id="text-orgabe25d4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">thingatpt</span>)
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">whitespace</span>)

(<span style="font-weight: bold;">with-eval-after-load</span> 'org-capture
  (mapc (<span style="font-weight: bold;">lambda</span> (template)
          (add-to-list 'org-capture-templates
                       template))
        '((<span style="font-style: italic;">"x"</span> <span style="font-style: italic;">"actionable entry for manual input"</span>
           entry
           (<span style="font-weight: bold;">function</span> org-capture-derived-target-function)
           <span style="font-style: italic;">"* %(org-capture-derived-insert-todo)%? %(org-set-tags org-capture-derived-tags)\n%(org-capture-derived-insert-deadline)"</span>)
          (<span style="font-style: italic;">"X"</span> <span style="font-style: italic;">"Actionable entry for automated input"</span>
           entry
           (<span style="font-weight: bold;">function</span> org-capture-derived-target-function)
           <span style="font-style: italic;">"* %(org-capture-derived-insert-todo)%a %(org-set-tags org-capture-derived-tags)\n%(org-capture-derived-insert-deadline)"</span>
           <span style="font-weight: bold;">:immediate-finish</span> t))))

(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">org-capture-derived-todo</span> nil
  <span style="font-style: italic;">"Todo state to be set to an org entry which org-capture-derived creates.</span>

<span style="font-style: italic;">User should set this value locally, otherwise unexpected results occur."</span>)
(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">org-capture-derived-tags</span> nil
  <span style="font-style: italic;">"Tags represented with colon(:) to be set to an org entry which org-capture-derived creates.</span>

<span style="font-style: italic;">User should set this value locally, otherwise unexpected results occur."</span>)
(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">org-capture-derived-target</span> nil <span style="font-style: italic;">"docstring"</span>)
(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">org-capture-derived-deadline-in-day</span> nil <span style="font-style: italic;">"docstring"</span>)

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">org-capture-derived-target-function</span> ()
  <span style="font-style: italic;">""</span>
  (<span style="font-weight: bold;">cond</span>
   ((listp org-capture-derived-target)
    (set-buffer (org-capture-target-buffer (nth 1 org-capture-derived-target)))
    (org-capture-put-target-region-and-position)
    (widen)
    (goto-char (nth 3 org-capture-derived-target)))
   ((<span style="font-weight: bold;">and</span> (stringp org-capture-derived-target)
         (string-match-p thing-at-point-uuid-regexp org-capture-derived-target))
    (org-id-goto org-capture-derived-target))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">org-capture-derived</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> arg)
  <span style="font-style: italic;">"C-u user is asked for all arguments</span>
<span style="font-style: italic;">C-u C-u create manually"</span>
  (<span style="font-weight: bold;">interactive</span> <span style="font-style: italic;">"P"</span>)
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">insert ID property unless existing</span>
  (<span style="font-weight: bold;">cond</span>
   ((<span style="font-weight: bold;">and</span> (eq major-mode 'org-mode)
         (not (equal arg '(16))))
    (org-id-get nil t)))
  (<span style="font-weight: bold;">let*</span> ((todo-in-org
          (<span style="font-weight: bold;">when</span> (derived-mode-p 'org-mode)
            (org-entry-get (point) <span style="font-style: italic;">"DERIVED_TODO"</span> t)))
         (org-capture-derived-todo
          (<span style="font-weight: bold;">or</span> todo-in-org
              org-capture-derived-todo))
         (tags-in-org
          (<span style="font-weight: bold;">when</span> (derived-mode-p 'org-mode)
            (org-entry-get (point) <span style="font-style: italic;">"DERIVED_TAGS"</span> t)))
         (org-capture-derived-tags
          (<span style="font-weight: bold;">or</span> (<span style="font-weight: bold;">when</span> (not (equal arg '(4)))
                (<span style="font-weight: bold;">or</span> tags-in-org
                    org-capture-derived-tags))
              (read-string <span style="font-style: italic;">"Tags: "</span> tags-in-org)))
         (target-in-org
          (<span style="font-weight: bold;">when</span> (derived-mode-p 'org-mode)
            (org-entry-get (point) <span style="font-style: italic;">"DERIVED_TARGET"</span> t)))
         (org-capture-derived-target
          (<span style="font-weight: bold;">or</span> (<span style="font-weight: bold;">when</span> (not (equal arg '(4)))
                (<span style="font-weight: bold;">or</span> target-in-org
                    org-capture-derived-target))
              (org-refile-get-location)))
         (deadline-str-in-org
          (<span style="font-weight: bold;">when</span> (derived-mode-p 'org-mode)
            (org-entry-get (point) <span style="font-style: italic;">"DERIVED_DEADLINE_IN_DAY"</span> t)))
         (deadline-num-in-org
          (<span style="font-weight: bold;">if</span> (stringp deadline-str-in-org) (string-to-number deadline-str-in-org) nil))
         (org-capture-derived-deadline-in-day
          (<span style="font-weight: bold;">if</span> (equal arg '(4))
              (read-number <span style="font-style: italic;">"Deadline in day: "</span>
                           deadline-num-in-org)
            (<span style="font-weight: bold;">or</span> deadline-num-in-org
                org-capture-derived-deadline-in-day))))
    (<span style="font-weight: bold;">if</span> (equal arg '(16))
        (org-capture nil <span style="font-style: italic;">"x"</span>)
      (org-capture nil <span style="font-style: italic;">"X"</span>))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">org-capture-derived-insert-todo</span> ()
  <span style="font-style: italic;">""</span>
  (<span style="font-weight: bold;">if</span> (stringp org-capture-derived-todo)
      (<span style="font-weight: bold;">if</span> (string-match-p whitespace-trailing-regexp
                          org-capture-derived-todo)
          org-capture-derived-todo
        (format <span style="font-style: italic;">"%s "</span> org-capture-derived-todo))
    <span style="font-style: italic;">""</span>))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">org-capture-derived-insert-deadline</span> ()
  <span style="font-style: italic;">""</span>
  (<span style="font-weight: bold;">if</span> (numberp org-capture-derived-deadline-in-day)
      (<span style="font-weight: bold;">let</span> ((week-ahead (encode-time
                         (seq-map-indexed (<span style="font-weight: bold;">lambda</span> (element index)
                                            (<span style="font-weight: bold;">if</span> (= index 3)
                                                (+ element org-capture-derived-deadline-in-day)
                                              element))
                                          (decode-time (current-time))))))
        (format-time-string <span style="font-style: italic;">"DEADLINE: &lt;%Y-%m-%d %a&gt;"</span> week-ahead))
    <span style="font-style: italic;">""</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgaf620b5" class="outline-4">
<h4 id="orgaf620b5">org-relate</h4>
<div class="outline-text-4" id="text-orgaf620b5">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">thingatpt</span>)
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">org-ql-search</span>)

(<span style="font-weight: bold;">defconst</span> <span style="font-weight: bold; font-style: italic;">org-relate-property</span> <span style="font-style: italic;">"PARENT"</span>
  <span style="font-style: italic;">"Property name for child nodes to look up parent node."</span>)
(<span style="font-weight: bold;">defcustom</span> <span style="font-weight: bold; font-style: italic;">org-relate-parent-tag-list</span>
  '(<span style="font-style: italic;">"project"</span> <span style="font-style: italic;">"refile"</span>)
  <span style="font-style: italic;">"A list of tags all parent nodes must have one of them."</span>)
(<span style="font-weight: bold;">defcustom</span> <span style="font-weight: bold; font-style: italic;">org-relate-target-files</span>
  (directory-files-recursively org-directory <span style="font-style: italic;">"\\.org$"</span>)
  <span style="font-style: italic;">"A list of target files to search relation nodes."</span>)

(<span style="font-weight: bold;">with-eval-after-load</span> 'org
  (bind-key <span style="font-style: italic;">"C-c %"</span> #'org-relate-search
            org-mode-map))

(<span style="font-weight: bold;">with-eval-after-load</span> 'org-keys
  (<span style="font-weight: bold;">setf</span> (map-elt org-speed-commands <span style="font-style: italic;">"%"</span>) #'org-relate-search)
  (<span style="font-weight: bold;">setf</span> (map-elt org-speed-commands <span style="font-style: italic;">"&amp;"</span>) #'org-relate-interrelate)
  (<span style="font-weight: bold;">push</span> '(<span style="font-style: italic;">"Org-Relate Operation"</span>) org-speed-commands))

(<span style="font-weight: bold;">with-eval-after-load</span> 'org-agenda
  (bind-keys <span style="font-weight: bold;">:map</span> org-agenda-mode-map
             (<span style="font-style: italic;">"&amp;"</span> . org-agenda-relation-interrelate)))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">org-relate-search</span> ()
  <span style="font-style: italic;">"Search for entries related to the entry at point.</span>

<span style="font-style: italic;">User who would like to search for parent and children of that, namely siblings,</span>
<span style="font-style: italic;"> must press 'p'.</span>
<span style="font-style: italic;">User who would like to search for children of this entry must press 'c'.</span>
<span style="font-style: italic;">User who would like to search for friends either pointing to this entry</span>
<span style="font-style: italic;"> or pointed from this entry must be press 'f'.</span>
<span style="font-style: italic;">User who would like to search for all listed above must press 'a'."</span>
  (<span style="font-weight: bold;">interactive</span>)
  (<span style="font-weight: bold;">let*</span> ((org-super-agenda-properties-inherit nil)
         (char (read-char-from-minibuffer <span style="font-style: italic;">"Target: [a]ll [p]arent [c]hild [f]riend"</span>))
         (queries (seq-remove 'null
                              (<span style="font-weight: bold;">cond</span>
                               ((equal char ?a) (list (org-relate--search-parent-org-ql-query)
                                                      (org-relate--search-children-org-ql-query)
                                                      (org-relate--search-friends-refer-org-ql-query)
                                                      (org-relate--search-friends-referred-org-ql-query)
                                                      (org-relate--search-siblings-org-ql-query)))
                               ((equal char ?p) (list (org-relate--search-parent-org-ql-query)
                                                      (org-relate--search-siblings-org-ql-query)))
                               ((equal char ?c) (list (org-relate--search-children-org-ql-query)))
                               ((equal char ?f) (list (org-relate--search-friends-refer-org-ql-query)
                                                      (org-relate--search-friends-referred-org-ql-query)))))))
    (<span style="font-weight: bold;">if</span> queries
        (org-ql-search org-relate-target-files
          (seq-reduce (<span style="font-weight: bold;">lambda</span> (accum elem)
                        (<span style="font-weight: bold;">push</span> elem (cdr (last accum)))
                        accum)
                      (mapcar 'car queries)
                      '(<span style="font-weight: bold;">or</span>))
          <span style="font-weight: bold;">:super-groups</span> (mapcar 'cdr queries))
      (message <span style="font-style: italic;">"No query found"</span>))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">org-relate--search-children-org-ql-query</span> ()
  (when-let* ((id (org-id-get))
              (rel-prop-link (format <span style="font-style: italic;">"[[id:%s]]"</span> id)))
    `((<span style="font-weight: bold;">or</span> (property ,org-relate-property ,id)
          (property ,org-relate-property ,rel-prop-link)) <span style="font-weight: bold;">.</span>
          (<span style="font-weight: bold;">:name</span> <span style="font-style: italic;">"Children"</span> <span style="font-weight: bold;">:property</span> (,org-relate-property ,id)))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">org-relate--search-parent-org-ql-query</span> ()
  (if-let* ((prop-ref (org-entry-get (point) org-relate-property))
            (index (string-match (format <span style="font-style: italic;">"</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">(</span><span style="font-style: italic;">%s</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">)</span><span style="font-style: italic;">"</span> thing-at-point-uuid-regexp) prop-ref))
            (parent-id (match-string 0 prop-ref)))
      `((property <span style="font-style: italic;">"ID"</span> ,parent-id) .
        (<span style="font-weight: bold;">:name</span> <span style="font-style: italic;">"Parent"</span> <span style="font-weight: bold;">:property</span> (<span style="font-style: italic;">"ID"</span> ,parent-id)))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">org-relate--search-siblings-org-ql-query</span> ()
  (if-let* ((prop-ref (org-entry-get (point) org-relate-property))
            (index (string-match (format <span style="font-style: italic;">"</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">(</span><span style="font-style: italic;">%s</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">)</span><span style="font-style: italic;">"</span> thing-at-point-uuid-regexp) prop-ref))
            (parent-id (match-string 0 prop-ref))
            (parent-id-link (format <span style="font-style: italic;">"[[id:%s]]"</span> parent-id)))
      `((<span style="font-weight: bold;">or</span> (property ,org-relate-property ,parent-id)
            (property ,org-relate-property ,parent-id-link)) <span style="font-weight: bold;">.</span>
            (<span style="font-weight: bold;">:name</span> <span style="font-style: italic;">"Siblings"</span> <span style="font-weight: bold;">:property</span> (,org-relate-property ,parent-id)))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">org-relate--search-friends-refer-org-ql-query</span> ()
  (when-let* ((id (org-id-get))
              (ref-re (format <span style="font-style: italic;">"\\[\\[</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">id:%s\\</span><span style="font-style: italic;">].*\\]"</span> id)))
    `((regexp ,ref-re) .
      (<span style="font-weight: bold;">:name</span> <span style="font-style: italic;">"Friends pointing to this entry"</span> <span style="font-weight: bold;">:regexp</span> ,ref-re))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">org-relate--search-friends-referred-org-ql-query</span> ()
  (<span style="font-weight: bold;">let*</span> ((id-link-re (format <span style="font-style: italic;">"\\[\\[id:</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">(</span><span style="font-style: italic;">%s</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">)</span><span style="font-style: italic;">\\].*\\]"</span> thing-at-point-uuid-regexp))
         (end (<span style="font-weight: bold;">or</span> (<span style="font-weight: bold;">save-excursion</span>
                    (outline-next-heading))
                  (point-max))))
    (<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">save-excursion</span>
            (re-search-forward id-link-re end t))
      `((property <span style="font-style: italic;">"ID"</span> ,(match-string 1)) .
        (<span style="font-weight: bold;">:name</span> <span style="font-style: italic;">"Friends to whom this entry is pointing"</span> <span style="font-weight: bold;">:property</span> (<span style="font-style: italic;">"ID"</span> ,(match-string 1)))))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">org-relate-interrelate</span> ()
  <span style="font-style: italic;">"Make parent-child relationship by inserting property.</span>

<span style="font-style: italic;">This command must be called in parent node which should have one of `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">org-relate-parent-tag-list</span><span style="font-style: italic;">'."</span>
  (<span style="font-weight: bold;">interactive</span>)
  (<span style="font-weight: bold;">save-excursion</span>
    (org-back-to-heading)
    (<span style="font-weight: bold;">if</span> (cl-some (<span style="font-weight: bold;">lambda</span> (parent-tag)
                   (member parent-tag (org-get-tags)))
                 org-relate-parent-tag-list)
        (<span style="font-weight: bold;">let</span> ((ref-id (org-id-get-create)))
          (<span style="font-weight: bold;">and</span> (org-goto-first-child)
               (<span style="font-weight: bold;">cl-labels</span> ((set-ref-id-to-siblings
                            (ref-link)
                            (org-set-property org-relate-property ref-link)
                            (<span style="font-weight: bold;">and</span> (org-goto-sibling)
                                 (set-ref-id-to-siblings ref-link))))
                 (set-ref-id-to-siblings ref-id)))
          (message <span style="font-style: italic;">"Interrelated has done."</span>))
      (message <span style="font-style: italic;">"This entry does not compliant with 'org-relate-parent-tag-list"</span>))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">org-agenda-relation-interrelate</span> ()
  <span style="font-style: italic;">"Invoke `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">org-relate-interrelate</span><span style="font-style: italic;">' in agenda view."</span>
  (<span style="font-weight: bold;">interactive</span>)
  (org-agenda-check-no-diary)
  (<span style="font-weight: bold;">let*</span> ((hdmarker (<span style="font-weight: bold;">or</span> (org-get-at-bol 'org-hd-marker)
                       (org-agenda-error)))
         (buffer (marker-buffer hdmarker))
         (pos (marker-position hdmarker))
         (inhibit-read-only t)
         newhead)
    (<span style="font-weight: bold;">org-with-remote-undo</span> buffer
      (<span style="font-weight: bold;">with-current-buffer</span> buffer
        (widen)
        (goto-char pos)
        (org-show-context 'agenda)
        (call-interactively 'org-relate-interrelate)
        (end-of-line 1)
        (<span style="font-weight: bold;">setq</span> newhead (org-get-heading))))))

(<span style="font-weight: bold;">provide</span> '<span style="font-weight: bold; text-decoration: underline;">org-relate</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-org4135de5" class="outline-4">
<h4 id="org4135de5">clocktable-by-tag with org-clock</h4>
<div class="outline-text-4" id="text-org4135de5">
<p>
Provide a function to Build a clock table summing up time by tag.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">org-table</span>)
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">org-clock</span>)

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">clocktable-by-tag/shift-cell</span> (n)
  (<span style="font-weight: bold;">let</span> ((str <span style="font-style: italic;">""</span>))
    (<span style="font-weight: bold;">dotimes</span> (i n)
      (<span style="font-weight: bold;">setq</span> str (concat str <span style="font-style: italic;">"| "</span>)))
    str))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">clocktable-by-tag/insert-tag</span> (params)
  (<span style="font-weight: bold;">let</span> ((match (plist-get params <span style="font-weight: bold;">:match</span>)))
    (insert <span style="font-style: italic;">"|--\n"</span>)
    (insert (format <span style="font-style: italic;">"| %s | *Tag time* |\n"</span> match))
    (<span style="font-weight: bold;">let</span> ((total 0))
      (mapcar
       (<span style="font-weight: bold;">lambda</span> (file)
         (<span style="font-weight: bold;">let</span> ((clock-data (<span style="font-weight: bold;">with-current-buffer</span> (find-file-noselect file)
                             (org-clock-get-table-data (buffer-name) params))))
           (<span style="font-weight: bold;">when</span> (&gt; (nth 1 clock-data) 0)
             (<span style="font-weight: bold;">setq</span> total (+ total (nth 1 clock-data)))
             (insert (format <span style="font-style: italic;">"| | File *%s* | %.2f |\n"</span>
                             (file-name-nondirectory file)
                             (/ (nth 1 clock-data) 60.0)))
             (<span style="font-weight: bold;">dolist</span> (entry (nth 2 clock-data))
               (insert (format <span style="font-style: italic;">"| | . %s%s | %s %.2f |\n"</span>
                               (org-clocktable-indent-string (nth 0 entry))
                               (replace-regexp-in-string <span style="font-style: italic;">"|"</span> <span style="font-style: italic;">"\\vert</span><span style="font-weight: bold; font-style: italic;">\</span><span style="font-style: italic;">{</span><span style="font-weight: bold; font-style: italic;">\</span><span style="font-style: italic;">}"</span> (nth 1 entry) nil t)
                               (clocktable-by-tag/shift-cell (nth 0 entry))
                               (/ (nth 4 entry) 60.0)))))))
       (org-agenda-files))
      (<span style="font-weight: bold;">if</span> (= total 0)
          (<span style="font-weight: bold;">save-excursion</span>
            (re-search-backward <span style="font-style: italic;">"*Tag time*"</span>)
            (forward-line -1)
            (<span style="font-weight: bold;">dotimes</span> (i 2)
              (org-table-kill-row)))
        (<span style="font-weight: bold;">save-excursion</span>
          (re-search-backward <span style="font-style: italic;">"*Tag time*"</span>)
          (org-table-next-field)
          (org-table-blank-field)
          (insert (format <span style="font-style: italic;">"*%.2f*"</span> (/ total 60.0))))))
    (org-table-align)))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">org-dblock-write:clocktable-by-tag</span> (params)
  (funcall indent-line-function)
  (insert <span style="font-style: italic;">"| Tag | Headline | Time (h) |\n"</span>)
  (insert <span style="font-style: italic;">"|     |          | &lt;r&gt;  |\n"</span>)
  (<span style="font-weight: bold;">let</span> ((matches
         (org-global-tags-completion-table)))
    (mapcar (<span style="font-weight: bold;">lambda</span> (match)
              (<span style="font-weight: bold;">let</span> ((match-str (car match)))
                (<span style="font-weight: bold;">when</span> (string= (substring match-str 0 3) <span style="font-style: italic;">"AC_"</span>)
                  (<span style="font-weight: bold;">setq</span> params (plist-put params <span style="font-weight: bold;">:match</span> match-str))
                  (clocktable-by-tag/insert-tag params))))
            matches)))

(<span style="font-weight: bold;">provide</span> '<span style="font-weight: bold; text-decoration: underline;">clocktable-by-tag</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-org7b5f666" class="outline-4">
<h4 id="org7b5f666">narrow-dwim</h4>
<div class="outline-text-4" id="text-org7b5f666">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(bind-key* <span style="font-style: italic;">"C-x n"</span> 'my/toggle-narrow-dwim)

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/toggle-narrow-dwim</span> (arg)
  <span style="font-style: italic;">"If the buffer is narrowed, it widens. Otherwise, it narrows intelligently.</span>
<span style="font-style: italic;">Intelligently means: region, org-src-block, org-subtree, or defun,</span>
<span style="font-style: italic;">whichever applies first.</span>
<span style="font-style: italic;">Narrowing to org-src-block actually calls `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">org-edit-src-code</span><span style="font-style: italic;">'.</span>

<span style="font-style: italic;">With prefix ARG, don't widen, just narrow even if buffer is already narrowed."</span>
  (<span style="font-weight: bold;">interactive</span> <span style="font-style: italic;">"P"</span>)
  (<span style="font-weight: bold;">declare</span> (interactive-only))
  (<span style="font-weight: bold;">cond</span> ((<span style="font-weight: bold;">and</span> (buffer-narrowed-p) (not arg))
         (<span style="font-weight: bold;">when</span> (org-buffer-narrowed-p)
           (<span style="font-weight: bold;">when</span> org-startup-indented
             (org-indent-mode 1))
           (visual-line-mode -1)
           (adaptive-wrap-prefix-mode -1))
         (widen)
         (<span style="font-weight: bold;">setq-local</span> truncate-lines t))
        ((region-active-p)
         (narrow-to-region (region-beginning) (region-end)))
        ((<span style="font-weight: bold;">and</span> (boundp 'org-src-mode) org-src-mode (not arg))
         (org-edit-src-exit))
        ((<span style="font-weight: bold;">condition-case</span> err
             (org-edit-src-code)
           (<span style="font-weight: bold;">user-error</span> nil)))
        ((derived-mode-p 'org-mode)
         (<span style="font-weight: bold;">cond</span> ((org-at-block-p)
                (org-narrow-to-block))
               ((org-at-heading-p)
                (org-narrow-to-subtree)
                (adaptive-wrap-prefix-mode))
               (t (org-narrow-to-element)))
         (org-indent-mode -1)
         (visual-line-mode 1))
        ((eq major-mode 'dired-mode)
         (dired-subtree-narrow))
        (t (narrow-to-defun))))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(add-hook 'post-command-hook 'highlight-narrowed-buffer)</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(defun highlight-narrowed-buffer ()</span>
<span style="font-weight: bold; font-style: italic;">;;   </span><span style="font-weight: bold; font-style: italic;">"Highlight narrowed buffer.</span>

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Narrowed buffer have a fringe with highlighting color.</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Plus text size in the buffer becomes a little bit larger."</span>
<span style="font-weight: bold; font-style: italic;">;;   </span><span style="font-weight: bold; font-style: italic;">(unless (or (member last-command</span>
<span style="font-weight: bold; font-style: italic;">;;                       </span><span style="font-weight: bold; font-style: italic;">'(text-scale-adjust))</span>
<span style="font-weight: bold; font-style: italic;">;;               </span><span style="font-weight: bold; font-style: italic;">(eq major-mode 'Info-mode)</span>
<span style="font-weight: bold; font-style: italic;">;;               </span><span style="font-weight: bold; font-style: italic;">(string-match-p (rx (seq line-start "CAPTURE-" (one-or-more ascii) line-end))</span>
<span style="font-weight: bold; font-style: italic;">;;                               </span><span style="font-weight: bold; font-style: italic;">(buffer-name)))</span>
<span style="font-weight: bold; font-style: italic;">;;     </span><span style="font-weight: bold; font-style: italic;">(let ((hl-fringe-color "purple2")</span>
<span style="font-weight: bold; font-style: italic;">;;           </span><span style="font-weight: bold; font-style: italic;">(hl-text-scale (sqrt 2)))</span>
<span style="font-weight: bold; font-style: italic;">;;       </span><span style="font-weight: bold; font-style: italic;">(set-face-attribute</span>
<span style="font-weight: bold; font-style: italic;">;;        </span><span style="font-weight: bold; font-style: italic;">'fringe nil :background (if (buffer-narrowed-p)</span>
<span style="font-weight: bold; font-style: italic;">;;                                    </span><span style="font-weight: bold; font-style: italic;">(progn</span>
<span style="font-weight: bold; font-style: italic;">;;                                      </span><span style="font-weight: bold; font-style: italic;">(text-scale-set hl-text-scale)</span>
<span style="font-weight: bold; font-style: italic;">;;                                      </span><span style="font-weight: bold; font-style: italic;">hl-fringe-color)</span>
<span style="font-weight: bold; font-style: italic;">;;                                  </span><span style="font-weight: bold; font-style: italic;">(progn</span>
<span style="font-weight: bold; font-style: italic;">;;                                    </span><span style="font-weight: bold; font-style: italic;">(when (= text-scale-mode-amount hl-text-scale)</span>
<span style="font-weight: bold; font-style: italic;">;;                                      </span><span style="font-weight: bold; font-style: italic;">(text-scale-set 0))</span>
<span style="font-weight: bold; font-style: italic;">;;                                    </span><span style="font-weight: bold; font-style: italic;">nil))))))</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orga277c4e" class="outline-4">
<h4 id="orga277c4e">weather</h4>
<div class="outline-text-4" id="text-orga277c4e">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#27671;&#35937;&#24193;&#37197;&#20449;&#12398;&#22825;&#27671;&#24773;&#22577;&#12434;&#21152;&#24037;&#12375;&#12390;&#34920;&#31034;</span>

(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">request</span>)
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">cl</span>)

(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">weather-areas</span>
  '(((url . <span style="font-style: italic;">"http://www.drk7.jp/weather/xml/14.xml"</span>)
     (pref . <span style="font-style: italic;">"&#31070;&#22856;&#24029;&#30476;"</span>)
     (area . <span style="font-style: italic;">"&#35199;&#37096;"</span>))
    ((url . <span style="font-style: italic;">"http://www.drk7.jp/weather/xml/22.xml"</span>)
     (pref . <span style="font-style: italic;">"&#38745;&#23713;&#30476;"</span>)
     (area . <span style="font-style: italic;">"&#20013;&#37096;"</span>))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">weather-area-show</span> (weather-area-alist weather-buffer)
  (lexical-let ((url (assoc-default 'url weather-area-alist))
                (pref (assoc-default 'pref weather-area-alist))
                (area (assoc-default 'area weather-area-alist))
                (buffer weather-buffer))
    (request
      url
      <span style="font-weight: bold;">:parser</span>
      (<span style="font-weight: bold;">lambda</span> ()
        (<span style="font-weight: bold;">let</span> ((xml-string (string-as-multibyte (string-as-unibyte (buffer-string)))))
          (<span style="font-weight: bold;">with-temp-buffer</span>
            (erase-buffer)
            (insert xml-string)
            (libxml-parse-xml-region (point-min) (point-max)))))
      <span style="font-weight: bold;">:success</span>
      (<span style="font-weight: bold;">cl-function</span>
       (<span style="font-weight: bold;">lambda</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;key</span> data <span style="font-weight: bold; text-decoration: underline;">&amp;allow-other-keys</span>)
         (<span style="font-weight: bold;">when</span> data
           (<span style="font-weight: bold;">with-current-buffer</span> buffer
             (insert (format <span style="font-style: italic;">"%s %s\n"</span> pref area))
             (mapcar
              (<span style="font-weight: bold;">lambda</span> (info-node)
                (insert
                 (format <span style="font-style: italic;">"%s %s %s %s\n"</span>
                         (<span style="font-weight: bold;">dom-attr</span> info-node 'date)
                         (apply (<span style="font-weight: bold;">lambda</span> (max-temp-node min-temp-node)
                                  (format <span style="font-style: italic;">"%2d/%2d&#8451;"</span>
                                          (string-to-number (dom-text min-temp-node))
                                          (string-to-number (dom-text max-temp-node))))
                                (dom-by-tag (dom-child-by-tag info-node 'temperature) 'range))
                         (apply (<span style="font-weight: bold;">lambda</span> (node-1 node-2 node-3 node-4)
                                  (format <span style="font-style: italic;">"%2d-%2d-%2d-%2d&#65285;"</span>
                                          (string-to-number (dom-text node-1))
                                          (string-to-number (dom-text node-2))
                                          (string-to-number (dom-text node-3))
                                          (string-to-number (dom-text node-4))))
                                (dom-by-tag (dom-child-by-tag info-node 'rainfallchance) 'period))
                         (dom-text (dom-child-by-tag info-node 'weather)))))
              (dom-by-tag (dom-by-id data area) 'info))
             (insert <span style="font-style: italic;">"\n"</span>))))))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">weather</span> ()
  (<span style="font-weight: bold;">interactive</span>)
  (<span style="font-weight: bold;">let</span> ((buffer (get-buffer-create <span style="font-style: italic;">"weather"</span>)))
    (mapcar (<span style="font-weight: bold;">lambda</span> (weather-area)
              (weather-area-show weather-area buffer))
            weather-areas)
    (switch-to-buffer buffer)))

(<span style="font-weight: bold;">provide</span> '<span style="font-weight: bold; text-decoration: underline;">weather</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-orgc0db72f" class="outline-4">
<h4 id="orgc0db72f">view-file</h4>
<div class="outline-text-4" id="text-orgc0db72f">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defcustom</span> <span style="font-weight: bold; font-style: italic;">my/view-file--temp-dir</span> <span style="font-style: italic;">"~/var/tmp/view-file"</span>
  <span style="font-style: italic;">"Directory in which we will work for uncompresssing, decrypting and htmlize."</span>)
(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">my/view-file--open-file</span> nil
  <span style="font-style: italic;">"Target file which we will actually open.</span>
<span style="font-style: italic;">User should not change this value."</span>)
(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">my/view-file--remove-files</span> nil
  <span style="font-style: italic;">"List of files which we will remove afterward.</span>
<span style="font-style: italic;">User should not change this value."</span>)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">TODO: support line/search args to jump to the desired position</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/view-file</span> (file <span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> system)
  <span style="font-style: italic;">"Open FILE in my preferable way.</span>

<span style="font-style: italic;">if SYSTEM is non-nii open FILE using preferable application in system."</span>
  (<span style="font-weight: bold;">setq</span> my/view-file--open-file (expand-file-name file))
  (make-directory my/view-file--temp-dir t)

  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">decrypt file if it is encrypted</span>
  (when-let* ((match (string-match <span style="font-style: italic;">"</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">(</span><span style="font-style: italic;">.+</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">)</span><span style="font-weight: bold; font-style: italic;">\</span><span style="font-style: italic;">.gpg$"</span> my/view-file--open-file))
              (decrypt-file (expand-file-name (file-name-base my/view-file--open-file)
                                              (expand-file-name my/view-file--temp-dir)))
              (context (epg-make-context epa-protocol)))
    (epg-context-set-passphrase-callback context
                                         #'epa-passphrase-callback-function)
    (epg-decrypt-file context my/view-file--open-file decrypt-file)
    (<span style="font-weight: bold;">setq</span> my/view-file--open-file decrypt-file)
    (add-to-list 'my/view-file--remove-files decrypt-file))

  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">uncompress file if it is tarball</span>
  (<span style="font-weight: bold;">let*</span> (uncompress-file
         (uncompress-command
          (<span style="font-weight: bold;">cond</span>
           ((string-match <span style="font-style: italic;">"</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">(</span><span style="font-style: italic;">.+</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">)</span><span style="font-style: italic;">\\.t</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">(</span><span style="font-style: italic;">ar\\.</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">)</span><span style="font-style: italic;">?gz$"</span> my/view-file--open-file)
            (<span style="font-weight: bold;">setq</span> uncompress-file (expand-file-name (file-name-base (match-string 1 my/view-file--open-file))
                                                    my/view-file--temp-dir))
            (format <span style="font-style: italic;">"gzip -dc %s | tar -xf - -C %s"</span>
                    (shell-quote-argument my/view-file--open-file)
                    (shell-quote-argument uncompress-file)))
           ((string-match <span style="font-style: italic;">"</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">(</span><span style="font-style: italic;">.+</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">)</span><span style="font-style: italic;">\\.t</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">(</span><span style="font-style: italic;">ar\\.</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">)</span><span style="font-style: italic;">?zst$"</span> my/view-file--open-file)
            (<span style="font-weight: bold;">setq</span> uncompress-file (expand-file-name (file-name-base (match-string 1 my/view-file--open-file))
                                                    my/view-file--temp-dir))
            (format <span style="font-style: italic;">"unzstd -c %s | tar -xf - -C %s"</span>
                    (shell-quote-argument my/view-file--open-file)
                    (shell-quote-argument uncompress-file)))
           ((string-match <span style="font-style: italic;">"</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">(</span><span style="font-style: italic;">.+</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">)</span><span style="font-style: italic;">\\.zip$"</span> my/view-file--open-file)
            (<span style="font-weight: bold;">setq</span> uncompress-file (expand-file-name (file-name-base (match-string 1 my/view-file--open-file))
                                                    my/view-file--temp-dir))
            (format <span style="font-style: italic;">"unzip -o -d %s %s"</span>
                    (shell-quote-argument uncompress-file)
                    (shell-quote-argument my/view-file--open-file))))))
    (<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">and</span> (stringp uncompress-file)
               (stringp uncompress-command))
      (make-directory uncompress-file t)
      (call-process-shell-command
       uncompress-command)
      (add-to-list 'my/view-file--remove-files uncompress-file)
      (<span style="font-weight: bold;">setq</span> my/view-file--open-file uncompress-file)))

  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">convert pdf/epub to html</span>
  (<span style="font-weight: bold;">let*</span> ((dirname-html
          (expand-file-name (file-relative-name my/view-file--open-file <span style="font-style: italic;">"~"</span>)
                            (expand-file-name my/view-file--temp-dir)))
         (filename-html
          (concat (file-name-as-directory dirname-html)
                  <span style="font-style: italic;">"index.html"</span>))
         (command
          (<span style="font-weight: bold;">cond</span>
           ((= (call-process-shell-command (format <span style="font-style: italic;">"filetype-cli check --type pdf %s"</span> (shell-quote-argument my/view-file--open-file))) 0)
            (format <span style="font-style: italic;">"cat %s 2&gt;/dev/null | pdftohtml -p -s -noframes -nomerge -nodrm - %s"</span>
                    (shell-quote-argument my/view-file--open-file)
                    (shell-quote-argument filename-html)))
           ((= (call-process-shell-command (format <span style="font-style: italic;">"filetype-cli check --type epub %s"</span> (shell-quote-argument my/view-file--open-file))) 0)
            (format <span style="font-style: italic;">"cat %s 2&gt;/dev/null | pandoc --from=epub --to=html --extract-media=%s - | strip_ruby &gt; %s"</span>
                    (shell-quote-argument my/view-file--open-file)
                    (shell-quote-argument dirname-html)
                    (shell-quote-argument filename-html))))))
    (<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">and</span> (null system)
               (stringp command))
      (<span style="font-weight: bold;">unless</span> (file-exists-p filename-html)
        (make-directory dirname-html t)
        (call-process-shell-command command)
        <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">reuse html only if pdf/epub file is not ecrypted</span>
        (<span style="font-weight: bold;">when</span> (member my/view-file--open-file my/view-file--remove-files)
          (add-to-list 'my/view-file--remove-files dirname-html)))
      (<span style="font-weight: bold;">setq</span> my/view-file--open-file filename-html)))

  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">open file</span>
  (<span style="font-weight: bold;">cond</span>
   ((<span style="font-weight: bold;">or</span> system
        (string-match-p <span style="font-style: italic;">"\\.midi?$"</span> my/view-file--open-file)
        (= (call-process-shell-command (format <span style="font-style: italic;">"filetype-cli check --type pdf %s"</span> (shell-quote-argument my/view-file--open-file))) 0)
        (= (call-process-shell-command (format <span style="font-style: italic;">"filetype-cli check --type epub %s"</span> (shell-quote-argument my/view-file--open-file))) 0))
    (<span style="font-weight: bold;">let</span> ((process-connection-type nil))
      (call-process-shell-command (format <span style="font-style: italic;">"xdg-open %s"</span> (shell-quote-argument my/view-file--open-file)))
      (sleep-for 3)
      (funcall 'my/view-file--finalize-function)))
   ((<span style="font-weight: bold;">or</span> (= (call-process-shell-command (format <span style="font-style: italic;">"filetype-cli check --type playable %s"</span> (shell-quote-argument my/view-file--open-file))) 0)
        (seq-some (<span style="font-weight: bold;">lambda</span> (suffix)
                    (string-suffix-p suffix my/view-file--open-file t))
                  '(<span style="font-style: italic;">".m3u"</span> <span style="font-style: italic;">".mts"</span> <span style="font-style: italic;">".m2ts"</span>)))
    (when-let ((mpv-proc (start-process-shell-command
                          <span style="font-style: italic;">"mpv"</span> nil
                          (format <span style="font-style: italic;">"nohup mpv --force-window %s &gt;/dev/null 2&gt;&amp;1"</span> (shell-quote-argument my/view-file--open-file)))))
      (set-process-sentinel
       mpv-proc
       (<span style="font-weight: bold;">lambda</span> (process desc)
         (<span style="font-weight: bold;">when</span> (eq (process-status process) 'exit)
           (funcall 'my/view-file--finalize-function))))))
   ((= (call-process-shell-command
        (format <span style="font-style: italic;">"filetype-cli check --type html %s"</span>
                (shell-quote-argument my/view-file--open-file))) <span style="font-weight: bold;">0)</span>
    (add-hook 'eww-after-render-hook 'my/view-file--eww-finalize-function)
    (eww-open-file my/view-file--open-file))
   ((file-directory-p my/view-file--open-file)
    (dired my/view-file--open-file)
    (funcall 'my/view-file--finalize-function))
   (t
    (find-file my/view-file--open-file)
    (funcall 'my/view-file--finalize-function))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/view-file--finalize-function</span> ()
  <span style="font-style: italic;">"Remove files and initialize variables."</span>
  (mapc (<span style="font-weight: bold;">lambda</span> (file)
          (<span style="font-weight: bold;">when</span> (stringp file)
            (<span style="font-weight: bold;">cond</span>
             ((file-directory-p file)
              (delete-directory file t nil))
             ((file-exists-p file)
              (<span style="font-weight: bold;">let</span> ((delete-by-moving-to-trash t))
                (delete-file file))))))
        my/view-file--remove-files)
  (<span style="font-weight: bold;">setq</span> my/view-file--open-file nil
        my/view-file--remove-files nil))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/view-file--eww-finalize-function</span> ()
  <span style="font-style: italic;">"Finalize function for `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">EWW</span><span style="font-style: italic;">'."</span>
  (remove-hook 'eww-after-render-hook 'my/view-file--eww-finalize-function)
  (funcall 'my/view-file--finalize-function))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/view-file-filter-org-link-store-props</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;rest</span> plist-orig)
  <span style="font-style: italic;">"Filter PLIST-ORIG to original file name if value of `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">eww-current-url</span><span style="font-style: italic;">'</span>
<span style="font-style: italic;"> is in `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">my/view-file--temp-dir</span><span style="font-style: italic;">'."</span>
  (<span style="font-weight: bold;">let</span> ((plist-filtered (car plist-orig)))
    (<span style="font-weight: bold;">if</span> (plist-member plist-filtered <span style="font-weight: bold;">:link</span>)
        (plist-put plist-filtered
                   <span style="font-weight: bold;">:link</span>
                   (replace-regexp-in-string (format <span style="font-style: italic;">"%s</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">(</span><span style="font-style: italic;">.*</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">)</span><span style="font-style: italic;">/index.html"</span>
                                                     (expand-file-name my/view-file--temp-dir))
                                             (format <span style="font-style: italic;">"%s\\1"</span>
                                                     (expand-file-name <span style="font-style: italic;">"~"</span>))
                                             (plist-get plist-filtered
                                                        <span style="font-weight: bold;">:link</span>))))
    (car plist-orig)))

(advice-add #'org-link-store-props <span style="font-weight: bold;">:filter-args</span>
            #'my/view-file-filter-org-link-store-props)

(<span style="font-weight: bold;">provide</span> '<span style="font-weight: bold; text-decoration: underline;">my/view-file</span>)
</pre>
</div>
</div>
<ul class="org-ul">
<li><a id="orgc5d3a57"></a>filetype-cli<br />
<div class="outline-text-5" id="text-orgc5d3a57">
<p>
Wrapper script for <a href="dotbins.html#org5f9a4d4">filetype.rb</a>.
</p>

<div class="org-src-container">
<pre class="src src-ruby"><span style="font-weight: bold; font-style: italic;">#</span><span style="font-weight: bold; font-style: italic;">!/usr/bin/env ruby</span>

<span style="font-weight: bold;">require</span> <span style="font-style: italic;">'thor'</span>
<span style="font-weight: bold;">require</span> <span style="font-style: italic;">'filetype'</span>

<span style="font-weight: bold;">class</span> <span style="font-weight: bold; text-decoration: underline;">FileTypeCLI</span> &lt; <span style="font-weight: bold; text-decoration: underline;">Thor</span>
  default_command <span style="font-weight: bold; text-decoration: underline;">:check</span>
  desc <span style="font-style: italic;">"check"</span>, <span style="font-style: italic;">"check whether the file is the speicfied type."</span>
  option <span style="font-weight: bold; text-decoration: underline;">:type</span>, <span style="font-weight: bold; text-decoration: underline;">aliases:</span> <span style="font-style: italic;">"t"</span>, <span style="font-weight: bold; text-decoration: underline;">:type</span> =&gt; <span style="font-weight: bold; text-decoration: underline;">:string</span>, <span style="font-weight: bold; text-decoration: underline;">:required</span> =&gt; <span style="font-weight: bold; text-decoration: underline;">true</span>,
         <span style="font-weight: bold; text-decoration: underline;">:bannar</span> =&gt; <span style="font-style: italic;">'--type image'</span>
  <span style="font-weight: bold;">def</span> <span style="font-weight: bold;">check</span>(file)
    <span style="font-weight: bold;">unless</span> <span style="font-weight: bold; text-decoration: underline;">FileType</span>.respond_to?(<span style="font-style: italic;">"</span><span style="font-weight: bold; font-style: italic;">#{options[:type]}</span><span style="font-style: italic;">?"</span>)
      <span style="font-weight: bold;">$stderr</span>.print(<span style="font-style: italic;">"file type '</span><span style="font-weight: bold; font-style: italic;">#{options[:type]}</span><span style="font-style: italic;">' is not valid."</span>)
      <span style="font-weight: bold;">exit</span> 1
    <span style="font-weight: bold;">end</span>

    status = <span style="font-weight: bold; text-decoration: underline;">FileType</span>.send(<span style="font-style: italic;">"</span><span style="font-weight: bold; font-style: italic;">#{options[:type]}</span><span style="font-style: italic;">?"</span>, file)
    <span style="font-weight: bold;">unless</span> status
      <span style="font-weight: bold;">$stderr</span>.print(<span style="font-style: italic;">"</span><span style="font-weight: bold; font-style: italic;">#{file}</span><span style="font-style: italic;"> is not of </span><span style="font-weight: bold; font-style: italic;">#{options[:type]}</span><span style="font-style: italic;">?"</span>)
      <span style="font-weight: bold;">exit</span> 1
    <span style="font-weight: bold;">end</span>

    <span style="font-weight: bold;">exit</span> 0
  <span style="font-weight: bold;">end</span>
<span style="font-weight: bold;">end</span>

<span style="font-weight: bold; text-decoration: underline;">FileTypeCLI</span>.start(<span style="font-weight: bold; text-decoration: underline;">ARGV</span>)
</pre>
</div>
</div>
</li>

<li><a id="orgb4511ce"></a>strip<sub>ruby</sub><br />
<div class="outline-text-5" id="text-orgb4511ce">
<p>
A program strips all ruby tags in a HTML stream. All HTML contents are expected to be from STDIN and go out as STDOUT. This procedure is mainly for html files converted from pdf and epub files.
Stripping rules are:
</p>
<ul class="org-ul">
<li>&lt;ruby&gt; tag will be stripped</li>
<li>&lt;rt&gt; tree for furigana tree will be removed</li>
<li>&lt;rp&gt; tree contains parenthes for non-ruby-support brouwser will be removed</li>
<li>&lt;rb&gt; tag for delimiter will be stripped</li>
<li>&lt;rtc&gt; tree for semantic word will be removed</li>
</ul>

<div class="org-src-container">
<pre class="src src-python"><span style="font-weight: bold; font-style: italic;">#</span><span style="font-weight: bold; font-style: italic;">!/usr/bin/env python3</span>

<span style="font-weight: bold;">import</span> sys
<span style="font-weight: bold;">import</span> lxml.html <span style="font-weight: bold;">as</span> html

<span style="font-weight: bold; font-style: italic;">INPUT_STR</span> = sys.stdin.read()
<span style="font-weight: bold; font-style: italic;">ROOT</span> = html.fromstring(INPUT_STR).getroottree()

<span style="font-weight: bold;">for</span> ruby <span style="font-weight: bold;">in</span> ROOT.xpath(<span style="font-style: italic;">'//ruby'</span>):
    <span style="font-weight: bold;">for</span> rt <span style="font-weight: bold;">in</span> ruby.xpath(<span style="font-style: italic;">'//rt'</span>):
        rt.drop_tree()
    <span style="font-weight: bold;">for</span> rp <span style="font-weight: bold;">in</span> ruby.xpath(<span style="font-style: italic;">'//rp'</span>):
        rp.drop_tree()
    <span style="font-weight: bold;">for</span> rb <span style="font-weight: bold;">in</span> ruby.xpath(<span style="font-style: italic;">'//rb'</span>):
        rb.drop_tag()
    <span style="font-weight: bold;">for</span> rtc <span style="font-weight: bold;">in</span> ruby.xpath(<span style="font-style: italic;">'//rtc'</span>):
        rtc.drop_tree()
    ruby.drop_tag()

<span style="font-weight: bold; font-style: italic;">CONTENT</span> = html.tostring(ROOT, encoding=<span style="font-style: italic;">"utf-8"</span>, method=<span style="font-style: italic;">'html'</span>, pretty_print=<span style="font-weight: bold; text-decoration: underline;">True</span>)
<span style="font-weight: bold;">print</span>(CONTENT.decode())
</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org25924d4" class="outline-2">
<h2 id="org25924d4">package management</h2>
<div class="outline-text-2" id="text-org25924d4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">((<span style="font-style: italic;">"Emacs-wgrep"</span> . <span style="font-style: italic;">"f9687c28bbc2e84f87a479b6ce04407bb97cfb23"</span>)
 (<span style="font-style: italic;">"adaptive-wrap"</span> . <span style="font-style: italic;">"0d5b4a07de76d87dd64333a566a8a0a845f2b9f0"</span>)
 (<span style="font-style: italic;">"aggressive-indent-mode"</span> . <span style="font-style: italic;">"cb416faf61c46977c06cf9d99525b04dc109a33c"</span>)
 (<span style="font-style: italic;">"alert"</span> . <span style="font-style: italic;">"7046393272686c7a1a9b3e7f7b1d825d2e5250a6"</span>)
 (<span style="font-style: italic;">"app-launcher"</span> . <span style="font-style: italic;">"80a9ed37892ee6e21fe44487ed11f66a15e3f440"</span>)
 (<span style="font-style: italic;">"avy"</span> . <span style="font-style: italic;">"8686845ed907b986ac7c95169b6396300ee114c2"</span>)
 (<span style="font-style: italic;">"comment-dwim-2"</span> . <span style="font-style: italic;">"3dfdd58495c46a37708344a57c5c52beca6b2c1c"</span>)
 (<span style="font-style: italic;">"company-jedi"</span> . <span style="font-style: italic;">"4775b659564f1d57bc68c88c9faabf44c9fe4e4d"</span>)
 (<span style="font-style: italic;">"company-mode"</span> . <span style="font-style: italic;">"6116c4617a7934acfe84cb82a058e9b198f0f480"</span>)
 (<span style="font-style: italic;">"consult"</span> . <span style="font-style: italic;">"f757c17cfc3850fb25d28c90ebf19db0976895fe"</span>)
 (<span style="font-style: italic;">"consult-dir"</span> . <span style="font-style: italic;">"08f543ae6acbfc1ffe579ba1d00a5414012d5c0b"</span>)
 (<span style="font-style: italic;">"dash.el"</span> . <span style="font-style: italic;">"da167c51e9fd167a48d06c7c0ee8e3ac7abd9718"</span>)
 (<span style="font-style: italic;">"ddskk"</span> . <span style="font-style: italic;">"81410b925afd4cfd1ca5ab6c1257e221e1cc664f"</span>)
 (<span style="font-style: italic;">"define-word"</span> . <span style="font-style: italic;">"6e4a427503aef096484f88332962c346cdd10847"</span>)
 (<span style="font-style: italic;">"delight"</span> . <span style="font-style: italic;">"70cb8cec9e5eb2c24364e065d85c2ea8f14a587c"</span>)
 (<span style="font-style: italic;">"diminish.el"</span> . <span style="font-style: italic;">"565a983a39d2e2cffab5df13b34f3b6116723208"</span>)
 (<span style="font-style: italic;">"dired-du"</span> . <span style="font-style: italic;">"d6571317673ba44566ba411d26b7af74e3139ff7"</span>)
 (<span style="font-style: italic;">"dired-hacks"</span> . <span style="font-style: italic;">"ae39981d7cc58206cfeb377d6621bdd9000fd472"</span>)
 (<span style="font-style: italic;">"dired-hide-dotfiles"</span> . <span style="font-style: italic;">"b715f643ec805b3b8aca334595e6589320f04a49"</span>)
 (<span style="font-style: italic;">"dired-rsync"</span> . <span style="font-style: italic;">"947a008387a939f466ca122bda2ea98bb17710e3"</span>)
 (<span style="font-style: italic;">"dired-single"</span> . <span style="font-style: italic;">"f760aa94ea3f87845dd2325287d05447322a60bc"</span>)
 (<span style="font-style: italic;">"dumb-jump"</span> . <span style="font-style: italic;">"0319569f1332641057c3e23d1e3bffb2404435a8"</span>)
 (<span style="font-style: italic;">"easy-kill"</span> . <span style="font-style: italic;">"e2b667f651a3531164d24ea4cbcd8c34fba0e17f"</span>)
 (<span style="font-style: italic;">"el-get"</span> . <span style="font-style: italic;">"b5a5a405d04f61ec9c5fcb19357a50a4b9e36a25"</span>)
 (<span style="font-style: italic;">"elfeed"</span> . <span style="font-style: italic;">"e29c8b91450bd42d90041231f769c4e5fe5070da"</span>)
 (<span style="font-style: italic;">"elfeed-org"</span> . <span style="font-style: italic;">"77b6bbf222487809813de260447d31c4c59902c9"</span>)
 (<span style="font-style: italic;">"elisp-refs"</span> . <span style="font-style: italic;">"b3634a4567c655a1cda51b217629849cba0ac6a7"</span>)
 (<span style="font-style: italic;">"emacs-async"</span> . <span style="font-style: italic;">"5d365ffc6a2c2041657eaa5d762c395ea748c8d7"</span>)
 (<span style="font-style: italic;">"emacs-ctable"</span> . <span style="font-style: italic;">"b8830d1ca95abb100a81bc32011bd17d5ecba000"</span>)
 (<span style="font-style: italic;">"emacs-deferred"</span> . <span style="font-style: italic;">"2239671d94b38d92e9b28d4e12fd79814cfb9c16"</span>)
 (<span style="font-style: italic;">"emacs-epc"</span> . <span style="font-style: italic;">"e1bfa5ca163273859336e3cc89b4b6460f7f8cda"</span>)
 (<span style="font-style: italic;">"emacs-jedi"</span> . <span style="font-style: italic;">"d9b53d2ca103c46686f6fb4aa92d8af403107982"</span>)
 (<span style="font-style: italic;">"emacs-kv"</span> . <span style="font-style: italic;">"721148475bce38a70e0b678ba8aa923652e8900e"</span>)
 (<span style="font-style: italic;">"emacs-libvterm"</span> . <span style="font-style: italic;">"01a1332ebb11daca5408f7fcb8a08454b0176e79"</span>)
 (<span style="font-style: italic;">"emacs-python-environment"</span> . <span style="font-style: italic;">"401006584e32864a10c69d29f14414828909362e"</span>)
 (<span style="font-style: italic;">"emacs-request"</span> . <span style="font-style: italic;">"99ae82f1f578787bc19100970ce108dbd247fa27"</span>)
 (<span style="font-style: italic;">"emacs-which-key"</span> . <span style="font-style: italic;">"fc29864395fdaf688e2ef5111831663bad89a020"</span>)
 (<span style="font-style: italic;">"emacsmirror-mirror"</span> . <span style="font-style: italic;">"cbb3c3c57c522ba97a8793aa8ba471151556e404"</span>)
 (<span style="font-style: italic;">"emacsql"</span> . <span style="font-style: italic;">"6d8cd9366284b5a27268ff4b783e2c34573d5b60"</span>)
 (<span style="font-style: italic;">"emacsql-sqlite3"</span> . <span style="font-style: italic;">"50aa9bdd76b0d18bf80526cff13a69fe306ee29c"</span>)
 (<span style="font-style: italic;">"embark"</span> . <span style="font-style: italic;">"010b7356af782a3723fcfbbfc943bc8082c54c27"</span>)
 (<span style="font-style: italic;">"epl"</span> . <span style="font-style: italic;">"78ab7a85c08222cd15582a298a364774e3282ce6"</span>)
 (<span style="font-style: italic;">"esxml"</span> . <span style="font-style: italic;">"701ccc285f3748d94c12f85636fecaa88858c178"</span>)
 (<span style="font-style: italic;">"exec-path-from-shell"</span> . <span style="font-style: italic;">"d8aa7765a138a0cee1a18ac380019fb3b33d07e6"</span>)
 (<span style="font-style: italic;">"expand-region.el"</span> . <span style="font-style: italic;">"95a773bd8f557cbd43d3b2dab2fa4417ec5927ab"</span>)
 (<span style="font-style: italic;">"f.el"</span> . <span style="font-style: italic;">"50af874cd19042f17c8686813d52569b1025c76a"</span>)
 (<span style="font-style: italic;">"flycheck"</span> . <span style="font-style: italic;">"784f184cdd9f9cb4e3dbb997c09d93e954142842"</span>)
 (<span style="font-style: italic;">"git-modes"</span> . <span style="font-style: italic;">"62fbf2e5b84ca789e7bc2f87939386023b5ba3df"</span>)
 (<span style="font-style: italic;">"gntp.el"</span> . <span style="font-style: italic;">"767571135e2c0985944017dc59b0be79af222ef5"</span>)
 (<span style="font-style: italic;">"gnu-elpa-mirror"</span> . <span style="font-style: italic;">"0df9ceb0143205840193fab980ac7ac3a6c091b3"</span>)
 (<span style="font-style: italic;">"gnuplot"</span> . <span style="font-style: italic;">"7138b139d2dca9683f1a81325c643b2744aa1ea3"</span>)
 (<span style="font-style: italic;">"gnuplot-mode"</span> . <span style="font-style: italic;">"601f6392986f0cba332c87678d31ae0d0a496ce7"</span>)
 (<span style="font-style: italic;">"helpful"</span> . <span style="font-style: italic;">"584ecc887bb92133119f93a6716cdf7af0b51dca"</span>)
 (<span style="font-style: italic;">"ht.el"</span> . <span style="font-style: italic;">"c4c1be487d6ecb353d07881526db05d7fc90ea87"</span>)
 (<span style="font-style: italic;">"hungry-delete"</span> . <span style="font-style: italic;">"0434458d3f6b2b585f332271feaa054bf4ec96d7"</span>)
 (<span style="font-style: italic;">"hydra"</span> . <span style="font-style: italic;">"2d553787aca1aceb3e6927e426200e9bb9f056f1"</span>)
 (<span style="font-style: italic;">"inf-ruby"</span> . <span style="font-style: italic;">"49d59a7897f594e3be74ecbddae83719f9a6c0f0"</span>)
 (<span style="font-style: italic;">"japanese-holidays"</span> . <span style="font-style: italic;">"45e70a6eaf4a555fadc58ab731d522a037a81997"</span>)
 (<span style="font-style: italic;">"js2-mode"</span> . <span style="font-style: italic;">"e6a9059fc823a17496e1a5114652d92a9071a78f"</span>)
 (<span style="font-style: italic;">"let-alist"</span> . <span style="font-style: italic;">"6708ec0b2e6dff80ff5b64698aa009d9070a2ed2"</span>)
 (<span style="font-style: italic;">"log4e"</span> . <span style="font-style: italic;">"7df0c1ff4656f8f993b87064b1567618eadb5546"</span>)
 (<span style="font-style: italic;">"lsp-mode"</span> . <span style="font-style: italic;">"77b918fc0b6d8ec8624d2a77fc0f5e465518fd29"</span>)
 (<span style="font-style: italic;">"lua-mode"</span> . <span style="font-style: italic;">"2d9a468b94acd8480299d47449b53136060b7b23"</span>)
 (<span style="font-style: italic;">"magit"</span> . <span style="font-style: italic;">"877f7140451de30c3c55554aa780f5a2680f6674"</span>)
 (<span style="font-style: italic;">"map"</span> . <span style="font-style: italic;">"dba584726393b0d9831e5cd44d0a974d7d993ca3"</span>)
 (<span style="font-style: italic;">"marginalia"</span> . <span style="font-style: italic;">"9cd762b6c3f2714375f47993e9a6384d3bc16ebf"</span>)
 (<span style="font-style: italic;">"markdown-mode"</span> . <span style="font-style: italic;">"9977753eebe3f5cca7ab85b18a7c719fdb0b7654"</span>)
 (<span style="font-style: italic;">"melpa"</span> . <span style="font-style: italic;">"cca2c57104e14cb0c47e27d7fe4b437b38009a5c"</span>)
 (<span style="font-style: italic;">"migemo"</span> . <span style="font-style: italic;">"e4744efae1b2fdea2bbd2ceaff0f6ea0bb739f5a"</span>)
 (<span style="font-style: italic;">"modus-themes"</span> . <span style="font-style: italic;">"eba0ca9ce2bc2014669a55231136a01e015098da"</span>)
 (<span style="font-style: italic;">"mu4e-alert"</span> . <span style="font-style: italic;">"91f0657c5b245a9de57aa38391221fb5d141d9bd"</span>)
 (<span style="font-style: italic;">"nov.el"</span> . <span style="font-style: italic;">"b3c7cc28e95fe25ce7b443e5f49e2e45360944a3"</span>)
 (<span style="font-style: italic;">"ob-async"</span> . <span style="font-style: italic;">"de1cd6c93242a4cb8773bbe115b7be3d4dd6b97e"</span>)
 (<span style="font-style: italic;">"orderless"</span> . <span style="font-style: italic;">"62f71c34baca0b7d0adeab4a1c07d85ffcee80d9"</span>)
 (<span style="font-style: italic;">"org"</span> . <span style="font-style: italic;">"3664447eb2417b38f0053674f248d2b0f1592ff0"</span>)
 (<span style="font-style: italic;">"org-clock-convenience"</span> . <span style="font-style: italic;">"7d14699a15ad6c5b9a63246a11188c77f8800e94"</span>)
 (<span style="font-style: italic;">"org-contrib"</span> . <span style="font-style: italic;">"06ac117a39f95e72a04988955978f13380587faa"</span>)
 (<span style="font-style: italic;">"org-drill"</span> . <span style="font-style: italic;">"bf8fe812d44a3ce3e84361fb39b8ef28ca10fd0c"</span>)
 (<span style="font-style: italic;">"org-mime"</span> . <span style="font-style: italic;">"9bb6351b25c62835c7881fc64096028eb8ef83ef"</span>)
 (<span style="font-style: italic;">"org-ml"</span> . <span style="font-style: italic;">"1b02583a5cdb8f6b7cd82b31ec80b53753cb7729"</span>)
 (<span style="font-style: italic;">"org-ql"</span> . <span style="font-style: italic;">"94f9e6f3031b32cf5e2149beca7074807235dcb0"</span>)
 (<span style="font-style: italic;">"org-reveal"</span> . <span style="font-style: italic;">"58540c7dde7dbf4e922209d7fb3e6739570f49b5"</span>)
 (<span style="font-style: italic;">"org-roam"</span> . <span style="font-style: italic;">"be95b42d32d9707309ab373f1d8182c84db41c5c"</span>)
 (<span style="font-style: italic;">"org-super-agenda"</span> . <span style="font-style: italic;">"a5557ea4f51571ee9def3cd9a1ab1c38f1a27af7"</span>)
 (<span style="font-style: italic;">"org-web-tools"</span> . <span style="font-style: italic;">"b94a07add8558ef7b0666173dbb8a2554f1d41a6"</span>)
 (<span style="font-style: italic;">"orgit"</span> . <span style="font-style: italic;">"609fd0ccfb5268704b5bc7d7ac1014d4960b9707"</span>)
 (<span style="font-style: italic;">"ov"</span> . <span style="font-style: italic;">"c5b9aa4e1b00d702eb2caedd61c69a22a5fa1fab"</span>)
 (<span style="font-style: italic;">"pangu-spacing"</span> . <span style="font-style: italic;">"a4463dbb74abdeddb6c1c132a1f8fcf67ed87498"</span>)
 (<span style="font-style: italic;">"paredit"</span> . <span style="font-style: italic;">"8330a41e8188fe18d3fa805bb9aa529f015318e8"</span>)
 (<span style="font-style: italic;">"pass"</span> . <span style="font-style: italic;">"5651da53137db9adcb125b4897c2fe27eeb4368d"</span>)
 (<span style="font-style: italic;">"password-store"</span> . <span style="font-style: italic;">"3dd14690c7c81ac80e32e942cf5976732faf0fb3"</span>)
 (<span style="font-style: italic;">"password-store-otp.el"</span> . <span style="font-style: italic;">"04998c8578a060ab4a4e8f46f2ee0aafad4ab4d5"</span>)
 (<span style="font-style: italic;">"pdf-tools"</span> . <span style="font-style: italic;">"66dd313dbb1d078fa847805b0d7cf9797bec9e4c"</span>)
 (<span style="font-style: italic;">"peg"</span> . <span style="font-style: italic;">"014927e2130edcc453ca078a4fa06b48be63d834"</span>)
 (<span style="font-style: italic;">"persist"</span> . <span style="font-style: italic;">"bbd57894134e06ec71251c1318055c0f8fd6e05b"</span>)
 (<span style="font-style: italic;">"pkg-info"</span> . <span style="font-style: italic;">"76ba7415480687d05a4353b27fea2ae02b8d9d61"</span>)
 (<span style="font-style: italic;">"plantuml-mode"</span> . <span style="font-style: italic;">"ea45a13707abd2a70df183f1aec6447197fc9ccc"</span>)
 (<span style="font-style: italic;">"popup-el"</span> . <span style="font-style: italic;">"80829dd46381754639fb764da11c67235fe63282"</span>)
 (<span style="font-style: italic;">"project"</span> . <span style="font-style: italic;">"a546cce47c434b0b4bf24bf1d5ed6e4623492072"</span>)
 (<span style="font-style: italic;">"quickrun"</span> . <span style="font-style: italic;">"35e91f4b6cfbb8dd2adea4d8cf53ae76db7d00d9"</span>)
 (<span style="font-style: italic;">"rainbow-mode"</span> . <span style="font-style: italic;">"8059f1cb756d2b211af962f07c5e6aff958094d7"</span>)
 (<span style="font-style: italic;">"restart-emacs"</span> . <span style="font-style: italic;">"9aa90d3df9e08bc420e1c9845ee3ff568e911bd9"</span>)
 (<span style="font-style: italic;">"s.el"</span> . <span style="font-style: italic;">"08661efb075d1c6b4fa812184c1e5e90c08795a9"</span>)
 (<span style="font-style: italic;">"spinner"</span> . <span style="font-style: italic;">"e19f3cfc0646c0e23c10c22df219fcf427054621"</span>)
 (<span style="font-style: italic;">"straight.el"</span> . <span style="font-style: italic;">"af5437f2afd00936c883124d6d3098721c2d306c"</span>)
 (<span style="font-style: italic;">"synosaurus"</span> . <span style="font-style: italic;">"bc26f5c22b4d08dd09d0852435814977433c9521"</span>)
 (<span style="font-style: italic;">"system-packages"</span> . <span style="font-style: italic;">"d18b2c0e38ddc1ccfcd7d787112fb3465df51769"</span>)
 (<span style="font-style: italic;">"tablist"</span> . <span style="font-style: italic;">"c834a84efb6efa32497efe1e73160fade741b836"</span>)
 (<span style="font-style: italic;">"transient"</span> . <span style="font-style: italic;">"65f4eac82c564204d20df0a606dc2fcaa72cc41e"</span>)
 (<span style="font-style: italic;">"ts.el"</span> . <span style="font-style: italic;">"3fee71ceefac71ba55eb34829d7e94bb3df37cee"</span>)
 (<span style="font-style: italic;">"twittering-mode"</span> . <span style="font-style: italic;">"bacb67311a4e01d39950ffae8e9291c7e8a37d3b"</span>)
 (<span style="font-style: italic;">"undo-tree"</span> . <span style="font-style: italic;">"e326c6135e62f5fe8536528d3acd5e798f847407"</span>)
 (<span style="font-style: italic;">"use-package"</span> . <span style="font-style: italic;">"a7422fb8ab1baee19adb2717b5b47b9c3812a84c"</span>)
 (<span style="font-style: italic;">"vertico"</span> . <span style="font-style: italic;">"869d3fd77671a236560a114c38e01bc7ff374353"</span>)
 (<span style="font-style: italic;">"visual-regexp-steroids.el"</span> . <span style="font-style: italic;">"a6420b25ec0fbba43bf57875827092e1196d8a9e"</span>)
 (<span style="font-style: italic;">"visual-regexp.el"</span> . <span style="font-style: italic;">"48457d42a5e0fe10fa3a9c15854f1f127ade09b5"</span>)
 (<span style="font-style: italic;">"web-mode"</span> . <span style="font-style: italic;">"61f057a6baeba6b3595e412ba79b3080dca17dcc"</span>)
 (<span style="font-style: italic;">"with-editor"</span> . <span style="font-style: italic;">"5519b6a67ecd66865b4fdd5447425eee900c54f4"</span>)
 (<span style="font-style: italic;">"xref"</span> . <span style="font-style: italic;">"edccc43d6e456edc199fd087d50ffeb7a6d663ee"</span>)
 (<span style="font-style: italic;">"yaml-mode"</span> . <span style="font-style: italic;">"40067a10ac1360f0b9533f0bbbb2eea128e2574d"</span>)
 (<span style="font-style: italic;">"yasnippet"</span> . <span style="font-style: italic;">"5cbdbf0d2015540c59ed8ee0fcf4788effdf75b6"</span>)
 (<span style="font-style: italic;">"yasnippet-snippets"</span> . <span style="font-style: italic;">"be823d7e1a1a46454d60a9f3dabb16b68b5dd853"</span>))
<span style="font-weight: bold;">:beta</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org723eca1" class="outline-2">
<h2 id="org723eca1">emacs profile for guix</h2>
<div class="outline-text-2" id="text-org723eca1">
<p>
This is a manifest file for guix to install required packages whose name is declared in each section.
Packages sitting preliminarily are required to accomplish my workflows with Emacs.
</p>

<div class="org-src-container">
<pre class="src src-scheme">(specifications-&gt;manifest
 '(<span style="font-style: italic;">"emacs"</span>
   <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">"emacs-no-x-toolkit"</span>
   <span style="font-style: italic;">"mu"</span>
   <span style="font-style: italic;">"nkf"</span>
   <span style="font-style: italic;">"graphviz"</span>
   <span style="font-style: italic;">"plantuml"</span>
   <span style="font-style: italic;">"emacs-pdf-tools"</span>
   <span style="font-style: italic;">"mpg321"</span>
   <span style="font-style: italic;">"zstd"</span>
   <span style="font-style: italic;">"isync"</span>
   <span style="font-style: italic;">"sqlite"</span>
   <span style="font-style: italic;">"stunnel"</span>
   <span style="font-style: italic;">"wordnet"</span>))
</pre>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="creator"><a href="https://www.gnu.org/software/emacs/">Emacs</a> 26.3 (<a href="https://orgmode.org">Org</a> mode 9.1.9)</p>
<p class="validation"></p>
</div>
</body>
</html>
